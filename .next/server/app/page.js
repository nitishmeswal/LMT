(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1402:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>d,originalPathname:()=>h,pages:()=>u,routeModule:()=>p,tree:()=>c}),s(5480),s(1973),s(5866);var i=s(3191),n=s(8716),r=s(7922),a=s.n(r),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5480)),"C:\\Users\\nitis\\CascadeProjects\\neuronirvana\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1973)),"C:\\Users\\nitis\\CascadeProjects\\neuronirvana\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\nitis\\CascadeProjects\\neuronirvana\\src\\app\\page.tsx"],h="/page",d={require:s,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8373:(e,t,s)=>{Promise.resolve().then(s.bind(s,1766))},3353:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let i=s(1174);s(326),s(7577);let n=i._(s(7028));function r(e,t){var s;let i={loading:e=>{let{error:t,isLoading:s,pastDelay:i}=e;return null}};"function"==typeof e&&(i.loader=e);let r={...i,...t};return(0,n.default)({...r,modules:null==(s=r.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},933:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let i=s(4129);function n(e){let{reason:t,children:s}=e;throw new i.BailoutToCSRError(t)}},7028:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let i=s(326),n=s(7577),r=s(933),a=s(6618);function o(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},s=(0,n.lazy)(()=>t.loader().then(o)),c=t.loading;function u(e){let o=c?(0,i.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=t.ssr?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.PreloadCss,{moduleIds:t.modules}),(0,i.jsx)(s,{...e})]}):(0,i.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,i.jsx)(s,{...e})});return(0,i.jsx)(n.Suspense,{fallback:o,children:l})}return u.displayName="LoadableComponent",u}},6618:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return r}});let i=s(326),n=s(5403);function r(e){let{moduleIds:t}=e,s=(0,n.getExpectedRequestStore)("next/dynamic css"),r=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));r.push(...t)}}return 0===r.length?null:(0,i.jsx)(i.Fragment,{children:r.map(e=>(0,i.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},5442:(e,t,s)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=s(7577),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=i.useState,a=i.useEffect,o=i.useLayoutEffect,l=i.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!n(e,s)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),i=r({inst:{value:s,getSnapshot:t}}),n=i[0].inst,u=i[1];return o(function(){n.value=s,n.getSnapshot=t,c(n)&&u({inst:n})},[e,s,t]),a(function(){return c(n)&&u({inst:n}),e(function(){c(n)&&u({inst:n})})},[e]),l(s),s};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},9251:(e,t,s)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=s(7577),n=s(4095),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useSyncExternalStore,o=i.useRef,l=i.useEffect,c=i.useMemo,u=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,i,n){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;var p=a(e,(h=c(function(){function e(e){if(!l){if(l=!0,a=e,e=i(e),void 0!==n&&d.hasValue){var t=d.value;if(n(t,e))return o=t}return o=e}if(t=o,r(a,e))return t;var s=i(e);return void 0!==n&&n(t,s)?(a=e,t):(a=e,o=s)}var a,o,l=!1,c=void 0===s?null:s;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,s,i,n]))[0],h[1]);return l(function(){d.hasValue=!0,d.value=p},[p]),u(p),p}},4095:(e,t,s)=>{"use strict";e.exports=s(5442)},1508:(e,t,s)=>{"use strict";e.exports=s(9251)},1766:(e,t,s)=>{"use strict";let i,n,r,a,o,l,c,u,h,d,p,m,f,x,g,y,b,v,w,j,T,N,C,k,S,A,E,M,O,D,R,I,P,q,F,V,z,L,B,W,Z,H,G,U,$,Q,Y,X,J,K,ee,et,es,ei,en,er,ea,eo,el,ec,eu,eh,ed,ep,em,ef,ex,eg,ey,eb,ev,e_,ew,ej,eT,eN,eC,ek,eS,eA,eE,eM,eO,eD,eR,eI,eP,eq,eF,eV,ez,eL,eB,eW,eZ,eH,eG,eU,e$,eQ;s.r(t),s.d(t,{default:()=>c4});var eY,eX,eJ,eK=s(326),e0=s(7577),e1=s(8129);let e2=e=>{let t;let s=new Set,i=(e,i)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=i?i:"object"!=typeof n||null===n)?n:Object.assign({},t,n),s.forEach(s=>s(t,e))}},n=()=>t,r={setState:i,getState:n,getInitialState:()=>a,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},a=t=e(i,n,r);return r},e4=e=>e?e2(e):e2;var e5=s(1508);let{useDebugValue:e3}=e0,{useSyncExternalStoreWithSelector:e6}=e5,e8=!1,e9=e=>e,e7=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?e4(e):e,s=(e,s)=>(function(e,t=e9,s){s&&!e8&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),e8=!0);let i=e6(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return e3(i),i})(t,e,s);return Object.assign(s,t),s},te=e=>t=>{try{let s=e(t);if(s instanceof Promise)return s;return{then:e=>te(e)(s),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>te(t)(e)}}},tt=(eW?e7(eW):e7)((eZ=(e,t)=>({globalTrials:{},decrementTrial:s=>{let i=t();if(i.isPremium)return!0;let n=i.globalTrials[s]??500;return!(n<=0)&&(e({globalTrials:{...i.globalTrials,[s]:n-1}}),!0)},getTrialsRemaining:e=>{let s=t();return s.isPremium?1/0:s.globalTrials[e]??500},currentDose:null,isPlaying:!1,phase:"idle",elapsedTime:0,totalDuration:0,intensity:5,volume:.7,currentVisual:"mandala",showControls:!0,startTrip:t=>{e({currentDose:t,isPlaying:!0,phase:"onset",elapsedTime:0,totalDuration:t.defaultDuration,intensity:t.intensity,currentVisual:t.visualType})},stopTrip:()=>{e({currentDose:null,isPlaying:!1,phase:"idle",elapsedTime:0})},togglePlay:()=>{e(e=>({isPlaying:!e.isPlaying}))},setPhase:t=>e({phase:t}),setElapsedTime:t=>e({elapsedTime:t}),setIntensity:t=>e({intensity:t}),setVolume:t=>e({volume:t}),setVisual:t=>e({currentVisual:t}),toggleControls:()=>e(e=>({showControls:!e.showControls})),journalEntries:[],addJournalEntry:t=>{let s={...t,id:crypto.randomUUID(),timestamp:Date.now()};e(e=>({journalEntries:[s,...e.journalEntries]}))},setJournalEntries:t=>e({journalEntries:t}),customTrips:[],addCustomTrip:t=>{let s={...t,id:crypto.randomUUID(),createdAt:Date.now()};e(e=>({customTrips:[s,...e.customTrips]}))},deleteCustomTrip:t=>{e(e=>({customTrips:e.customTrips.filter(e=>e.id!==t)}))},isPremium:!1,setPremium:t=>e({isPremium:t}),activeTab:"dispensary",setActiveTab:t=>e({activeTab:t})}),"getStorage"in(eH={name:"neuronirvana-storage",partialize:e=>({globalTrials:e.globalTrials,journalEntries:e.journalEntries,customTrips:e.customTrips,isPremium:e.isPremium})})||"serialize"in eH||"deserialize"in eH?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),eG=eZ,eU=eH,(e,t,s)=>{let i,n,r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...eU},a=!1,o=new Set,l=new Set;try{i=r.getStorage()}catch(e){}if(!i)return eG((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),e(...t)},t,s);let c=te(r.serialize),u=()=>{let e;let s=c({state:r.partialize({...t()}),version:r.version}).then(e=>i.setItem(r.name,e)).catch(t=>{e=t});if(e)throw e;return s},h=s.setState;s.setState=(e,t)=>{h(e,t),u()};let d=eG((...t)=>{e(...t),u()},t,s),p=()=>{var s;if(!i)return;a=!1,o.forEach(e=>e(t()));let c=(null==(s=r.onRehydrateStorage)?void 0:s.call(r,t()))||void 0;return te(i.getItem.bind(i))(r.name).then(e=>{if(e)return r.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===r.version)return e.state;if(r.migrate)return r.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(s=>{var i;return e(n=r.merge(s,null!=(i=t())?i:d),!0),u()}).then(()=>{null==c||c(n,void 0),a=!0,l.forEach(e=>e(n))}).catch(e=>{null==c||c(void 0,e)})};return s.persist={setOptions:e=>{r={...r,...e},e.getStorage&&(i=e.getStorage())},clearStorage:()=>{null==i||i.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>p(),hasHydrated:()=>a,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},p(),n||d}):(e$=eZ,eQ=eH,(e,t,s)=>{let i,n={storage:function(e,t){let s;try{s=e()}catch(e){return}return{getItem:e=>{var t;let i=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=s.getItem(e))?t:null;return n instanceof Promise?n.then(i):i(n)},setItem:(e,t)=>s.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>s.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...eQ},r=!1,a=new Set,o=new Set,l=n.storage;if(!l)return e$((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...t)},t,s);let c=()=>{let e=n.partialize({...t()});return l.setItem(n.name,{state:e,version:n.version})},u=s.setState;s.setState=(e,t)=>{u(e,t),c()};let h=e$((...t)=>{e(...t),c()},t,s);s.getInitialState=()=>h;let d=()=>{var s,u;if(!l)return;r=!1,a.forEach(e=>{var s;return e(null!=(s=t())?s:h)});let d=(null==(u=n.onRehydrateStorage)?void 0:u.call(n,null!=(s=t())?s:h))||void 0;return te(l.getItem.bind(l))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate)return[!0,n.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(s=>{var r;let[a,o]=s;if(e(i=n.merge(o,null!=(r=t())?r:h),!0),a)return c()}).then(()=>{null==d||d(i,void 0),i=t(),r=!0,o.forEach(e=>e(i))}).catch(e=>{null==d||d(void 0,e)})};return s.persist={setOptions:e=>{n={...n,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>d(),hasHydrated:()=>r,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},n.skipHydration||d(),i||h})));var ts=s(58),ti=s(2881);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let tn=(0,ti.Z)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),tr=(0,ti.Z)("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ta=(0,ti.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),to=(0,ti.Z)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),tl=(0,ti.Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),tc=e=>{let t=tp(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:e=>{let s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),tu(s,t)||td(e)},getConflictingClassGroupIds:(e,t)=>{let n=s[e]||[];return t&&i[e]?[...n,...i[e]]:n}}},tu=(e,t)=>{if(0===e.length)return t.classGroupId;let s=e[0],i=t.nextPart.get(s),n=i?tu(e.slice(1),i):void 0;if(n)return n;if(0===t.validators.length)return;let r=e.join("-");return t.validators.find(({validator:e})=>e(r))?.classGroupId},th=/^\[(.+)\]$/,td=e=>{if(th.test(e)){let t=th.exec(e)[1],s=t?.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},tp=e=>{let{theme:t,prefix:s}=e,i={nextPart:new Map,validators:[]};return tg(Object.entries(e.classGroups),s).forEach(([e,s])=>{tm(s,i,e,t)}),i},tm=(e,t,s,i)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:tf(t,e)).classGroupId=s;return}if("function"==typeof e){if(tx(e)){tm(e(i),t,s,i);return}t.validators.push({validator:e,classGroupId:s});return}Object.entries(e).forEach(([e,n])=>{tm(n,tf(t,e),s,i)})})},tf=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},tx=e=>e.isThemeGetter,tg=(e,t)=>t?e.map(([e,s])=>[e,s.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,s])=>[t+e,s])):e)]):e,ty=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,s=new Map,i=new Map,n=(n,r)=>{s.set(n,r),++t>e&&(t=0,i=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=i.get(e))?(n(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):n(e,t)}}},tb=e=>{let{separator:t,experimentalParseClassName:s}=e,i=1===t.length,n=t[0],r=t.length,a=e=>{let s;let a=[],o=0,l=0;for(let c=0;c<e.length;c++){let u=e[c];if(0===o){if(u===n&&(i||e.slice(c,c+r)===t)){a.push(e.slice(l,c)),l=c+r;continue}if("/"===u){s=c;continue}}"["===u?o++:"]"===u&&o--}let c=0===a.length?e:e.substring(l),u=c.startsWith("!"),h=u?c.substring(1):c;return{modifiers:a,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:s&&s>l?s-l:void 0}};return s?e=>s({className:e,parseClassName:a}):a},tv=e=>{if(e.length<=1)return e;let t=[],s=[];return e.forEach(e=>{"["===e[0]?(t.push(...s.sort(),e),s=[]):s.push(e)}),t.push(...s.sort()),t},t_=e=>({cache:ty(e.cacheSize),parseClassName:tb(e),...tc(e)}),tw=/\s+/,tj=(e,t)=>{let{parseClassName:s,getClassGroupId:i,getConflictingClassGroupIds:n}=t,r=[],a=e.trim().split(tw),o="";for(let e=a.length-1;e>=0;e-=1){let t=a[e],{modifiers:l,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:h}=s(t),d=!!h,p=i(d?u.substring(0,h):u);if(!p){if(!d||!(p=i(u))){o=t+(o.length>0?" "+o:o);continue}d=!1}let m=tv(l).join(":"),f=c?m+"!":m,x=f+p;if(r.includes(x))continue;r.push(x);let g=n(p,d);for(let e=0;e<g.length;++e){let t=g[e];r.push(f+t)}o=t+(o.length>0?" "+o:o)}return o};function tT(){let e,t,s=0,i="";for(;s<arguments.length;)(e=arguments[s++])&&(t=tN(e))&&(i&&(i+=" "),i+=t);return i}let tN=e=>{let t;if("string"==typeof e)return e;let s="";for(let i=0;i<e.length;i++)e[i]&&(t=tN(e[i]))&&(s&&(s+=" "),s+=t);return s},tC=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},tk=/^\[(?:([a-z-]+):)?(.+)\]$/i,tS=/^\d+\/\d+$/,tA=new Set(["px","full","screen"]),tE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tI=e=>tq(e)||tA.has(e)||tS.test(e),tP=e=>tY(e,"length",tX),tq=e=>!!e&&!Number.isNaN(Number(e)),tF=e=>tY(e,"number",tq),tV=e=>!!e&&Number.isInteger(Number(e)),tz=e=>e.endsWith("%")&&tq(e.slice(0,-1)),tL=e=>tk.test(e),tB=e=>tE.test(e),tW=new Set(["length","size","percentage"]),tZ=e=>tY(e,tW,tJ),tH=e=>tY(e,"position",tJ),tG=new Set(["image","url"]),tU=e=>tY(e,tG,t0),t$=e=>tY(e,"",tK),tQ=()=>!0,tY=(e,t,s)=>{let i=tk.exec(e);return!!i&&(i[1]?"string"==typeof t?i[1]===t:t.has(i[1]):s(i[2]))},tX=e=>tM.test(e)&&!tO.test(e),tJ=()=>!1,tK=e=>tD.test(e),t0=e=>tR.test(e);Symbol.toStringTag;let t1=function(e,...t){let s,i,n;let r=function(o){return i=(s=t_(t.reduce((e,t)=>t(e),e()))).cache.get,n=s.cache.set,r=a,a(o)};function a(e){let t=i(e);if(t)return t;let r=tj(e,s);return n(e,r),r}return function(){return r(tT.apply(null,arguments))}}(()=>{let e=tC("colors"),t=tC("spacing"),s=tC("blur"),i=tC("brightness"),n=tC("borderColor"),r=tC("borderRadius"),a=tC("borderSpacing"),o=tC("borderWidth"),l=tC("contrast"),c=tC("grayscale"),u=tC("hueRotate"),h=tC("invert"),d=tC("gap"),p=tC("gradientColorStops"),m=tC("gradientColorStopPositions"),f=tC("inset"),x=tC("margin"),g=tC("opacity"),y=tC("padding"),b=tC("saturate"),v=tC("scale"),w=tC("sepia"),j=tC("skew"),T=tC("space"),N=tC("translate"),C=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto",tL,t],A=()=>[tL,t],E=()=>["",tI,tP],M=()=>["auto",tq,tL],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],P=()=>["","0",tL],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[tq,tL];return{cacheSize:500,separator:":",theme:{colors:[tQ],spacing:[tI,tP],blur:["none","",tB,tL],brightness:F(),borderColor:[e],borderRadius:["none","","full",tB,tL],borderSpacing:A(),borderWidth:E(),contrast:F(),grayscale:P(),hueRotate:F(),invert:P(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[tz,tP],inset:S(),margin:S(),opacity:F(),padding:A(),saturate:F(),scale:F(),sepia:P(),skew:F(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",tL]}],container:["container"],columns:[{columns:[tB]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),tL]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tV,tL]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tL]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",tV,tL]}],"grid-cols":[{"grid-cols":[tQ]}],"col-start-end":[{col:["auto",{span:["full",tV,tL]},tL]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[tQ]}],"row-start-end":[{row:["auto",{span:[tV,tL]},tL]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tL]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tL]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tL,t]}],"min-w":[{"min-w":[tL,t,"min","max","fit"]}],"max-w":[{"max-w":[tL,t,"none","full","min","max","fit","prose",{screen:[tB]},tB]}],h:[{h:[tL,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tL,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tL,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tL,t,"auto","min","max","fit"]}],"font-size":[{text:["base",tB,tP]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tF]}],"font-family":[{font:[tQ]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tL]}],"line-clamp":[{"line-clamp":["none",tq,tF]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",tI,tL]}],"list-image":[{"list-image":["none",tL]}],"list-style-type":[{list:["none","disc","decimal",tL]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",tI,tP]}],"underline-offset":[{"underline-offset":["auto",tI,tL]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tL]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tL]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),tH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",tZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tU]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:D()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[tI,tL]}],"outline-w":[{outline:[tI,tP]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[tI,tP]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",tB,t$]}],"shadow-color":[{shadow:[tQ]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",tB,tL]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tL]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",tL]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",tL]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[tV,tL]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tL]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tL]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tL]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[tI,tP,tF]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function t2(...e){return t1(function(){for(var e,t,s=0,i="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=function e(t){var s,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(i=e(t[s]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i)}return n}(e))&&(i&&(i+=" "),i+=t);return i}(e))}function t4(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}let t5=[{id:"dispensary",label:"Dispensary",icon:tn},{id:"discover",label:"Discover",icon:tr},{id:"journal",label:"Journal",icon:ta},{id:"builder",label:"Builder",icon:to},{id:"premium",label:"Premium",icon:tl}];function t3(){let{activeTab:e,setActiveTab:t,isPremium:s}=tt();return eK.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 pb-safe",children:eK.jsx("div",{className:"mx-4 mb-4",children:eK.jsx("div",{className:"glass rounded-2xl p-2 flex items-center justify-around",children:t5.map(i=>{let n=e===i.id,r=i.icon;return(0,eK.jsxs)(ts.E.button,{onClick:()=>t(i.id),whileTap:{scale:.95},className:t2("relative flex flex-col items-center gap-1 px-4 py-2 rounded-xl transition-all",n?"text-white":"text-white/50 hover:text-white/70"),children:[n&&eK.jsx(ts.E.div,{layoutId:"navIndicator",className:"absolute inset-0 bg-gradient-to-r from-neuro-purple/30 to-neuro-magenta/30 rounded-xl",transition:{type:"spring",bounce:.2,duration:.6}}),eK.jsx(r,{className:t2("w-5 h-5 relative z-10","premium"===i.id&&s&&"text-amber-400")}),eK.jsx("span",{className:"text-xs font-medium relative z-10",children:i.label}),"premium"===i.id&&s&&eK.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-amber-400 rounded-full"})]},i.id)})})})})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t6=(0,ti.Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),t8=(0,ti.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var t9=s(1572);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t7=(0,ti.Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),se=[{icon:t6,text:"\uD83C\uDF89 LAUNCH SPECIAL: 420 FREE DOSES PER EXPERIENCE"},{icon:t8,text:"⏰ LIMITED TIME PROMO - GRAB YOURS BEFORE THEY RUN OUT"},{icon:t9.Z,text:"✨ EARLY ADOPTERS GET EXCLUSIVE ACCESS"},{icon:t7,text:"\uD83E\uDDE0 UNLOCK YOUR MIND WITH BINAURAL BEATS"}];function st(){return eK.jsx("div",{className:"relative overflow-hidden bg-gradient-to-r from-neuro-purple/20 via-neuro-magenta/20 to-neuro-purple/20 border-b border-white/10",children:eK.jsx(ts.E.div,{animate:{x:["0%","-50%"]},transition:{duration:30,repeat:1/0,ease:"linear"},className:"flex items-center gap-8 py-2 whitespace-nowrap",children:[...se,...se,...se,...se].map((e,t)=>(0,eK.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[eK.jsx("span",{className:"text-white/90",children:e.text}),eK.jsx("span",{className:"text-neuro-magenta",children:"•"})]},t))})})}var ss=s(4019),si=s(361);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let sn=(0,ti.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),sr=(0,ti.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),sa=(0,ti.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),so=(0,ti.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var sl=s(2714),sc=s(7506),su=s(4690);function sh({isOpen:e,onClose:t}){let{signIn:s,signUp:i,signInWithGoogle:n}=(0,su.a)(),[r,a]=(0,e0.useState)("signin"),[o,l]=(0,e0.useState)(""),[c,u]=(0,e0.useState)(""),[h,d]=(0,e0.useState)(""),[p,m]=(0,e0.useState)(!1),[f,x]=(0,e0.useState)(!1),[g,y]=(0,e0.useState)(""),[b,v]=(0,e0.useState)(""),w=async e=>{e.preventDefault(),x(!0),y(""),v("");try{if("signin"===r){let{error:e}=await s(o,c);e?y(e.message):(v("Signed in successfully!"),setTimeout(()=>t(),1e3))}else{let{error:e}=await i(o,c,h);e?y(e.message):v("Account created! Check your email to confirm.")}}catch(e){y(e.message||"Something went wrong")}finally{x(!1)}};return eK.jsx(e1.M,{children:e&&eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:t,children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"w-full max-w-md glass rounded-3xl p-8 border border-white/20",children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,eK.jsxs)("div",{children:[eK.jsx("h2",{className:"text-2xl font-bold text-white",children:"signin"===r?"Welcome Back":"Join the Journey"}),eK.jsx("p",{className:"text-sm text-white/60 mt-1",children:"signin"===r?"Sign in to continue your consciousness exploration":"Create an account to save your trips"})]}),eK.jsx("button",{onClick:t,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-5 h-5"})})]}),b&&(0,eK.jsxs)("div",{className:"mb-4 p-3 rounded-xl bg-green-500/20 border border-green-500/30 text-green-400 text-sm flex items-center gap-2",children:[eK.jsx(si.Z,{className:"w-4 h-4"}),b]}),g&&eK.jsx("div",{className:"mb-4 p-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 text-sm",children:g}),(0,eK.jsxs)("form",{onSubmit:w,className:"space-y-4",children:["signup"===r&&(0,eK.jsxs)("div",{className:"relative",children:[eK.jsx(sn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),eK.jsx("input",{type:"text",placeholder:"Full Name",value:h,onChange:e=>d(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 transition-colors"})]}),(0,eK.jsxs)("div",{className:"relative",children:[eK.jsx(sr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),eK.jsx("input",{type:"email",placeholder:"Email Address",value:o,onChange:e=>l(e.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 transition-colors"})]}),(0,eK.jsxs)("div",{className:"relative",children:[eK.jsx(sa,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),eK.jsx("input",{type:p?"text":"password",placeholder:"Password",value:c,onChange:e=>u(e.target.value),required:!0,className:"w-full pl-12 pr-12 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 transition-colors"}),eK.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/60",children:p?eK.jsx(so,{className:"w-5 h-5"}):eK.jsx(sl.Z,{className:"w-5 h-5"})})]}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:f,className:"w-full py-4 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-semibold disabled:opacity-50 flex items-center justify-center gap-2",children:f?(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(sc.Z,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):"signin"===r?"Sign In":"Create Account"})]}),(0,eK.jsxs)("p",{className:"text-center text-sm text-white/60 mt-6",children:["signin"===r?"Don't have an account? ":"Already have an account? ",eK.jsx("button",{onClick:()=>a("signin"===r?"signup":"signin"),className:"text-neuro-purple hover:text-neuro-magenta transition-colors font-medium",children:"signin"===r?"Sign Up":"Sign In"})]})]})})})}var sd=s(9730);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let sp=(0,ti.Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var sm=s(9436);let sf=["Based on your goal of **deep focus**, I recommend trying **Adderall Focus** or **Caffeine Clarity**. Both use beta wave entrainment to enhance concentration. Would you like to start a session?","For **creativity and flow**, try **LSD Microdose** or **Cannabis Chill**. These use theta waves to unlock divergent thinking. Want me to queue one up?","Sounds like you need some **relaxation**! I'd suggest **Meditation Pure** for gentle mindfulness, or **Ambien Dream** for deeper sedation. What intensity level works for you?","For a **spiritual journey**, our most powerful experiences are **DMT Breakthrough** and **Ayahuasca Vision**. These are intense - make sure you're in a safe, comfortable space. Ready to explore?","I can see you want better **sleep**. Try **Ambien Dream** with delta wave frequencies, or our gentle **Meditation Pure** session. Shall I set up a 30-minute wind-down?","Great choice! Based on your past sessions, I notice you respond well to **fractal visuals** with **theta frequencies**. Want me to create a custom session with these preferences?"];function sx(){let[e,t]=(0,e0.useState)(!1),[s,i]=(0,e0.useState)([{id:"1",role:"assistant",content:"Hey! I'm your AI Trip Curator \uD83E\uDDE0✨ Tell me what you're looking for today - focus, creativity, relaxation, sleep, or something spiritual? I'll find the perfect dose for you.",timestamp:new Date}]),[n,r]=(0,e0.useState)(""),[a,o]=(0,e0.useState)(!1),l=(0,e0.useRef)(null),c=async()=>{if(!n.trim())return;let e={id:Date.now().toString(),role:"user",content:n,timestamp:new Date};i(t=>[...t,e]),r(""),o(!0),await new Promise(e=>setTimeout(e,1500+1e3*Math.random()));let t={id:(Date.now()+1).toString(),role:"assistant",content:sf[Math.floor(Math.random()*sf.length)],timestamp:new Date};o(!1),i(e=>[...e,t])};return(0,eK.jsxs)(eK.Fragment,{children:[(0,eK.jsxs)(ts.E.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(!e),className:"fixed bottom-24 right-4 z-40 w-14 h-14 rounded-full bg-gradient-to-r from-neuro-purple to-neuro-magenta shadow-lg shadow-neuro-purple/30 flex items-center justify-center",children:[e?eK.jsx(ss.Z,{className:"w-6 h-6 text-white"}):eK.jsx(sd.Z,{className:"w-6 h-6 text-white"}),!e&&eK.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-400 rounded-full flex items-center justify-center",children:eK.jsx(t9.Z,{className:"w-3 h-3 text-black"})})]}),eK.jsx(e1.M,{children:e&&(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-40 right-4 z-40 w-80 sm:w-96 h-[28rem] glass rounded-2xl border border-white/20 flex flex-col overflow-hidden",children:[eK.jsx("div",{className:"p-4 border-b border-white/10 bg-gradient-to-r from-neuro-purple/20 to-neuro-magenta/20",children:(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-neuro-purple to-neuro-magenta flex items-center justify-center",children:eK.jsx(sp,{className:"w-5 h-5 text-white"})}),(0,eK.jsxs)("div",{children:[eK.jsx("h3",{className:"font-semibold text-white",children:"AI Trip Curator"}),eK.jsx("p",{className:"text-xs text-white/60",children:"Powered by GPT-4 • Coming Soon"})]})]})}),(0,eK.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map(e=>(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-2 ${"user"===e.role?"flex-row-reverse":""}`,children:[eK.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${"user"===e.role?"bg-neuro-cyan/20":"bg-gradient-to-r from-neuro-purple to-neuro-magenta"}`,children:"user"===e.role?eK.jsx(sn,{className:"w-4 h-4 text-neuro-cyan"}):eK.jsx(sp,{className:"w-4 h-4 text-white"})}),eK.jsx("div",{className:`max-w-[75%] p-3 rounded-2xl text-sm ${"user"===e.role?"bg-neuro-cyan/20 text-white rounded-tr-md":"bg-white/10 text-white/90 rounded-tl-md"}`,children:eK.jsx("p",{dangerouslySetInnerHTML:{__html:e.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})})]},e.id)),a&&(0,eK.jsxs)("div",{className:"flex gap-2",children:[eK.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-neuro-purple to-neuro-magenta flex items-center justify-center",children:eK.jsx(sp,{className:"w-4 h-4 text-white"})}),eK.jsx("div",{className:"bg-white/10 p-3 rounded-2xl rounded-tl-md",children:eK.jsx(sc.Z,{className:"w-4 h-4 text-white/60 animate-spin"})})]}),eK.jsx("div",{ref:l})]}),(0,eK.jsxs)("div",{className:"p-4 border-t border-white/10",children:[(0,eK.jsxs)("div",{className:"flex gap-2",children:[eK.jsx("input",{type:"text",value:n,onChange:e=>r(e.target.value),onKeyPress:e=>"Enter"===e.key&&c(),placeholder:"Ask me anything...",className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 text-sm"}),eK.jsx(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,disabled:!n.trim()||a,className:"p-2 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white disabled:opacity-50",children:eK.jsx(sm.Z,{className:"w-5 h-5"})})]}),eK.jsx("p",{className:"text-xs text-white/30 text-center mt-2",children:"\uD83D\uDD2E Mock responses • Full GPT-4 integration coming soon"})]})]})})]})}var sg=s(3445),sy=s(2280);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let sb=(0,ti.Z)("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);var sv=s(8360);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s_=(0,ti.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),sw=(0,ti.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var sj=s(2933),sT=s(9183),sN=s(2777);let sC=[{id:1,icon:sy.Z,title:"Put On Headphones",description:'Binaural beats REQUIRE stereo headphones to work. Each ear receives a slightly different frequency, and your brain perceives the difference as the "beat".',tip:"Use over-ear headphones for best results. Earbuds work too!",color:"#8b5cf6"},{id:2,icon:sl.Z,title:"Close Your Eyes",description:"Closing your eyes helps your brain focus on the audio frequencies and enhances the visual experience behind your eyelids.",tip:"If keeping eyes open, dim the lights and focus softly on the visuals.",color:"#06b6d4"},{id:3,icon:sb,title:"Deep Breathing",description:"Take 5 deep breaths: Inhale for 4 seconds, hold for 4 seconds, exhale for 6 seconds. This activates your parasympathetic nervous system.",tip:"Continue slow breathing throughout the session.",color:"#22c55e"},{id:4,icon:sv.Z,title:"Relax & Surrender",description:"Don't try to force the experience. Let go of expectations. The effects are subtle at first but build over 5-10 minutes.",tip:"Set an intention before starting. What do you want from this session?",color:"#ec4899"},{id:5,icon:t9.Z,title:"Give It Time",description:"Binaural beats need 10-15 minutes to entrain your brainwaves. The longer you listen, the deeper the effect.",tip:"Try a full 30-minute session for best results!",color:"#f59e0b"}];function sk({variant:e="floating"}){let{user:t}=(0,su.a)(),[s,i]=(0,e0.useState)(!1),[n,r]=(0,e0.useState)(0),[a,o]=(0,e0.useState)(!1),[l,c]=(0,e0.useState)(""),[u,h]=(0,e0.useState)(""),[d,p]=(0,e0.useState)(!1),[m,f]=(0,e0.useState)(!1),x=async()=>{if(!u.trim())return;p(!0);let e=l||t?.email||"anonymous@neuronirvana.app",s=await (0,sN.B8)(t?.id||null,e,u,"help_guide");p(!1),s&&(f(!0),setTimeout(()=>{o(!1),f(!1),h(""),c("")},2e3))},g=sC[n],y=g.icon;return(0,eK.jsxs)(eK.Fragment,{children:["floating"===e?(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(!0),className:"fixed bottom-24 left-4 z-40 px-4 py-2 rounded-full bg-amber-500/20 border border-amber-500/30 text-amber-400 text-sm font-medium flex items-center gap-2 hover:bg-amber-500/30 transition-colors",children:[eK.jsx(s_,{className:"w-4 h-4"}),"Can't feel the effect?"]}):(0,eK.jsxs)("button",{onClick:()=>i(!0),className:"text-amber-400 text-sm flex items-center gap-1 hover:text-amber-300",children:[eK.jsx(s_,{className:"w-4 h-4"}),"Need help?"]}),eK.jsx(e1.M,{children:s&&eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",onClick:()=>i(!1),children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"w-full max-w-md glass rounded-3xl overflow-hidden border border-white/20",children:[eK.jsx("div",{className:"h-1 bg-white/10",children:eK.jsx(ts.E.div,{className:"h-full bg-gradient-to-r from-neuro-purple to-neuro-magenta",initial:{width:0},animate:{width:`${(n+1)/sC.length*100}%`}})}),(0,eK.jsxs)("div",{className:"p-6",children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,eK.jsxs)("span",{className:"text-sm text-white/40",children:["Step ",n+1," of ",sC.length]}),eK.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-5 h-5"})})]}),eK.jsx(e1.M,{mode:"wait",children:(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"text-center",children:[eK.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6",style:{backgroundColor:`${g.color}20`},children:eK.jsx(y,{className:"w-10 h-10",style:{color:g.color}})}),eK.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:g.title}),eK.jsx("p",{className:"text-white/70 mb-4 leading-relaxed",children:g.description}),eK.jsx("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:(0,eK.jsxs)("p",{className:"text-sm text-white/60",children:["\uD83D\uDCA1 ",eK.jsx("span",{className:"text-white/80",children:g.tip})]})})]},n)}),(0,eK.jsxs)("div",{className:"flex items-center justify-between mt-8",children:[(0,eK.jsxs)("button",{onClick:()=>{n>0&&r(n-1)},disabled:0===n,className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-white/10 text-white disabled:opacity-30 disabled:cursor-not-allowed hover:bg-white/20 transition-colors",children:[eK.jsx(sw,{className:"w-4 h-4"}),"Back"]}),eK.jsx("div",{className:"flex gap-1",children:sC.map((e,t)=>eK.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${t===n?"bg-neuro-purple":"bg-white/20"}`},t))}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n<sC.length-1?r(n+1):(i(!1),r(0))},className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-medium",children:n===sC.length-1?(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(sj.Z,{className:"w-4 h-4"}),"Got it!"]}):(0,eK.jsxs)(eK.Fragment,{children:["Next",eK.jsx(sT.Z,{className:"w-4 h-4"})]})})]}),eK.jsx("div",{className:"mt-6 pt-4 border-t border-white/10",children:a?eK.jsx(ts.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-3",children:m?(0,eK.jsxs)("div",{className:"text-center py-4",children:[eK.jsx(sj.Z,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),eK.jsx("p",{className:"text-green-400 font-medium",children:"Message sent!"}),eK.jsx("p",{className:"text-white/50 text-sm",children:"We'll get back to you soon."})]}):(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx("p",{className:"text-sm text-white/60 text-center",children:"Describe your issue and we'll help you out"}),!t&&eK.jsx("input",{type:"email",value:l,onChange:e=>c(e.target.value),placeholder:"Your email",className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-white text-sm placeholder-white/40 focus:outline-none focus:border-neuro-purple/50"}),eK.jsx("textarea",{value:u,onChange:e=>h(e.target.value),placeholder:"What's not working?",rows:3,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-white text-sm placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 resize-none"}),(0,eK.jsxs)("div",{className:"flex gap-2",children:[eK.jsx("button",{onClick:()=>o(!1),className:"flex-1 py-2 rounded-xl bg-white/10 text-white text-sm hover:bg-white/20 transition-colors",children:"Cancel"}),eK.jsx("button",{onClick:x,disabled:d||!u.trim(),className:"flex-1 py-2 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white text-sm font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:d?eK.jsx(sc.Z,{className:"w-4 h-4 animate-spin"}):(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(sm.Z,{className:"w-4 h-4"}),"Send"]})})]})]})}):(0,eK.jsxs)("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-center gap-2 text-sm text-white/50 hover:text-white/80 transition-colors",children:[eK.jsx(sd.Z,{className:"w-4 h-4"}),"Still having problems? Write to us"]})})]})]})})})]})}function sS({onConfirm:e,showOnMount:t=!1}){let[s,i]=(0,e0.useState)(!1),[n,r]=(0,e0.useState)(!1);return n&&!s?null:eK.jsx(e1.M,{children:s&&eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"w-full max-w-sm glass rounded-3xl p-6 border border-white/20 text-center",children:[eK.jsx(ts.E.div,{animate:{scale:[1,1.1,1],rotate:[0,-5,5,0]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"w-24 h-24 rounded-full bg-gradient-to-r from-neuro-purple/20 to-neuro-magenta/20 flex items-center justify-center mx-auto mb-6",children:eK.jsx(sy.Z,{className:"w-12 h-12 text-neuro-purple"})}),eK.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"\uD83C\uDFA7 Connect Headphones"}),(0,eK.jsxs)("p",{className:"text-white/70 mb-6",children:["For the ",eK.jsx("span",{className:"text-neuro-cyan font-semibold",children:"best experience"}),", please use stereo headphones. Binaural beats require different frequencies in each ear to work properly."]}),eK.jsx("div",{className:"flex items-center justify-center gap-1 mb-6",children:[...Array(7)].map((e,t)=>eK.jsx(ts.E.div,{className:"w-1 bg-gradient-to-t from-neuro-purple to-neuro-magenta rounded-full",animate:{height:[8,24,8]},transition:{duration:.8,repeat:1/0,delay:.1*t}},t))}),(0,eK.jsxs)("div",{className:"space-y-3",children:[(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{sessionStorage.setItem("headphones-confirmed","true"),r(!0),i(!1),e?.()},className:"w-full py-4 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-semibold flex items-center justify-center gap-2",children:[eK.jsx(sj.Z,{className:"w-5 h-5"}),"I'm wearing headphones"]}),eK.jsx("button",{onClick:()=>{i(!1)},className:"w-full py-3 rounded-xl bg-white/5 text-white/60 hover:text-white hover:bg-white/10 transition-colors text-sm",children:"Continue without (not recommended)"})]}),eK.jsx("p",{className:"mt-4 text-xs text-amber-400/80",children:"⚠️ Speakers won't produce the binaural effect"})]})})})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let sA=(0,ti.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),sE=(0,ti.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),sM=(0,ti.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function sO({onOpenAuth:e}){let{user:t,profile:s,signOut:i,loading:n}=(0,su.a)(),{isPremium:r,setActiveTab:a}=tt(),[o,l]=(0,e0.useState)(!1),[c,u]=(0,e0.useState)(!1),[h,d]=(0,e0.useState)(!1),p=o||h;if(n)return eK.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 animate-pulse"});if(!t)return eK.jsx(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"px-4 py-2 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white text-sm font-medium",children:"Sign In"});let m=async()=>{u(!0),l(!1),await i(),u(!1)};return(0,eK.jsxs)("div",{className:"relative",children:[(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(!o),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:"flex items-center gap-2 p-1.5 rounded-full bg-white/10 hover:bg-white/15 transition-all duration-300",style:{paddingRight:p?"12px":"6px",borderRadius:p?"12px":"50%"},children:[eK.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-r from-neuro-purple to-neuro-magenta flex items-center justify-center flex-shrink-0",children:s?.avatar_url?eK.jsx("img",{src:s.avatar_url,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):eK.jsx(sn,{className:"w-5 h-5 text-white"})}),eK.jsx(e1.M,{children:p&&(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"flex items-center gap-1.5 overflow-hidden",children:[eK.jsx("span",{className:"text-sm text-white max-w-[100px] truncate whitespace-nowrap",children:s?.full_name||t.email?.split("@")[0]}),(r||s?.is_premium)&&eK.jsx(tl,{className:"w-4 h-4 text-amber-400 flex-shrink-0"}),eK.jsx(sA,{className:`w-4 h-4 text-white/60 transition-transform flex-shrink-0 ${o?"rotate-180":""}`})]})})]}),eK.jsx(e1.M,{children:o&&(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 top-full mt-2 w-56 glass rounded-xl border border-white/20 overflow-hidden z-50",children:[(0,eK.jsxs)("div",{className:"p-4 border-b border-white/10",children:[eK.jsx("p",{className:"text-sm font-medium text-white truncate",children:s?.full_name||"User"}),eK.jsx("p",{className:"text-xs text-white/50 truncate",children:t.email}),(r||s?.is_premium)&&(0,eK.jsxs)("div",{className:"mt-2 flex items-center gap-1 text-xs text-amber-400",children:[eK.jsx(tl,{className:"w-3 h-3"}),s?.premium_tier||"Premium"," Member"]})]}),(0,eK.jsxs)("div",{className:"p-2",children:[(0,eK.jsxs)("button",{onClick:()=>{l(!1),a("premium")},className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-white/70 hover:text-white hover:bg-white/10 transition-colors text-sm",children:[eK.jsx(sE,{className:"w-4 h-4"}),"Settings"]}),(0,eK.jsxs)("button",{onClick:m,disabled:c,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-red-400 hover:text-red-300 hover:bg-red-500/10 transition-colors text-sm disabled:opacity-50",children:[c?eK.jsx(sc.Z,{className:"w-4 h-4 animate-spin"}):eK.jsx(sM,{className:"w-4 h-4"}),c?"Signing out...":"Sign Out"]})]})]})]})})]})}function sD(){let{user:e,profile:t}=(0,su.a)(),{isPremium:s}=tt(),[i,n]=(0,e0.useState)(""),[r,a]=(0,e0.useState)(!1),[o,l]=(0,e0.useState)(!1);return!e||s||t?.is_premium?null:o?eK.jsx(ts.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"fixed top-16 left-1/2 -translate-x-1/2 z-40 px-4 py-2 rounded-full bg-gradient-to-r from-red-500/20 to-orange-500/20 border border-red-500/30 backdrop-blur-sm",children:(0,eK.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[eK.jsx(tl,{className:"w-4 h-4 text-red-400"}),eK.jsx("span",{className:"text-red-400 font-medium",children:"Trial expired"}),eK.jsx("span",{className:"text-white/60",children:"•"}),eK.jsx("span",{className:"text-white/80",children:"Upgrade to unlock premium drugs"})]})}):r?eK.jsx(ts.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"fixed top-16 left-1/2 -translate-x-1/2 z-40 px-4 py-2 rounded-full bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30 backdrop-blur-sm",children:(0,eK.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[eK.jsx(t9.Z,{className:"w-4 h-4 text-amber-400"}),eK.jsx("span",{className:"text-amber-400 font-medium",children:"Premium Trial"}),eK.jsx("span",{className:"text-white/60",children:"•"}),eK.jsx(t8,{className:"w-3.5 h-3.5 text-white/60"}),eK.jsx("span",{className:"text-white/80",children:i})]})}):null}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let sR=(0,ti.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);var sI=s(4893);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let sP=(0,ti.Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),sq=(0,ti.Z)("Vibrate",[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]]),sF="15.1.22",sV=(e,t,s)=>({endTime:t,insertTime:s,type:"exponentialRampToValue",value:e}),sz=(e,t,s)=>({endTime:t,insertTime:s,type:"linearRampToValue",value:e}),sL=(e,t)=>({startTime:t,type:"setValue",value:e}),sB=(e,t,s)=>({duration:s,startTime:t,type:"setValueCurve",values:e}),sW=(e,t,{startTime:s,target:i,timeConstant:n})=>i+(t-i)*Math.exp((s-e)/n),sZ=e=>"exponentialRampToValue"===e.type,sH=e=>"linearRampToValue"===e.type,sG=e=>sZ(e)||sH(e),sU=e=>"setValue"===e.type,s$=e=>"setValueCurve"===e.type,sQ=(e,t,s,i)=>{let n=e[t];return void 0===n?i:sG(n)||sU(n)?n.value:s$(n)?n.values[n.values.length-1]:sW(s,sQ(e,t-1,n.startTime,i),n)},sY=(e,t,s,i,n)=>void 0===s?[i.insertTime,n]:sG(s)?[s.endTime,s.value]:sU(s)?[s.startTime,s.value]:s$(s)?[s.startTime+s.duration,s.values[s.values.length-1]]:[s.startTime,sQ(e,t-1,s.startTime,n)],sX=e=>"cancelAndHold"===e.type,sJ=e=>"cancelScheduledValues"===e.type,sK=e=>sX(e)||sJ(e)?e.cancelTime:sZ(e)||sH(e)?e.endTime:e.startTime,s0=(e,t,s,{endTime:i,value:n})=>s===n?n:0<s&&0<n||s<0&&n<0?s*(n/s)**((e-t)/(i-t)):0,s1=(e,t,s,{endTime:i,value:n})=>s+(e-t)/(i-t)*(n-s),s2=(e,t)=>{let s=Math.floor(t),i=Math.ceil(t);return s===i?e[s]:(1-(t-s))*e[s]+(1-(i-t))*e[i]},s4=(e,{duration:t,startTime:s,values:i})=>{let n=(e-s)/t*(i.length-1);return s2(i,n)},s5=e=>"setTarget"===e.type;class s3{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){let t=sK(e);if(sX(e)||sJ(e)){let s=this._automationEvents.findIndex(s=>sJ(e)&&s$(s)?s.startTime+s.duration>=t:sK(s)>=t),i=this._automationEvents[s];if(-1!==s&&(this._automationEvents=this._automationEvents.slice(0,s)),sX(e)){let e=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&sG(i)){if(void 0!==e&&s5(e))throw Error("The internal list is malformed.");let s=void 0===e?i.insertTime:s$(e)?e.startTime+e.duration:sK(e),n=void 0===e?this._defaultValue:s$(e)?e.values[e.values.length-1]:e.value,r=sZ(i)?s0(t,s,n,i):s1(t,s,n,i),a=sZ(i)?sV(r,t,this._currenTime):sz(r,t,this._currenTime);this._automationEvents.push(a)}if(void 0!==e&&s5(e)&&this._automationEvents.push(sL(this.getValue(t),t)),void 0!==e&&s$(e)&&e.startTime+e.duration>t){let s=t-e.startTime,i=(e.values.length-1)/e.duration,n=Math.max(2,1+Math.ceil(s*i)),r=s/(n-1)*i,a=e.values.slice(0,n);if(r<1)for(let t=1;t<n;t+=1){let s=r*t%1;a[t]=e.values[t-1]*(1-s)+e.values[t]*s}this._automationEvents[this._automationEvents.length-1]=sB(a,e.startTime,s)}}}else{let s=this._automationEvents.findIndex(e=>sK(e)>t),i=-1===s?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(void 0!==i&&s$(i)&&sK(i)+i.duration>t)return!1;let n=sZ(e)?sV(e.value,e.endTime,this._currenTime):sH(e)?sz(e.value,t,this._currenTime):e;if(-1===s)this._automationEvents.push(n);else{if(s$(e)&&t+e.duration>sK(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,n)}}return!0}flush(e){let t=this._automationEvents.findIndex(t=>sK(t)>e);if(t>1){let e=this._automationEvents.slice(t-1),s=e[0];s5(s)&&e.unshift(sL(sQ(this._automationEvents,t-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=e}}getValue(e){if(0===this._automationEvents.length)return this._defaultValue;let t=this._automationEvents.findIndex(t=>sK(t)>e),s=this._automationEvents[t],i=(-1===t?this._automationEvents.length:t)-1,n=this._automationEvents[i];if(void 0!==n&&s5(n)&&(void 0===s||!sG(s)||s.insertTime>e))return sW(e,sQ(this._automationEvents,i-1,n.startTime,this._defaultValue),n);if(void 0!==n&&sU(n)&&(void 0===s||!sG(s)))return n.value;if(void 0!==n&&s$(n)&&(void 0===s||!sG(s)||n.startTime+n.duration>e))return e<n.startTime+n.duration?s4(e,n):n.values[n.values.length-1];if(void 0!==n&&sG(n)&&(void 0===s||!sG(s)))return n.value;if(void 0!==s&&sZ(s)){let[t,r]=sY(this._automationEvents,i,n,s,this._defaultValue);return s0(e,t,r,s)}if(void 0!==s&&sH(s)){let[t,r]=sY(this._automationEvents,i,n,s,this._defaultValue);return s1(e,t,r,s)}return this._defaultValue}}let s6=new WeakSet,s8=new WeakMap,s9=new WeakMap,s7=new WeakMap,ie=new WeakMap,it=new WeakMap,is=new WeakMap,ii=new WeakMap,ir=new WeakMap,ia=new WeakMap,io={construct:()=>io},il=e=>{try{new new Proxy(e,io)}catch{return!1}return!0},ic=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,iu=(e,t)=>{let s=[],i=e.replace(/^[\s]+/,""),n=i.match(ic);for(;null!==n;){let e=n[1].slice(1,-1),r=n[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());s.push(r),n=(i=i.slice(n[0].length).replace(/^[\s]+/,"")).match(ic)}return[s.join(";"),i]},ih=e=>{if(void 0!==e&&!Array.isArray(e))throw TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},id=e=>{if(!il(e))throw TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw TypeError("The given value for processorCtor should have a prototype.")},ip=(e,t)=>{let s=e.get(t);if(void 0===s)throw Error("A value with the given key could not be found.");return s},im=(e,t)=>{let s=Array.from(e).filter(t);if(s.length>1)throw Error("More than one element was found.");if(0===s.length)throw Error("No element was found.");let[i]=s;return e.delete(i),i},ix=(e,t,s,i)=>{let n=ip(e,t),r=im(n,e=>e[0]===s&&e[1]===i);return 0===n.size&&e.delete(t),r},ig=e=>ip(is,e),iy=e=>{if(s6.has(e))throw Error("The AudioNode is already stored.");s6.add(e),ig(e).forEach(e=>e(!0))},ib=e=>"port"in e,iv=e=>{if(!s6.has(e))throw Error("The AudioNode is not stored.");s6.delete(e),ig(e).forEach(e=>e(!1))},i_=(e,t)=>{!ib(e)&&t.every(e=>0===e.size)&&iv(e)},iw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ij=(e,t)=>e.context===t,iT=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},iN=()=>new DOMException("","IndexSizeError"),iC=e=>{let t;e.getChannelData=(t=e.getChannelData,s=>{try{return t.call(e,s)}catch(e){if(12===e.code)throw iN();throw e}})},ik={numberOfChannels:1},iS=e=>s6.has(e),iA={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},iE=e=>"playbackRate"in e,iM=e=>"frequency"in e&&"gain"in e,iO=e=>"offset"in e,iD=e=>!("frequency"in e)&&"gain"in e,iR=e=>"detune"in e&&"frequency"in e&&!("gain"in e),iI=e=>"pan"in e,iP=e=>ip(s8,e),iq=e=>ip(s7,e),iF=(e,t)=>{let{activeInputs:s}=iP(e);for(let i of(s.forEach(s=>s.forEach(([s])=>{t.includes(e)||iF(s,[...t,e])})),iE(e)?[e.playbackRate]:ib(e)?Array.from(e.parameters.values()):iM(e)?[e.Q,e.detune,e.frequency,e.gain]:iO(e)?[e.offset]:iD(e)?[e.gain]:iR(e)?[e.detune,e.frequency]:iI(e)?[e.pan]:[])){let e=iq(i);void 0!==e&&e.activeInputs.forEach(([e])=>iF(e,t))}iS(e)&&iv(e)},iV=e=>{iF(e.destination,[])},iz=e=>void 0===e||"number"==typeof e||"string"==typeof e&&("balanced"===e||"interactive"===e||"playback"===e),iL=e=>"context"in e,iB=e=>iL(e[0]),iW=(e,t,s,i)=>{for(let t of e)if(s(t)){if(i)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},iZ=(e,t,[s,i],n)=>{iW(e,[t,s,i],e=>e[0]===t&&e[1]===s,n)},iH=(e,[t,s,i],n)=>{let r=e.get(t);void 0===r?e.set(t,new Set([[s,i]])):iW(r,[s,i],e=>e[0]===s,n)},iG=e=>"inputs"in e,iU=(e,t,s,i)=>{if(iG(t)){let n=t.inputs[i];return e.connect(n,s,0),[n,s,0]}return e.connect(t,s,i),[t,s,i]},i$=(e,t,s)=>{for(let i of e)if(i[0]===t&&i[1]===s)return e.delete(i),i;return null},iQ=(e,t,s)=>im(e,e=>e[0]===t&&e[1]===s),iY=(e,t)=>{if(!ig(e).delete(t))throw Error("Missing the expected event listener.")},iX=(e,t,s)=>{let i=ip(e,t),n=im(i,e=>e[0]===s);return 0===i.size&&e.delete(t),n},iJ=(e,t,s,i)=>{iG(t)?e.disconnect(t.inputs[i],s,0):e.disconnect(t,s,i)},iK=e=>ip(s9,e),i0=e=>ip(ie,e),i1=e=>ii.has(e),i2=e=>!s6.has(e),i4=(e,t)=>new Promise(s=>{if(null!==t)s(!0);else{let t=e.createScriptProcessor(256,1,1),i=e.createGain(),n=e.createBuffer(1,2,44100),r=n.getChannelData(0);r[0]=1,r[1]=1;let a=e.createBufferSource();a.buffer=n,a.loop=!0,a.connect(t).connect(e.destination),a.connect(i),a.disconnect(i),t.onaudioprocess=i=>{let n=i.inputBuffer.getChannelData(0);Array.prototype.some.call(n,e=>1===e)?s(!0):s(!1),a.stop(),t.onaudioprocess=null,a.disconnect(t),t.disconnect(e.destination)},a.start()}}),i5=(e,t)=>{let s=new Map;for(let t of e)for(let e of t){let t=s.get(e);s.set(e,void 0===t?1:t+1)}s.forEach((e,s)=>t(s,e))},i3=e=>"context"in e,i6=e=>{let t,s;let i=new Map;e.connect=(t=e.connect.bind(e),(e,s=0,n=0)=>{let r=i3(e)?t(e,s,n):t(e,s),a=i.get(e);return void 0===a?i.set(e,[{input:n,output:s}]):a.every(e=>e.input!==n||e.output!==s)&&a.push({input:n,output:s}),r}),e.disconnect=(s=e.disconnect,(t,n,r)=>{if(s.apply(e),void 0===t)i.clear();else if("number"==typeof t)for(let[e,s]of i){let n=s.filter(e=>e.output!==t);0===n.length?i.delete(e):i.set(e,n)}else if(i.has(t)){if(void 0===n)i.delete(t);else{let e=i.get(t);if(void 0!==e){let s=e.filter(e=>e.output!==n&&(e.input!==r||void 0===r));0===s.length?i.delete(t):i.set(t,s)}}}for(let[t,s]of i)s.forEach(s=>{i3(t)?e.connect(t,s.output,s.input):e.connect(t,s.output)})})},i8=(e,t,s,i)=>{let{activeInputs:n,passiveInputs:r}=iq(t),{outputs:a}=iP(e),o=ig(e),l=a=>{let o=iK(e),l=i0(t);if(a){let t=iX(r,e,s);iZ(n,e,t,!1),i||i1(e)||o.connect(l,s)}else iH(r,iQ(n,e,s),!1),i||i1(e)||o.disconnect(l,s)};return!!iW(a,[t,s],e=>e[0]===t&&e[1]===s,!0)&&(o.add(l),iS(e)?iZ(n,e,[s,l],!0):iH(r,[e,s,l],!0),!0)},i9=(e,t,s,i)=>{let{activeInputs:n,passiveInputs:r}=iP(t),a=i$(n[i],e,s);return null===a?[ix(r,e,s,i)[2],!1]:[a[2],!0]},i7=(e,t,s)=>{let{activeInputs:i,passiveInputs:n}=iq(t),r=i$(i,e,s);return null===r?[iX(n,e,s)[1],!1]:[r[2],!0]},ne=(e,t,s,i,n)=>{let[r,a]=i9(e,s,i,n);if(null===r||(iY(e,r),!a||t||i1(e)||iJ(iK(e),iK(s),i,n)),iS(s)){let{activeInputs:e}=iP(s);i_(s,e)}},nt=(e,t,s,i)=>{let[n,r]=i7(e,s,i);null===n||(iY(e,n),!r||t||i1(e)||iK(e).disconnect(i0(s),i))},ns=(e,t)=>{let s=iP(e),i=[];for(let n of s.outputs)iB(n)?ne(e,t,...n):nt(e,t,...n),i.push(n[0]);return s.outputs.clear(),i},ni=(e,t,s)=>{let i=iP(e),n=[];for(let r of i.outputs)r[1]===s&&(iB(r)?ne(e,t,...r):nt(e,t,...r),n.push(r[0]),i.outputs.delete(r));return n},nn=(e,t,s,i,n)=>{let r=iP(e);return Array.from(r.outputs).filter(e=>e[0]===s&&(void 0===i||e[1]===i)&&(void 0===n||e[2]===n)).map(s=>(iB(s)?ne(e,t,...s):nt(e,t,...s),r.outputs.delete(s),s[0]))};class nr{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,i)=>e.call(t,s,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}let na={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function no(e,t,s,i,n){if("function"==typeof e.copyFromChannel)0===t[s].byteLength&&(t[s]=new Float32Array(128)),e.copyFromChannel(t[s],i,n);else{let r=e.getChannelData(i);if(0===t[s].byteLength)t[s]=r.slice(n,n+128);else{let e=new Float32Array(r.buffer,n*Float32Array.BYTES_PER_ELEMENT,128);t[s].set(e)}}}let nl=(e,t,s,i,n)=>{"function"==typeof e.copyToChannel?0!==t[s].byteLength&&e.copyToChannel(t[s],i,n):0!==t[s].byteLength&&e.getChannelData(i).set(t[s],n)},nc=(e,t)=>{let s=[];for(let i=0;i<e;i+=1){let e=[],n="number"==typeof t?t:t[i];for(let t=0;t<n;t+=1)e.push(new Float32Array(128));s.push(e)}return s},nu=(e,t)=>{let s=ip(ia,e);return ip(s,iK(t))},nh=async(e,t,s,i,n,r,a)=>{let o=null===t?128*Math.ceil(e.context.length/128):t.length,l=i.channelCount*i.numberOfInputs,c=n.reduce((e,t)=>e+t,0),u=0===c?null:s.createBuffer(c,o,s.sampleRate);if(void 0===r)throw Error("Missing the processor constructor.");let h=iP(e),d=await nu(s,e),p=nc(i.numberOfInputs,i.channelCount),m=nc(i.numberOfOutputs,n),f=Array.from(e.parameters.keys()).reduce((e,t)=>({...e,[t]:new Float32Array(128)}),{});for(let c=0;c<o;c+=128){if(i.numberOfInputs>0&&null!==t)for(let e=0;e<i.numberOfInputs;e+=1)for(let s=0;s<i.channelCount;s+=1)no(t,p[e],s,s,c);void 0!==r.parameterDescriptors&&null!==t&&r.parameterDescriptors.forEach(({name:e},s)=>{no(t,f,e,l+s,c)});for(let e=0;e<i.numberOfInputs;e+=1)for(let t=0;t<n[e];t+=1)0===m[e][t].byteLength&&(m[e][t]=new Float32Array(128));try{let e=p.map((e,t)=>0===h.activeInputs[t].size?[]:e),t=a(c/s.sampleRate,s.sampleRate,()=>d.process(e,m,f));if(null!==u)for(let e=0,t=0;e<i.numberOfOutputs;e+=1){for(let s=0;s<n[e];s+=1)nl(u,m[e],s,t+s,c);t+=n[e]}if(!t)break}catch(t){e.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}));break}}return u},nd={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},np={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},nm={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},nf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},nx={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ng=e=>{let{port1:t,port2:s}=new MessageChannel;return new Promise(i=>{let n=()=>{s.onmessage=null,t.close(),s.close(),i()};s.onmessage=()=>n();try{t.postMessage(e,[e])}catch{}finally{n()}})},ny={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},nb=e=>"delayTime"in e,nv=(e,t,s)=>{let i=t[s];if(void 0===i)throw e();return i},n_={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},nw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},nj=()=>new DOMException("","InvalidStateError"),nT=()=>new DOMException("","InvalidAccessError"),nN=e=>{let t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(s,i,n)=>{if(s.length!==i.length||i.length!==n.length)throw nT();return t.call(e,s,i,n)})},nC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},nk=(e,t,s,i,n,r,a,o,l,c,u)=>{let h=c.length,d=o;for(let o=0;o<h;o+=1){let h=s[0]*c[o];for(let t=1;t<n;t+=1){let i=d-t&l-1;h+=s[t]*r[i],h-=e[t]*a[i]}for(let e=n;e<i;e+=1)h+=s[e]*r[d-e&l-1];for(let s=n;s<t;s+=1)h-=e[s]*a[d-s&l-1];r[d]=c[o],a[d]=h,d=d+1&l-1,u[o]=h}return d},nS=(e,t,s,i)=>{let n=s instanceof Float64Array?s:new Float64Array(s),r=i instanceof Float64Array?i:new Float64Array(i),a=n.length,o=r.length,l=Math.min(a,o);if(1!==n[0]){for(let e=0;e<a;e+=1)r[e]/=n[0];for(let e=1;e<o;e+=1)n[e]/=n[0]}let c=new Float32Array(32),u=new Float32Array(32),h=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let t=0;t<d;t+=1){let s=e.getChannelData(t),i=h.getChannelData(t);c.fill(0),u.fill(0),nk(n,a,r,o,l,c,u,0,32,s,i)}return h},nA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},nE=e=>{let t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let s=e.decodeAudioData(t.buffer,()=>{});if(void 0===s)return!1;return s.catch(()=>{}),!0}catch{}return!1},nM=(e,t,s)=>{let i=t[s];void 0!==i&&i!==e[s]&&(e[s]=i)},nO=(e,t)=>{nM(e,t,"channelCount"),nM(e,t,"channelCountMode"),nM(e,t,"channelInterpretation")},nD=e=>"function"==typeof e.getFloatTimeDomainData,nR=e=>{e.getFloatTimeDomainData=t=>{let s=new Uint8Array(t.length);e.getByteTimeDomainData(s);let i=Math.max(s.length,e.fftSize);for(let e=0;e<i;e+=1)t[e]=(s[e]-128)*.0078125;return t}},nI=(e,t,s)=>{let i=t[s];void 0!==i&&i!==e[s].value&&(e[s].value=i)},nP=e=>{e.start=(t=>{let s=!1;return(i=0,n=0,r)=>{if(s)throw nj();t.call(e,i,n,r),s=!0}})(e.start)},nq=e=>{let t;e.start=(t=e.start,(s=0,i=0,n)=>{if("number"==typeof n&&n<0||i<0||s<0)throw RangeError("The parameters can't be negative.");t.call(e,s,i,n)})},nF=e=>{let t;e.stop=(t=e.stop,(s=0)=>{if(s<0)throw RangeError("The parameter can't be negative.");t.call(e,s)})},nV=e=>{let{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}},nz=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),nL=e=>new Promise((t,s)=>{let{port1:i,port2:n}=new MessageChannel;i.onmessage=({data:e})=>{i.close(),n.close(),t(e)},i.onmessageerror=({data:e})=>{i.close(),n.close(),s(e)},n.postMessage(e)}),nB=async(e,t)=>new e(await nL(t)),nW=(e,t,s,i)=>{let n=ia.get(e);void 0===n&&(n=new WeakMap,ia.set(e,n));let r=nB(s,i);return n.set(t,r),r},nZ=(e,t)=>{let s=e.createBiquadFilter();return nO(s,t),nI(s,t,"Q"),nI(s,t,"detune"),nI(s,t,"frequency"),nI(s,t,"gain"),nM(s,t,"type"),s},nH=e=>{let t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw nj()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw nj()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw nj()}})},nG=(e,t)=>{let s=e.createChannelSplitter(t.numberOfOutputs);return nO(s,t),nH(s),s},nU=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),n$=(e,t)=>{let s=e.createDelay(t.maxDelayTime);return nO(s,t),nI(s,t,"delayTime"),s},nQ=(e,t)=>{let s=e.createGain();return nO(s,t),nI(s,t,"gain"),s};function nY(e,t){let s=[0,0];for(let n=e.length-1;n>=0;n-=1){var i;s=[(i=s)[0]*t[0]-i[1]*t[1],i[0]*t[1]+i[1]*t[0]],s[0]+=e[n]}return s}let nX=(e,t,s,i)=>e.createScriptProcessor(t,s,i),nJ=()=>new DOMException("","NotSupportedError"),nK={numberOfChannels:1},n0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},n1={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},n2={disableNormalization:!1},n4={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},n5=()=>new DOMException("","UnknownError"),n3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},n6=(e,t,s)=>void 0===e.copyFromChannel?e.getChannelData(s)[0]:(e.copyFromChannel(t,s),t[0]),n8=e=>{if(null===e)return!1;let t=e.length;return t%2!=0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},n9=(e,t,s,i)=>{let n=e;for(;!n.hasOwnProperty(t);)n=Object.getPrototypeOf(n);let{get:r,set:a}=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,{get:s(r),set:i(a)})},n7=(e,t,s)=>{try{e.setValueAtTime(t,s)}catch(i){if(9!==i.code)throw i;n7(e,t,s+1e-7)}},re=e=>{let t=e.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},rt=e=>{let t=e.createBuffer(1,1,44100),s=e.createBufferSource();s.buffer=t,s.start(),s.stop();try{return s.stop(),!0}catch{return!1}},rs=e=>{let t=e.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},ri=(e,t)=>{let s;let i=t.createGain();e.connect(i);let n=(s=e.disconnect,()=>{s.call(e,i),e.removeEventListener("ended",n)});e.addEventListener("ended",n),nU(e,i),e.stop=(t=>{let s=!1;return (n=0)=>{if(s)try{t.call(e,n)}catch{i.gain.setValueAtTime(0,n)}else t.call(e,n),s=!0}})(e.stop)},rn=(e,t)=>s=>{let i={value:e};return(Object.defineProperties(s,{currentTarget:i,target:i}),"function"==typeof t)?t.call(e,s):t.handleEvent.call(e,s)},rr=new WeakMap,ra=(i=new Map,n=new WeakMap,(e,t)=>{let s=n.get(e);if(void 0!==s)return s;let r=i.get(e);if(void 0!==r)return r;try{let s=t();if(s instanceof Promise)return i.set(e,s),s.catch(()=>!1).then(t=>(i.delete(e),n.set(e,t),t));return n.set(e,s),s}catch{return n.set(e,!1),!1}}),ro="undefined"==typeof window?null:window,rl=(e,t)=>{let s=e.createAnalyser();if(nO(s,t),!(t.maxDecibels>t.minDecibels))throw iN();return nM(s,t,"fftSize"),nM(s,t,"maxDecibels"),nM(s,t,"minDecibels"),nM(s,t,"smoothingTimeConstant"),ra(nD,()=>nD(s))||nR(s),s},rc=e=>{let t=iP(e);if(null===t.renderer)throw Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},ru=async(e,t,s)=>{let i=iP(e);await Promise.all(i.activeInputs.map((i,n)=>Array.from(i).map(async([i,r])=>{let a=rc(i),o=await a.render(i,t),l=e.context.destination;i1(i)||e===l&&i1(e)||o.connect(s,r,n)})).reduce((e,t)=>[...e,...t],[]))},rh=e=>{let t=it.get(e);if(void 0===t)throw nj();return t},rd=null===ro?null:ro.hasOwnProperty("OfflineAudioContext")?ro.OfflineAudioContext:ro.hasOwnProperty("webkitOfflineAudioContext")?ro.webkitOfflineAudioContext:null,rp=e=>null!==rd&&e instanceof rd,rm=new WeakMap,rf=class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,t,s){if(null!==t){let i=this._listeners.get(t);void 0===i&&(i=rn(this,t),"function"==typeof t&&this._listeners.set(t,i)),this._nativeEventTarget.addEventListener(e,i,s)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,s){let i=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===i?null:i,s)}},rx=null===ro?null:ro.hasOwnProperty("AudioContext")?ro.AudioContext:ro.hasOwnProperty("webkitAudioContext")?ro.webkitAudioContext:null,rg=e=>null!==rx&&e instanceof rx,ry=e=>null!==ro&&"function"==typeof ro.AudioNode&&e instanceof ro.AudioNode,rb=e=>null!==ro&&"function"==typeof ro.AudioParam&&e instanceof ro.AudioParam,rv=null===ro?null:ro.hasOwnProperty("AudioWorkletNode")?ro.AudioWorkletNode:null,r_=(r=(e,t,s)=>{let i=[];for(let e=0;e<s.numberOfInputs;e+=1)i.push(new Set);s8.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},a=((e,t,s,i,n,r,a,o,l,c,u,h,d)=>{let p=new WeakMap;return(m,f,x,g,y)=>{let{activeInputs:b,passiveInputs:v}=r(f),{outputs:w}=r(m),j=o(m),T=r=>{let o=l(f),c=l(m);if(r){let t=ix(v,m,x,g);e(b,m,t,!1),y||h(m)||s(c,o,x,g),d(f)&&iy(f)}else{let e=i(b,m,x,g);t(v,g,e,!1),y||h(m)||n(c,o,x,g);let s=a(f);if(0===s)u(f)&&i_(f,b);else{let e=p.get(f);void 0!==e&&clearTimeout(e),p.set(f,setTimeout(()=>{u(f)&&i_(f,b)},1e3*s))}}};return!!c(w,[f,x,g],e=>e[0]===f&&e[1]===x&&e[2]===g,!0)&&(j.add(T),u(m)?e(b,m,[x,g,T],!0):t(v,g,[m,x,T],!0),!0)}})((e,t,[s,i,n],r)=>{iW(e[i],[t,s,n],e=>e[0]===t&&e[1]===s,r)},(e,t,[s,i,n],r)=>{let a=e.get(s);void 0===a?e.set(s,new Set([[i,t,n]])):iW(a,[i,t,n],e=>e[0]===i&&e[1]===t,r)},iU,(e,t,s,i)=>im(e[i],e=>e[0]===t&&e[1]===s),iJ,iP,e=>{var t;return null!==(t=rr.get(e))&&void 0!==t?t:0},ig,iK,iW,iS,i1,i2),o=e=>(t,s)=>{let i=ii.get(t);if(void 0===i){if(!e&&iS(t)){let e=iK(t),{outputs:s}=iP(t);for(let t of s)if(iB(t))iJ(e,iK(t[0]),t[1],t[2]);else{let s=i0(t[0]);e.disconnect(s,t[1])}}ii.set(t,s)}else ii.set(t,i+s)},l=(e,t)=>{let s=ii.get(e);if(void 0===s)throw Error("Missing the expected cycle count.");let i=rp(rh(e.context));if(s===t){if(ii.delete(e),!i&&iS(e)){let t=iK(e),{outputs:s}=iP(e);for(let e of s)if(iB(e))iU(t,iK(e[0]),e[1],e[2]);else{let s=i0(e[0]);t.connect(s,e[1])}}}else ii.set(e,s-t)},c=function e(t,s){let i=iL(s)?s:ip(rm,s);if(nb(i))return[];if(t[0]===i)return[t];if(t.includes(i))return[];let{outputs:n}=iP(i);return Array.from(n).map(s=>e([...t,i],s[0])).reduce((e,t)=>e.concat(t),[])},u=rf,class extends u{constructor(e,t,s,i){super(s),this._context=e,this._nativeAudioNode=s;let n=rh(e);rg(n)&&!0!==ra(i4,()=>i4(n,rv))&&i6(s),s9.set(this,s),is.set(this,new Set),"closed"!==e.state&&t&&iy(this),r(this,i,s)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,t=0,s=0){if(t<0||t>=this._nativeAudioNode.numberOfOutputs)throw iN();let i=rp(rh(this._context));if(ry(e)||rb(e))throw nT();if(iL(e)){let n=iK(e);try{let r=iU(this._nativeAudioNode,n,t,s),a=i2(this);(i||a)&&this._nativeAudioNode.disconnect(...r),"closed"!==this.context.state&&!a&&i2(e)&&iy(e)}catch(e){if(12===e.code)throw nT();throw e}return a(this,e,t,s,i)&&i5(c([this],e),o(i)),e}let n=i0(e);if("playbackRate"===n.name&&1024===n.maxValue)throw nJ();try{this._nativeAudioNode.connect(n,t),(i||i2(this))&&this._nativeAudioNode.disconnect(n,t)}catch(e){if(12===e.code)throw nT();throw e}i8(this,e,t,i)&&i5(c([this],e),o(i))}disconnect(e,t,s){let i;let n=rp(rh(this._context));if(void 0===e)i=ns(this,n);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw iN();i=ni(this,n,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs)||iL(e)&&void 0!==s&&(s<0||s>=e.numberOfInputs))throw iN();if(0===(i=nn(this,n,e,t,s)).length)throw nT()}for(let e of i)i5(c([this],e),l)}}),rw=(h=r_,d=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t);return ij(i,s)||(i=rl(s,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant})),e.set(s,i),await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},class extends h{constructor(e,t){let s=rh(e),i=rl(s,{...iw,...t});super(e,!1,i,rp(s)?d():null),this._nativeAnalyserNode=i}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){let t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,iN()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){let t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,iN()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}}),rj=new WeakSet,rT=null===ro?null:ro.hasOwnProperty("AudioBuffer")?ro.AudioBuffer:null,rN=(p=new Uint32Array(1),e=>(p[0]=e,p[0])),rC=e=>{e.copyFromChannel=(t,s,i=0)=>{let n=rN(i),r=rN(s);if(r>=e.numberOfChannels)throw iN();let a=e.length,o=e.getChannelData(r),l=t.length;for(let e=n<0?-n:0;e+n<a&&e<l;e+=1)t[e]=o[e+n]},e.copyToChannel=(t,s,i=0)=>{let n=rN(i),r=rN(s);if(r>=e.numberOfChannels)throw iN();let a=e.length,o=e.getChannelData(r),l=t.length;for(let e=n<0?-n:0;e+n<a&&e<l;e+=1)o[e+n]=t[e]}},rk=e=>{let t,s;e.copyFromChannel=(t=e.copyFromChannel,(s,i,n=0)=>{let r=rN(n),a=rN(i);if(r<e.length)return t.call(e,s,a,r)}),e.copyToChannel=(s=e.copyToChannel,(t,i,n=0)=>{let r=rN(n),a=rN(i);if(r<e.length)return s.call(e,t,a,r)})},rS=((e,t,s,i,n,r,a,o)=>{let l=null;return class c{constructor(c){if(null===n)throw Error("Missing the native OfflineAudioContext constructor.");let{length:u,numberOfChannels:h,sampleRate:d}={...ik,...c};null===l&&(l=new n(1,1,44100));let p=null!==i&&t(r,r)?new i({length:u,numberOfChannels:h,sampleRate:d}):l.createBuffer(h,u,d);if(0===p.numberOfChannels)throw s();return"function"!=typeof p.copyFromChannel?(a(p),iC(p)):t(iT,()=>iT(p))||o(p),e.add(p),p}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===c.prototype||e.has(t)}}})(rj,ra,nJ,rT,rd,()=>{if(null===rT)return!1;try{new rT({length:1,sampleRate:44100})}catch{return!1}return!0},rC,rk),rA=(e,t)=>{let s=nQ(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);let i=()=>{t.removeEventListener("ended",i),t.disconnect(s),s.disconnect()};t.addEventListener("ended",i)},rE=async(e,t,s)=>{let i=iq(e);await Promise.all(Array.from(i.activeInputs).map(async([e,i])=>{let n=rc(e),r=await n.render(e,t);i1(e)||r.connect(s,i)}))},rM=(e,t,s)=>rE(t,e,s),rO=(m=e=>{let t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},f=e=>{let t=e.createBufferSource(),s=e.createBuffer(1,1,44100);t.buffer=s;try{t.start(0,1)}catch{return!1}return!0},x=e=>{let t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},g=e=>{let t;e.start=(t=e.start,(s=0,i=0,n)=>{let r=e.buffer,a=null===r?i:Math.min(r.duration,i);null!==r&&a>r.duration-.5/e.context.sampleRate?t.call(e,s,0,0):t.call(e,s,a,n)})},y=(e,t)=>{let s=t.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=s),n9(e,"buffer",t=>()=>{let i=t.call(e);return i===s?null:i},t=>i=>t.call(e,null===i?s:i))},(e,t)=>{let s=e.createBufferSource();return nO(s,t),nI(s,t,"playbackRate"),nM(s,t,"buffer"),nM(s,t,"loop"),nM(s,t,"loopEnd"),nM(s,t,"loopStart"),ra(m,()=>m(e))||nP(s),ra(f,()=>f(e))||g(s),ra(x,()=>x(e))||y(s,e),ra(re,()=>re(e))||nq(s),ra(rt,()=>rt(e))||ri(s,e),ra(rs,()=>rs(e))||nF(s),rA(e,s),s}),rD=(b=e=>{let t=iq(e);if(null===t.renderer)throw Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},(e,t,s)=>(b(t).replay(s),rE(t,e,s))),rR=(v=(e,t)=>{s7.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},w=e=>({replay(t){for(let s of e)if("exponentialRampToValue"===s.type){let{endTime:e,value:i}=s;t.exponentialRampToValueAtTime(i,e)}else if("linearRampToValue"===s.type){let{endTime:e,value:i}=s;t.linearRampToValueAtTime(i,e)}else if("setTarget"===s.type){let{startTime:e,target:i,timeConstant:n}=s;t.setTargetAtTime(i,e,n)}else if("setValue"===s.type){let{startTime:e,value:i}=s;t.setValueAtTime(i,e)}else if("setValueCurve"===s.type){let{duration:e,startTime:i,values:n}=s;t.setValueCurveAtTime(n,i,e)}else throw Error("Can't apply an unknown automation.")}}),j=e=>({cancelTime:e,type:"cancelAndHold"}),T=e=>({cancelTime:e,type:"cancelScheduledValues"}),N=(e,t)=>({endTime:t,type:"exponentialRampToValue",value:e}),C=(e,t)=>({endTime:t,type:"linearRampToValue",value:e}),k=(e,t,s)=>({startTime:t,target:e,timeConstant:s,type:"setTarget"}),(e,t,s,i=null,n=null)=>{let r=s.value,a=new s3(r),o=t?w(a):null,l={get defaultValue(){return r},get maxValue(){return null===i?s.maxValue:i},get minValue(){return null===n?s.minValue:n},get value(){return s.value},set value(value){s.value=value,l.setValueAtTime(value,e.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof s.cancelAndHoldAtTime)null===o&&a.flush(e.context.currentTime),a.add(j(t)),s.cancelAndHoldAtTime(t);else{let i=Array.from(a).pop();null===o&&a.flush(e.context.currentTime),a.add(j(t));let n=Array.from(a).pop();s.cancelScheduledValues(t),i!==n&&void 0!==n&&("exponentialRampToValue"===n.type?s.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?s.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?s.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&s.setValueCurveAtTime(n.values,n.startTime,n.duration))}return l},cancelScheduledValues:t=>(null===o&&a.flush(e.context.currentTime),a.add(T(t)),s.cancelScheduledValues(t),l),exponentialRampToValueAtTime(t,i){if(0===t||!Number.isFinite(i)||i<0)throw RangeError();let n=e.context.currentTime;return null===o&&a.flush(n),0===Array.from(a).length&&(a.add(sL(r,n)),s.setValueAtTime(r,n)),a.add(N(t,i)),s.exponentialRampToValueAtTime(t,i),l},linearRampToValueAtTime(t,i){let n=e.context.currentTime;return null===o&&a.flush(n),0===Array.from(a).length&&(a.add(sL(r,n)),s.setValueAtTime(r,n)),a.add(C(t,i)),s.linearRampToValueAtTime(t,i),l},setTargetAtTime:(t,i,n)=>(null===o&&a.flush(e.context.currentTime),a.add(k(t,i,n)),s.setTargetAtTime(t,i,n),l),setValueAtTime:(t,i)=>(null===o&&a.flush(e.context.currentTime),a.add(sL(t,i)),s.setValueAtTime(t,i),l),setValueCurveAtTime(t,i,n){let r=t instanceof Float32Array?t:new Float32Array(t);if(null!==rx&&"webkitAudioContext"===rx.name){let t=i+n,c=e.context.sampleRate,u=Math.ceil(i*c),h=Math.floor(t*c),d=h-u,p=new Float32Array(d);for(let e=0;e<d;e+=1){let t=(r.length-1)/n*((u+e)/c-i),s=Math.floor(t),a=Math.ceil(t);p[e]=s===a?r[s]:(1-(t-s))*r[s]+(1-(a-t))*r[a]}null===o&&a.flush(e.context.currentTime),a.add(sB(p,i,n)),s.setValueCurveAtTime(p,i,n);let m=h/c;m<t&&n7(l,p[p.length-1],m),n7(l,r[r.length-1],t)}else null===o&&a.flush(e.context.currentTime),a.add(sB(r,i,n)),s.setValueCurveAtTime(r,i,n);return l}};return ie.set(l,s),rm.set(l,e),v(l,o),l}),rI=(S=r_,A=()=>{let e=new WeakMap,t=null,s=null,i=async(i,n)=>{let r=iK(i),a=ij(r,n);return a||(r=rO(n,{buffer:r.buffer,channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,loop:r.loop,loopEnd:r.loopEnd,loopStart:r.loopStart,playbackRate:r.playbackRate.value}),null!==t&&r.start(...t),null!==s&&r.stop(s)),e.set(n,r),a?await rM(n,i.playbackRate,r.playbackRate):await rD(n,i.playbackRate,r.playbackRate),await ru(i,n,r),r};return{set start(value){t=value},set stop(value){s=value},render(t,s){let n=e.get(s);return void 0!==n?Promise.resolve(n):i(t,s)}}},class extends S{constructor(e,t){let s=rh(e),i={...iA,...t},n=rO(s,i),r=rp(s),a=r?A():null;super(e,!1,n,a),this._audioBufferSourceNodeRenderer=a,this._isBufferNullified=!1,this._isBufferSet=null!==i.buffer,this._nativeAudioBufferSourceNode=n,this._onended=null,this._playbackRate=rR(this,r,n.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw nj();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){let t="function"==typeof e?rn(this,e):null;this._nativeAudioBufferSourceNode.onended=t;let s=this._nativeAudioBufferSourceNode.onended;this._onended=null!==s&&s===t?e:s}get playbackRate(){return this._playbackRate}start(e=0,t=0,s){if(this._nativeAudioBufferSourceNode.start(e,t,s),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===s?[e,t]:[e,t,s]),"closed"!==this.context.state){iy(this);let e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),iS(this)&&iv(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}}),rP=(E=r_,M=e=>{let t=new WeakMap,s=async(s,i)=>{let n=i.destination;return t.set(i,n),await e(s,i,n),n};return{render(e,i){let n=t.get(i);return void 0!==n?Promise.resolve(n):s(e,i)}}},O=(e,t,s)=>{let i=e.destination;if(i.channelCount!==t)try{i.channelCount=t}catch{}s&&"explicit"!==i.channelCountMode&&(i.channelCountMode="explicit"),0===i.maxChannelCount&&Object.defineProperty(i,"maxChannelCount",{value:t});let n=nQ(e,{channelCount:t,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return n9(n,"channelCount",e=>()=>e.call(n),e=>t=>{e.call(n,t);try{i.channelCount=t}catch(e){if(t>i.maxChannelCount)throw e}}),n9(n,"channelCountMode",e=>()=>e.call(n),e=>t=>{e.call(n,t),i.channelCountMode=t}),n9(n,"channelInterpretation",e=>()=>e.call(n),e=>t=>{e.call(n,t),i.channelInterpretation=t}),Object.defineProperty(n,"maxChannelCount",{get:()=>i.maxChannelCount}),n.connect(i),n},class extends E{constructor(e,t){let s=rh(e),i=rp(s),n=O(s,t,i);super(e,!1,n,i?M(ru):null),this._isNodeOfNativeOfflineAudioContext=i,this._nativeAudioDestinationNode=n}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw nj();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw iN();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw nj();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}}),rq=(e,t)=>rr.set(e,t),rF=(D=r_,R=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t),n=ij(i,s);return n||(i=nZ(s,{Q:i.Q.value,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,detune:i.detune.value,frequency:i.frequency.value,gain:i.gain.value,type:i.type})),e.set(s,i),n?(await rM(s,t.Q,i.Q),await rM(s,t.detune,i.detune),await rM(s,t.frequency,i.frequency),await rM(s,t.gain,i.gain)):(await rD(s,t.Q,i.Q),await rD(s,t.detune,i.detune),await rD(s,t.frequency,i.frequency),await rD(s,t.gain,i.gain)),await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},class extends D{constructor(e,t){let s=rh(e),i=nZ(s,{...nd,...t}),n=rp(s);super(e,!1,i,n?R():null),this._Q=rR(this,n,i.Q,34028234663852886e22,-34028234663852886e22),this._detune=rR(this,n,i.detune,1200*Math.log2(34028234663852886e22),-1200*Math.log2(34028234663852886e22)),this._frequency=rR(this,n,i.frequency,e.sampleRate/2,0),this._gain=rR(this,n,i.gain,40*Math.log10(34028234663852886e22),-34028234663852886e22),this._nativeBiquadFilterNode=i,rq(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,s){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,s)}catch(e){if(11===e.code)throw nT();throw e}if(e.length!==t.length||t.length!==s.length)throw nT()}}),rV=(e,t,s)=>{let i,n;let r=new Set;return e.connect=(i=e.connect,(s,n=0,a=0)=>{let o=0===r.size;if(ry(s))return i.call(e,s,n,a),iW(r,[s,n,a],e=>e[0]===s&&e[1]===n&&e[2]===a,!0),o&&t(),s;i.call(e,s,n),iW(r,[s,n],e=>e[0]===s&&e[1]===n,!0),o&&t()}),e.disconnect=(n=e.disconnect,(t,i,a)=>{let o=r.size>0;if(void 0===t)n.apply(e),r.clear();else if("number"==typeof t)for(let s of(n.call(e,t),r))s[1]===t&&r.delete(s);else for(let s of(ry(t)?n.call(e,t,i,a):n.call(e,t,i),r))s[0]===t&&(void 0===i||s[1]===i)&&(void 0===a||s[2]===a)&&r.delete(s);let l=0===r.size;o&&l&&s()}),e},rz=(I=(e,t)=>{t.channelCount=1,t.channelCountMode="explicit",Object.defineProperty(t,"channelCount",{get:()=>1,set:()=>{throw nj()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:()=>{throw nj()}});let s=e.createBufferSource();rV(t,()=>{let e=t.numberOfInputs;for(let i=0;i<e;i+=1)s.connect(t,0,i)},()=>s.disconnect(t))},(e,t)=>{let s=e.createChannelMerger(t.numberOfInputs);return null!==rx&&"webkitAudioContext"===rx.name&&I(e,s),nO(s,t),s}),rL=(P=r_,q=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t);return ij(i,s)||(i=rz(s,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs})),e.set(s,i),await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},class extends P{constructor(e,t){let s=rh(e);super(e,!1,rz(s,{...np,...t}),rp(s)?q():null)}}),rB=(F=r_,V=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t);return ij(i,s)||(i=nG(s,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs})),e.set(s,i),await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},z=e=>({...e,channelCount:e.numberOfOutputs}),class extends F{constructor(e,t){let s=rh(e);super(e,!1,nG(s,z({...nm,...t})),rp(s)?V():null)}}),rW=(L=(e,{offset:t,...s})=>{let i=e.createBuffer(1,2,44100),n=rO(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=nQ(e,{...s,gain:t}),a=i.getChannelData(0);return a[0]=1,a[1]=1,n.buffer=i,n.loop=!0,rA(e,n),rV(nU({get bufferSize(){return},get channelCount(){return r.channelCount},set channelCount(value){r.channelCount=value},get channelCountMode(){return r.channelCountMode},set channelCountMode(value){r.channelCountMode=value},get channelInterpretation(){return r.channelInterpretation},set channelInterpretation(value){r.channelInterpretation=value},get context(){return r.context},get inputs(){return[]},get numberOfInputs(){return n.numberOfInputs},get numberOfOutputs(){return r.numberOfOutputs},get offset(){return r.gain},get onended(){return n.onended},set onended(value){n.onended=value},addEventListener:(...e)=>n.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>n.dispatchEvent(e[0]),removeEventListener:(...e)=>n.removeEventListener(e[0],e[1],e[2]),start(e=0){n.start.call(n,e)},stop(e=0){n.stop.call(n,e)}},r),()=>n.connect(r),()=>n.disconnect(r))},(e,t)=>{if(void 0===e.createConstantSource)return L(e,t);let s=e.createConstantSource();return nO(s,t),nI(s,t,"offset"),ra(re,()=>re(e))||nq(s),ra(rs,()=>rs(e))||nF(s),rA(e,s),s}),rZ=(B=r_,W=()=>{let e=new WeakMap,t=null,s=null,i=async(i,n)=>{let r=iK(i),a=ij(r,n);return a||(r=rW(n,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,offset:r.offset.value}),null!==t&&r.start(t),null!==s&&r.stop(s)),e.set(n,r),a?await rM(n,i.offset,r.offset):await rD(n,i.offset,r.offset),await ru(i,n,r),r};return{set start(value){t=value},set stop(value){s=value},render(t,s){let n=e.get(s);return void 0!==n?Promise.resolve(n):i(t,s)}}},class extends B{constructor(e,t){let s=rh(e),i=rW(s,{...nf,...t}),n=rp(s),r=n?W():null;super(e,!1,i,r),this._constantSourceNodeRenderer=r,this._nativeConstantSourceNode=i,this._offset=rR(this,n,i.offset,34028234663852886e22,-34028234663852886e22),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){let t="function"==typeof e?rn(this,e):null;this._nativeConstantSourceNode.onended=t;let s=this._nativeConstantSourceNode.onended;this._onended=null!==s&&s===t?e:s}start(e=0){if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){iy(this);let e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),iS(this)&&iv(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}}),rH=(e,t)=>{let s=e.createConvolver();if(nO(s,t),t.disableNormalization===s.normalize&&(s.normalize=!t.disableNormalization),nM(s,t,"buffer"),t.channelCount>2||(n9(s,"channelCount",e=>()=>e.call(s),e=>t=>{if(t>2)throw nJ();return e.call(s,t)}),"max"===t.channelCountMode))throw nJ();return n9(s,"channelCountMode",e=>()=>e.call(s),e=>t=>{if("max"===t)throw nJ();return e.call(s,t)}),s},rG=(Z=r_,H=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t);return ij(i,s)||(i=rH(s,{buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,disableNormalization:!i.normalize})),e.set(s,i),iG(i)?await ru(t,s,i.inputs[0]):await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},class extends Z{constructor(e,t){let s=rh(e),i={...nx,...t},n=rH(s,i);super(e,!1,n,rp(s)?H():null),this._isBufferNullified=!1,this._nativeConvolverNode=n,null!==i.buffer&&rq(this,i.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){let e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,rq(this,0)}else this._isBufferNullified=!1,rq(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}}),rU=(G=r_,U=e=>{let t=new WeakMap,s=async(s,i)=>{let n=iK(s),r=ij(n,i);return r||(n=n$(i,{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,delayTime:n.delayTime.value,maxDelayTime:e})),t.set(i,n),r?await rM(i,s.delayTime,n.delayTime):await rD(i,s.delayTime,n.delayTime),await ru(s,i,n),n};return{render(e,i){let n=t.get(i);return void 0!==n?Promise.resolve(n):s(e,i)}}},class extends G{constructor(e,t){let s=rh(e),i={...ny,...t},n=n$(s,i),r=rp(s);super(e,!1,n,r?U(i.maxDelayTime):null),this._delayTime=rR(this,r,n.delayTime),rq(this,i.maxDelayTime)}get delayTime(){return this._delayTime}}),r$=(e,t)=>{let s=e.createDynamicsCompressor();if(nO(s,t),t.channelCount>2||"max"===t.channelCountMode)throw nJ();return nI(s,t,"attack"),nI(s,t,"knee"),nI(s,t,"ratio"),nI(s,t,"release"),nI(s,t,"threshold"),s},rQ=($=r_,Q=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t),n=ij(i,s);return n||(i=r$(s,{attack:i.attack.value,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,knee:i.knee.value,ratio:i.ratio.value,release:i.release.value,threshold:i.threshold.value})),e.set(s,i),n?(await rM(s,t.attack,i.attack),await rM(s,t.knee,i.knee),await rM(s,t.ratio,i.ratio),await rM(s,t.release,i.release),await rM(s,t.threshold,i.threshold)):(await rD(s,t.attack,i.attack),await rD(s,t.knee,i.knee),await rD(s,t.ratio,i.ratio),await rD(s,t.release,i.release),await rD(s,t.threshold,i.threshold)),await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},class extends ${constructor(e,t){let s=rh(e),i=r$(s,{...n_,...t}),n=rp(s);super(e,!1,i,n?Q():null),this._attack=rR(this,n,i.attack),this._knee=rR(this,n,i.knee),this._nativeDynamicsCompressorNode=i,this._ratio=rR(this,n,i.ratio),this._release=rR(this,n,i.release),this._threshold=rR(this,n,i.threshold),rq(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){let t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,nJ()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){let t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,nJ()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}}),rY=(Y=r_,X=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t),n=ij(i,s);return n||(i=nQ(s,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:i.gain.value})),e.set(s,i),n?await rM(s,t.gain,i.gain):await rD(s,t.gain,i.gain),await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},class extends Y{constructor(e,t){let s=rh(e),i=nQ(s,{...nw,...t}),n=rp(s);super(e,!1,i,n?X():null),this._gain=rR(this,n,i.gain,34028234663852886e22,-34028234663852886e22)}get gain(){return this._gain}}),rX=(J=()=>{if(null===rd)return Promise.resolve(!1);let e=new rd(1,1,44100),t=nQ(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{e.oncomplete=()=>{t.disconnect(),s(0!==e.currentTime)},e.startRendering()})},e=>ra(nE,()=>nE(e))?Promise.resolve(ra(J,J)).then(t=>{if(!t){let t=nX(e,512,0,1);e.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>e.currentTime,t.connect(e.destination)}return e.startRendering()}):new Promise(t=>{let s=nQ(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.oncomplete=e=>{s.disconnect(),t(e.renderedBuffer)},s.connect(e.destination),e.startRendering()})),rJ=(K=(e,t,{channelCount:s,channelCountMode:i,channelInterpretation:n,feedback:r,feedforward:a})=>{let o=nz(t,e.sampleRate),l=r instanceof Float64Array?r:new Float64Array(r),c=a instanceof Float64Array?a:new Float64Array(a),u=l.length,h=c.length,d=Math.min(u,h);if(0===u||u>20)throw nJ();if(0===l[0])throw nj();if(0===h||h>20)throw nJ();if(0===c[0])throw nj();if(1!==l[0]){for(let e=0;e<h;e+=1)c[e]/=l[0];for(let e=1;e<u;e+=1)l[e]/=l[0]}let p=nX(e,o,s,s);p.channelCount=s,p.channelCountMode=i,p.channelInterpretation=n;let m=[],f=[],x=[];for(let e=0;e<s;e+=1){m.push(0);let e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),f.push(e),x.push(t)}p.onaudioprocess=e=>{let t=e.inputBuffer,s=e.outputBuffer,i=t.numberOfChannels;for(let e=0;e<i;e+=1){let i=t.getChannelData(e),n=s.getChannelData(e);m[e]=nk(l,u,c,h,d,f[e],x[e],m[e],32,i,n)}};let g=e.sampleRate/2;return nU({get bufferSize(){return o},get channelCount(){return p.channelCount},set channelCount(value){p.channelCount=value},get channelCountMode(){return p.channelCountMode},set channelCountMode(value){p.channelCountMode=value},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(value){p.channelInterpretation=value},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},addEventListener:(...e)=>p.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>p.dispatchEvent(e[0]),getFrequencyResponse(e,t,s){if(e.length!==t.length||t.length!==s.length)throw nT();let i=e.length;for(let n=0;n<i;n+=1){let i=-(e[n]/g*Math.PI),r=[Math.cos(i),Math.sin(i)],a=function(e,t){let s=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/s,(e[1]*t[0]-e[0]*t[1])/s]}(nY(c,r),nY(l,r));t[n]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s[n]=Math.atan2(a[1],a[0])}},removeEventListener:(...e)=>p.removeEventListener(e[0],e[1],e[2])},p)},(e,t,s)=>{if(void 0===e.createIIRFilter)return K(e,t,s);let i=e.createIIRFilter(s.feedforward,s.feedback);return nO(i,s),i}),rK=(ee=r_,et=(e,t)=>{let s=new WeakMap,i=null,n=async(n,r)=>{let a=null,o=iK(n),l=ij(o,r);if(void 0===r.createIIRFilter?a=rO(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):l||(o=r.createIIRFilter(t,e)),s.set(r,null===a?o:a),null!==a){if(null===i){if(null===rd)throw Error("Missing the native OfflineAudioContext constructor.");let s=new rd(n.context.destination.channelCount,n.context.length,r.sampleRate);i=(async()=>(await ru(n,s,s.destination),nS(await rX(s),r,e,t)))()}let s=await i;return a.buffer=s,a.start(0),a}return await ru(n,r,o),o};return{render(e,t){let i=s.get(t);return void 0!==i?Promise.resolve(i):n(e,t)}}},class extends ee{constructor(e,t){let s=rh(e),i=rp(s),n={...nC,...t},r=rJ(s,i?null:e.baseLatency,n);super(e,!1,r,i?et(n.feedback,n.feedforward):null),nN(r),this._nativeIIRFilterNode=r,rq(this,1)}getFrequencyResponse(e,t,s){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,s)}}),r0=new WeakMap,r1=(es=(e,t)=>{let s=t.listener,{forwardX:i,forwardY:n,forwardZ:r,positionX:a,positionY:o,positionZ:l,upX:c,upY:u,upZ:h}=void 0===s.forwardX?(()=>{let i=new Float32Array(1),n=rz(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),r=rp(t),a=!1,o=[0,0,-1,0,1,0],l=[0,0,0],c=()=>{if(a)return;a=!0;let e=nX(t,256,9,0);e.onaudioprocess=({inputBuffer:e})=>{let t=[n6(e,i,0),n6(e,i,1),n6(e,i,2),n6(e,i,3),n6(e,i,4),n6(e,i,5)];t.some((e,t)=>e!==o[t])&&(s.setOrientation(...t),o=t);let n=[n6(e,i,6),n6(e,i,7),n6(e,i,8)];n.some((e,t)=>e!==l[t])&&(s.setPosition(...n),l=n)},n.connect(e)},u=e=>t=>{t!==o[e]&&(o[e]=t,s.setOrientation(...o))},h=e=>t=>{t!==l[e]&&(l[e]=t,s.setPosition(...l))},d=(s,i,a)=>{var o,l,u,h,d,p,m;let f=rW(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});f.connect(n,0,s),f.start(),Object.defineProperty(f.offset,"defaultValue",{get:()=>i});let x=rR({context:e},r,f.offset,34028234663852886e22,-34028234663852886e22);return n9(x,"value",e=>()=>e.call(x),e=>t=>{try{e.call(x,t)}catch(e){if(9!==e.code)throw e}c(),r&&a(t)}),x.cancelAndHoldAtTime=(o=x.cancelAndHoldAtTime,r?()=>{throw nJ()}:(...e)=>{let t=o.apply(x,e);return c(),t}),x.cancelScheduledValues=(l=x.cancelScheduledValues,r?()=>{throw nJ()}:(...e)=>{let t=l.apply(x,e);return c(),t}),x.exponentialRampToValueAtTime=(u=x.exponentialRampToValueAtTime,r?()=>{throw nJ()}:(...e)=>{let t=u.apply(x,e);return c(),t}),x.linearRampToValueAtTime=(h=x.linearRampToValueAtTime,r?()=>{throw nJ()}:(...e)=>{let t=h.apply(x,e);return c(),t}),x.setTargetAtTime=(d=x.setTargetAtTime,r?()=>{throw nJ()}:(...e)=>{let t=d.apply(x,e);return c(),t}),x.setValueAtTime=(p=x.setValueAtTime,r?()=>{throw nJ()}:(...e)=>{let t=p.apply(x,e);return c(),t}),x.setValueCurveAtTime=(m=x.setValueCurveAtTime,r?()=>{throw nJ()}:(...e)=>{let t=m.apply(x,e);return c(),t}),x};return{forwardX:d(0,0,u(0)),forwardY:d(1,0,u(1)),forwardZ:d(2,-1,u(2)),positionX:d(6,0,h(0)),positionY:d(7,0,h(1)),positionZ:d(8,0,h(2)),upX:d(3,0,u(3)),upY:d(4,1,u(4)),upZ:d(5,0,u(5))}})():s;return{get forwardX(){return i},get forwardY(){return n},get forwardZ(){return r},get positionX(){return a},get positionY(){return o},get positionZ(){return l},get upX(){return c},get upY(){return u},get upZ(){return h}}},ei=rf,class extends ei{constructor(e,t){super(e),this._nativeContext=e,it.set(this,e),rp(e)&&r0.set(e,new Set),this._destination=new rP(this,t),this._listener=es(this,e),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){let t="function"==typeof e?rn(this,e):null;this._nativeContext.onstatechange=t;let s=this._nativeContext.onstatechange;this._onstatechange=null!==s&&s===t?e:s}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}}),r2=(e,t)=>{let s=e.createOscillator();return nO(s,t),nI(s,t,"detune"),nI(s,t,"frequency"),void 0!==t.periodicWave?s.setPeriodicWave(t.periodicWave):nM(s,t,"type"),ra(re,()=>re(e))||nq(s),ra(rt,()=>rt(e))||ri(s,e),ra(rs,()=>rs(e))||nF(s),rA(e,s),s},r4=(en=r_,er=()=>{let e=new WeakMap,t=null,s=null,i=null,n=async(n,r)=>{let a=iK(n),o=ij(a,r);return o||(a=r2(r,{channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,detune:a.detune.value,frequency:a.frequency.value,periodicWave:null===t?void 0:t,type:a.type}),null!==s&&a.start(s),null!==i&&a.stop(i)),e.set(r,a),o?(await rM(r,n.detune,a.detune),await rM(r,n.frequency,a.frequency)):(await rD(r,n.detune,a.detune),await rD(r,n.frequency,a.frequency)),await ru(n,r,a),a};return{set periodicWave(value){t=value},set start(value){s=value},set stop(value){i=value},render(t,s){let i=e.get(s);return void 0!==i?Promise.resolve(i):n(t,s)}}},class extends en{constructor(e,t){let s=rh(e),i={...n0,...t},n=r2(s,i),r=rp(s),a=r?er():null,o=e.sampleRate/2;super(e,!1,n,a),this._detune=rR(this,r,n.detune,153600,-153600),this._frequency=rR(this,r,n.frequency,o,-o),this._nativeOscillatorNode=n,this._onended=null,this._oscillatorNodeRenderer=a,null!==this._oscillatorNodeRenderer&&void 0!==i.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=i.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){let t="function"==typeof e?rn(this,e):null;this._nativeOscillatorNode.onended=t;let s=this._nativeOscillatorNode.onended;this._onended=null!==s&&s===t?e:s}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(e=0){if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){iy(this);let e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),iS(this)&&iv(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}}),r5=(e,t)=>{let s=rO(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},r3=(ea=(e,{curve:t,oversample:s,...i})=>{let n=e.createWaveShaper(),r=e.createWaveShaper();nO(n,i),nO(r,i);let a=nQ(e,{...i,gain:1}),o=nQ(e,{...i,gain:-1}),l=nQ(e,{...i,gain:1}),c=nQ(e,{...i,gain:-1}),u=null,h=!1,d=null,p={get bufferSize(){return},get channelCount(){return n.channelCount},set channelCount(value){a.channelCount=value,o.channelCount=value,n.channelCount=value,l.channelCount=value,r.channelCount=value,c.channelCount=value},get channelCountMode(){return n.channelCountMode},set channelCountMode(value){a.channelCountMode=value,o.channelCountMode=value,n.channelCountMode=value,l.channelCountMode=value,r.channelCountMode=value,c.channelCountMode=value},get channelInterpretation(){return n.channelInterpretation},set channelInterpretation(value){a.channelInterpretation=value,o.channelInterpretation=value,n.channelInterpretation=value,l.channelInterpretation=value,r.channelInterpretation=value,c.channelInterpretation=value},get context(){return n.context},get curve(){return d},set curve(value){if(null!==value&&value.length<2)throw nj();if(null===value)n.curve=value,r.curve=value;else{let e=value.length,t=new Float32Array(e+2-e%2),s=new Float32Array(e+2-e%2);t[0]=value[0],s[0]=-value[e-1];let i=Math.ceil((e+1)/2),a=(e+1)/2-1;for(let n=1;n<i;n+=1){let r=n/i*a,o=Math.floor(r),l=Math.ceil(r);t[n]=o===l?value[o]:(1-(r-o))*value[o]+(1-(l-r))*value[l],s[n]=o===l?-value[e-1-o]:-((1-(r-o))*value[e-1-o])-(1-(l-r))*value[e-1-l]}t[i]=e%2==1?value[i-1]:(value[i-2]+value[i-1])/2,n.curve=t,r.curve=s}d=value,h&&(n8(d)&&null===u?u=r5(e,a):null!==u&&(u(),u=null))},get inputs(){return[a]},get numberOfInputs(){return n.numberOfInputs},get numberOfOutputs(){return n.numberOfOutputs},get oversample(){return n.oversample},set oversample(value){n.oversample=value,r.oversample=value},addEventListener:(...e)=>a.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>a.dispatchEvent(e[0]),removeEventListener:(...e)=>a.removeEventListener(e[0],e[1],e[2])};return null!==t&&(p.curve=t instanceof Float32Array?t:new Float32Array(t)),s!==p.oversample&&(p.oversample=s),rV(nU(p,l),()=>{a.connect(n).connect(l),a.connect(o).connect(r).connect(c).connect(l),h=!0,n8(d)&&(u=r5(e,a))},()=>{a.disconnect(n),n.disconnect(l),a.disconnect(o),o.disconnect(r),r.disconnect(c),c.disconnect(l),h=!1,null!==u&&(u(),u=null)})},(e,t)=>{let s=e.createWaveShaper();if(null!==rx&&"webkitAudioContext"===rx.name&&void 0===e.createGain().gain.automationRate)return ea(e,t);nO(s,t);let i=null===t.curve||t.curve instanceof Float32Array?t.curve:new Float32Array(t.curve);if(null!==i&&i.length<2)throw nj();nM(s,{curve:i},"curve"),nM(s,t,"oversample");let n=null,r=!1;return n9(s,"curve",e=>()=>e.call(s),t=>i=>(t.call(s,i),r&&(n8(i)&&null===n?n=r5(e,s):n8(i)||null===n||(n(),n=null)),i)),rV(s,()=>{r=!0,n8(s.curve)&&(n=r5(e,s))},()=>{r=!1,null!==n&&(n(),n=null)})}),r6=(eo=(e,{coneInnerAngle:t,coneOuterAngle:s,coneOuterGain:i,distanceModel:n,maxDistance:r,orientationX:a,orientationY:o,orientationZ:l,panningModel:c,positionX:u,positionY:h,positionZ:d,refDistance:p,rolloffFactor:m,...f})=>{let x=e.createPanner();if(f.channelCount>2||"max"===f.channelCountMode)throw nJ();nO(x,f);let g={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},y=rz(e,{...g,channelInterpretation:"speakers",numberOfInputs:6}),b=nQ(e,{...f,gain:1}),v=nQ(e,{...g,gain:1}),w=nQ(e,{...g,gain:0}),j=nQ(e,{...g,gain:0}),T=nQ(e,{...g,gain:0}),N=nQ(e,{...g,gain:0}),C=nQ(e,{...g,gain:0}),k=nX(e,256,6,1),S=r3(e,{...g,curve:new Float32Array([1,1]),oversample:"none"}),A=[a,o,l],E=[u,h,d],M=new Float32Array(1);k.onaudioprocess=({inputBuffer:e})=>{let t=[n6(e,M,0),n6(e,M,1),n6(e,M,2)];t.some((e,t)=>e!==A[t])&&(x.setOrientation(...t),A=t);let s=[n6(e,M,3),n6(e,M,4),n6(e,M,5)];s.some((e,t)=>e!==E[t])&&(x.setPosition(...s),E=s)},Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(C.gain,"defaultValue",{get:()=>0});let O={get bufferSize(){return},get channelCount(){return x.channelCount},set channelCount(value){if(value>2)throw nJ();b.channelCount=value,x.channelCount=value},get channelCountMode(){return x.channelCountMode},set channelCountMode(value){if("max"===value)throw nJ();b.channelCountMode=value,x.channelCountMode=value},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(value){b.channelInterpretation=value,x.channelInterpretation=value},get coneInnerAngle(){return x.coneInnerAngle},set coneInnerAngle(value){x.coneInnerAngle=value},get coneOuterAngle(){return x.coneOuterAngle},set coneOuterAngle(value){x.coneOuterAngle=value},get coneOuterGain(){return x.coneOuterGain},set coneOuterGain(value){if(value<0||value>1)throw nj();x.coneOuterGain=value},get context(){return x.context},get distanceModel(){return x.distanceModel},set distanceModel(value){x.distanceModel=value},get inputs(){return[b]},get maxDistance(){return x.maxDistance},set maxDistance(value){if(value<0)throw RangeError();x.maxDistance=value},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get orientationX(){return v.gain},get orientationY(){return w.gain},get orientationZ(){return j.gain},get panningModel(){return x.panningModel},set panningModel(value){x.panningModel=value},get positionX(){return T.gain},get positionY(){return N.gain},get positionZ(){return C.gain},get refDistance(){return x.refDistance},set refDistance(value){if(value<0)throw RangeError();x.refDistance=value},get rolloffFactor(){return x.rolloffFactor},set rolloffFactor(value){if(value<0)throw RangeError();x.rolloffFactor=value},addEventListener:(...e)=>b.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>b.dispatchEvent(e[0]),removeEventListener:(...e)=>b.removeEventListener(e[0],e[1],e[2])};return t!==O.coneInnerAngle&&(O.coneInnerAngle=t),s!==O.coneOuterAngle&&(O.coneOuterAngle=s),i!==O.coneOuterGain&&(O.coneOuterGain=i),n!==O.distanceModel&&(O.distanceModel=n),r!==O.maxDistance&&(O.maxDistance=r),a!==O.orientationX.value&&(O.orientationX.value=a),o!==O.orientationY.value&&(O.orientationY.value=o),l!==O.orientationZ.value&&(O.orientationZ.value=l),c!==O.panningModel&&(O.panningModel=c),u!==O.positionX.value&&(O.positionX.value=u),h!==O.positionY.value&&(O.positionY.value=h),d!==O.positionZ.value&&(O.positionZ.value=d),p!==O.refDistance&&(O.refDistance=p),m!==O.rolloffFactor&&(O.rolloffFactor=m),(1!==A[0]||0!==A[1]||0!==A[2])&&x.setOrientation(...A),(0!==E[0]||0!==E[1]||0!==E[2])&&x.setPosition(...E),rV(nU(O,x),()=>{b.connect(x),iU(b,S,0,0),S.connect(v).connect(y,0,0),S.connect(w).connect(y,0,1),S.connect(j).connect(y,0,2),S.connect(T).connect(y,0,3),S.connect(N).connect(y,0,4),S.connect(C).connect(y,0,5),y.connect(k).connect(e.destination)},()=>{b.disconnect(x),iJ(b,S,0,0),S.disconnect(v),v.disconnect(y),S.disconnect(w),w.disconnect(y),S.disconnect(j),j.disconnect(y),S.disconnect(T),T.disconnect(y),S.disconnect(N),N.disconnect(y),S.disconnect(C),C.disconnect(y),y.disconnect(k),k.disconnect(e.destination)})},(e,t)=>{let s=e.createPanner();return void 0===s.orientationX?eo(e,t):(nO(s,t),nI(s,t,"orientationX"),nI(s,t,"orientationY"),nI(s,t,"orientationZ"),nI(s,t,"positionX"),nI(s,t,"positionY"),nI(s,t,"positionZ"),nM(s,t,"coneInnerAngle"),nM(s,t,"coneOuterAngle"),nM(s,t,"coneOuterGain"),nM(s,t,"distanceModel"),nM(s,t,"maxDistance"),nM(s,t,"panningModel"),nM(s,t,"refDistance"),nM(s,t,"rolloffFactor"),s)}),r8=(el=r_,ec=()=>{let e=new WeakMap,t=null,s=async(s,i)=>{let n=null,r=iK(s),a={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation},o={...a,coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,panningModel:r.panningModel,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor},l=ij(r,i);if("bufferSize"in r?n=nQ(i,{...a,gain:1}):l||(r=r6(i,{...o,orientationX:r.orientationX.value,orientationY:r.orientationY.value,orientationZ:r.orientationZ.value,positionX:r.positionX.value,positionY:r.positionY.value,positionZ:r.positionZ.value})),e.set(i,null===n?r:n),null!==n){if(null===t){if(null===rd)throw Error("Missing the native OfflineAudioContext constructor.");let e=new rd(6,s.context.length,i.sampleRate),n=rz(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});n.connect(e.destination),t=(async()=>{let t=await Promise.all([s.orientationX,s.orientationY,s.orientationZ,s.positionX,s.positionY,s.positionZ].map(async(t,s)=>{let i=rW(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await rD(e,t,i.offset),i}));for(let e=0;e<6;e+=1)t[e].connect(n,0,e),t[e].start(0);return rX(e)})()}let e=await t,r=nQ(i,{...a,gain:1});await ru(s,i,r);let l=[];for(let t=0;t<e.numberOfChannels;t+=1)l.push(e.getChannelData(t));let c=[l[0][0],l[1][0],l[2][0]],u=[l[3][0],l[4][0],l[5][0]],h=nQ(i,{...a,gain:1}),d=r6(i,{...o,orientationX:c[0],orientationY:c[1],orientationZ:c[2],positionX:u[0],positionY:u[1],positionZ:u[2]});r.connect(h).connect(d.inputs[0]),d.connect(n);for(let t=128;t<e.length;t+=128){let e=[l[0][t],l[1][t],l[2][t]],s=[l[3][t],l[4][t],l[5][t]];if(e.some((e,t)=>e!==c[t])||s.some((e,t)=>e!==u[t])){c=e,u=s;let l=t/i.sampleRate;h.gain.setValueAtTime(0,l),h=nQ(i,{...a,gain:0}),d=r6(i,{...o,orientationX:c[0],orientationY:c[1],orientationZ:c[2],positionX:u[0],positionY:u[1],positionZ:u[2]}),h.gain.setValueAtTime(1,l),r.connect(h).connect(d.inputs[0]),d.connect(n)}}return n}return l?(await rM(i,s.orientationX,r.orientationX),await rM(i,s.orientationY,r.orientationY),await rM(i,s.orientationZ,r.orientationZ),await rM(i,s.positionX,r.positionX),await rM(i,s.positionY,r.positionY),await rM(i,s.positionZ,r.positionZ)):(await rD(i,s.orientationX,r.orientationX),await rD(i,s.orientationY,r.orientationY),await rD(i,s.orientationZ,r.orientationZ),await rD(i,s.positionX,r.positionX),await rD(i,s.positionY,r.positionY),await rD(i,s.positionZ,r.positionZ)),iG(r)?await ru(s,i,r.inputs[0]):await ru(s,i,r),r};return{render(t,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):s(t,i)}}},class extends el{constructor(e,t){let s=rh(e),i=r6(s,{...n1,...t}),n=rp(s);super(e,!1,i,n?ec():null),this._nativePannerNode=i,this._orientationX=rR(this,n,i.orientationX,34028234663852886e22,-34028234663852886e22),this._orientationY=rR(this,n,i.orientationY,34028234663852886e22,-34028234663852886e22),this._orientationZ=rR(this,n,i.orientationZ,34028234663852886e22,-34028234663852886e22),this._positionX=rR(this,n,i.positionX,34028234663852886e22,-34028234663852886e22),this._positionY=rR(this,n,i.positionY,34028234663852886e22,-34028234663852886e22),this._positionZ=rR(this,n,i.positionZ,34028234663852886e22,-34028234663852886e22),rq(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}}),r9=(eu=(e,{disableNormalization:t,imag:s,real:i})=>{let n=s instanceof Float32Array?s:new Float32Array(s),r=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(r,n,{disableNormalization:t});if(Array.from(s).length<2)throw iN();return a},eh=new WeakSet,ed=e=>{let{imag:t,real:s}=e;return void 0===t?void 0===s?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(s,()=>0),real:s}:void 0===s?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:s}},class e{constructor(e,t){let s=eu(rh(e),ed({...n2,...t}));return eh.add(s),s}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===e.prototype||eh.has(t)}}),r7=(ep=((e,t,s,i,n,r)=>{let a=new Float32Array([1,1]),o=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c={...l,oversample:"none"},u=(e,t,n,r)=>{let u=new Float32Array(16385),h=new Float32Array(16385);for(let e=0;e<16385;e+=1){let t=e/16384*o;u[e]=Math.cos(t),h[e]=Math.sin(t)}let d=s(e,{...l,gain:0}),p=i(e,{...c,curve:u}),m=i(e,{...c,curve:a}),f=s(e,{...l,gain:0}),x=i(e,{...c,curve:h});return{connectGraph(){t.connect(d),t.connect(void 0===m.inputs?m:m.inputs[0]),t.connect(f),m.connect(n),n.connect(void 0===p.inputs?p:p.inputs[0]),n.connect(void 0===x.inputs?x:x.inputs[0]),p.connect(d.gain),x.connect(f.gain),d.connect(r,0,0),f.connect(r,0,1)},disconnectGraph(){t.disconnect(d),t.disconnect(void 0===m.inputs?m:m.inputs[0]),t.disconnect(f),m.disconnect(n),n.disconnect(void 0===p.inputs?p:p.inputs[0]),n.disconnect(void 0===x.inputs?x:x.inputs[0]),p.disconnect(d.gain),x.disconnect(f.gain),d.disconnect(r,0,0),f.disconnect(r,0,1)}}},h=(e,n,r,u)=>{let h=new Float32Array(16385),d=new Float32Array(16385),p=new Float32Array(16385),m=new Float32Array(16385),f=Math.floor(8192.5);for(let e=0;e<16385;e+=1)if(e>f){let t=(e-f)/(16384-f)*o;h[e]=Math.cos(t),d[e]=Math.sin(t),p[e]=0,m[e]=1}else{let t=e/(16384-f)*o;h[e]=1,d[e]=0,p[e]=Math.cos(t),m[e]=Math.sin(t)}let x=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),g=s(e,{...l,gain:0}),y=i(e,{...c,curve:h}),b=s(e,{...l,gain:0}),v=i(e,{...c,curve:d}),w=i(e,{...c,curve:a}),j=s(e,{...l,gain:0}),T=i(e,{...c,curve:p}),N=s(e,{...l,gain:0}),C=i(e,{...c,curve:m});return{connectGraph(){n.connect(x),n.connect(void 0===w.inputs?w:w.inputs[0]),x.connect(g,0),x.connect(b,0),x.connect(j,1),x.connect(N,1),w.connect(r),r.connect(void 0===y.inputs?y:y.inputs[0]),r.connect(void 0===v.inputs?v:v.inputs[0]),r.connect(void 0===T.inputs?T:T.inputs[0]),r.connect(void 0===C.inputs?C:C.inputs[0]),y.connect(g.gain),v.connect(b.gain),T.connect(j.gain),C.connect(N.gain),g.connect(u,0,0),j.connect(u,0,0),b.connect(u,0,1),N.connect(u,0,1)},disconnectGraph(){n.disconnect(x),n.disconnect(void 0===w.inputs?w:w.inputs[0]),x.disconnect(g,0),x.disconnect(b,0),x.disconnect(j,1),x.disconnect(N,1),w.disconnect(r),r.disconnect(void 0===y.inputs?y:y.inputs[0]),r.disconnect(void 0===v.inputs?v:v.inputs[0]),r.disconnect(void 0===T.inputs?T:T.inputs[0]),r.disconnect(void 0===C.inputs?C:C.inputs[0]),y.disconnect(g.gain),v.disconnect(b.gain),T.disconnect(j.gain),C.disconnect(N.gain),g.disconnect(u,0,0),j.disconnect(u,0,0),b.disconnect(u,0,1),N.disconnect(u,0,1)}}},d=(e,t,s,i,r)=>{if(1===t)return u(e,s,i,r);if(2===t)return h(e,s,i,r);throw n()};return(t,{channelCount:i,channelCountMode:a,pan:o,...l})=>{if("max"===a)throw n();let c=e(t,{...l,channelCount:1,channelCountMode:a,numberOfInputs:2}),u=s(t,{...l,channelCount:i,channelCountMode:a,gain:1}),h=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:o}),{connectGraph:p,disconnectGraph:m}=d(t,i,u,h,c);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});let f=!1;return r(nU({get bufferSize(){return},get channelCount(){return u.channelCount},set channelCount(value){u.channelCount!==value&&(f&&m(),{connectGraph:p,disconnectGraph:m}=d(t,value,u,h,c),f&&p()),u.channelCount=value},get channelCountMode(){return u.channelCountMode},set channelCountMode(value){if("clamped-max"===value||"max"===value)throw n();u.channelCountMode=value},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(value){u.channelInterpretation=value},get context(){return u.context},get inputs(){return[u]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get pan(){return h.gain},addEventListener:(...e)=>u.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>u.dispatchEvent(e[0]),removeEventListener:(...e)=>u.removeEventListener(e[0],e[1],e[2])},c),()=>{p(),f=!0},()=>{m(),f=!1})}})(rz,nG,nQ,r3,nJ,rV),(e,t)=>{let s=t.channelCountMode;if("clamped-max"===s)throw nJ();if(void 0===e.createStereoPanner)return ep(e,t);let i=e.createStereoPanner();return nO(i,t),nI(i,t,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:e=>{if(e!==s)throw nJ()}}),i}),ae=(em=r_,ef=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t),n=ij(i,s);return n||(i=r7(s,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,pan:i.pan.value})),e.set(s,i),n?await rM(s,t.pan,i.pan):await rD(s,t.pan,i.pan),iG(i)?await ru(t,s,i.inputs[0]):await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},class extends em{constructor(e,t){let s=rh(e),i=r7(s,{...n4,...t}),n=rp(s);super(e,!1,i,n?ef():null),this._pan=rR(this,n,i.pan)}get pan(){return this._pan}}),at=(ex=r_,eg=()=>{let e=new WeakMap,t=async(t,s)=>{let i=iK(t);return ij(i,s)||(i=r3(s,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,curve:i.curve,oversample:i.oversample})),e.set(s,i),iG(i)?await ru(t,s,i.inputs[0]):await ru(t,s,i),i};return{render(s,i){let n=e.get(i);return void 0!==n?Promise.resolve(n):t(s,i)}}},class extends ex{constructor(e,t){let s=rh(e),i=r3(s,{...n3,...t});super(e,!0,i,rp(s)?eg():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=i,rq(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw nj();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}}),as=null!==ro&&ro.isSecureContext,ai=(e,t,s)=>{Object.defineProperties(ro,{currentFrame:{configurable:!0,get:()=>Math.round(e*t)},currentTime:{configurable:!0,get:()=>e}});try{return s()}finally{null!==ro&&(delete ro.currentFrame,delete ro.currentTime)}},an=new WeakMap,ar=as?((e,t,s,i,n,r,a,o,l,c,u,h,d)=>{let p=0;return(m,f,x={credentials:"omit"})=>{let g=u.get(m);if(void 0!==g&&g.has(f))return Promise.resolve();let y=c.get(m);if(void 0!==y){let e=y.get(f);if(void 0!==e)return e}let b=r(m),v=void 0===b.audioWorklet?n(f).then(([e,t])=>{let[i,n]=iu(e,t);return s(`${i};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${n}
})})(window,'_AWGS')`)}).then(()=>{let e=d._AWGS.pop();if(void 0===e)throw SyntaxError();i(b.currentTime,b.sampleRate,()=>e(class{},void 0,(e,s)=>{if(""===e.trim())throw t();let i=ir.get(b);if(void 0!==i){if(i.has(e))throw t();id(s),ih(s.parameterDescriptors),i.set(e,s)}else id(s),ih(s.parameterDescriptors),ir.set(b,new Map([[e,s]]))},b.sampleRate,void 0,void 0))}):Promise.all([n(f),Promise.resolve(e(h,h))]).then(([[e,t],s])=>{let i=p+1;p=i;let[n,r]=iu(e,t),c=new Blob([`${n};((AudioWorkletProcessor,registerProcessor)=>{${r}
})(${s?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${s?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${s?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${i}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(c);return b.audioWorklet.addModule(u,x).then(()=>{if(o(b))return b;let e=a(b);return e.audioWorklet.addModule(u,x).then(()=>e)}).then(e=>{if(null===l)throw SyntaxError();try{new l(e,`__sac${i}`)}catch{throw SyntaxError()}}).finally(()=>URL.revokeObjectURL(u))});return void 0===y?c.set(m,new Map([[f,v]])):y.set(f,v),v.then(()=>{let e=u.get(m);void 0===e?u.set(m,new Set([f])):e.add(f)}).finally(()=>{let e=c.get(m);void 0!==e&&e.delete(f)}),v}})(ra,nJ,e=>new Promise((t,s)=>{if(null===ro){s(SyntaxError());return}let i=ro.document.head;if(null===i)s(SyntaxError());else{let n=ro.document.createElement("script"),r=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(r),o=ro.onerror,l=()=>{ro.onerror=o,URL.revokeObjectURL(a)};ro.onerror=(e,t,i,n,r)=>t===a||t===ro.location.href&&1===i&&1===n?(l(),s(r),!1):null!==o?o(e,t,i,n,r):void 0,n.onerror=()=>{l(),s(SyntaxError())},n.onload=()=>{l(),t()},n.src=a,n.type="module",i.appendChild(n)}}),ai,(ey=()=>new DOMException("","AbortError"),async e=>{try{let t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw ey()}),rh,e=>{let t=an.get(e);if(void 0!==t)return t;if(null===rd)throw Error("Missing the native OfflineAudioContext constructor.");return t=new rd(1,1,44100),an.set(e,t),t},rp,rv,new WeakMap,new WeakMap,async()=>{if(null===rv)return!0;if(null===rd)return!1;let e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),t=new rd(1,128,44100),s=URL.createObjectURL(e),i=!1,n=!1;try{await t.audioWorklet.addModule(s);let e=new rv(t,"a",{numberOfOutputs:0}),r=t.createOscillator();e.port.onmessage=()=>i=!0,e.onprocessorerror=()=>n=!0,r.connect(e),r.start(0),await t.startRendering(),await new Promise(e=>setTimeout(e))}catch{}finally{URL.revokeObjectURL(s)}return i&&!n},ro):void 0,aa=(eb=()=>new DOMException("","DataCloneError"),ev=()=>new DOMException("","EncodingError"),e_=new WeakSet,ew=e=>rg(e)||rp(e),(e,t)=>{let s=ew(e)?e:rh(e);if(e_.has(t))return Promise.reject(eb());try{e_.add(t)}catch{}return ra(nE,()=>nE(s))?s.decodeAudioData(t).then(e=>(ng(t).catch(()=>{}),ra(iT,()=>iT(e))||rk(e),rj.add(e),e)):new Promise((e,i)=>{let n=async()=>{try{await ng(t)}catch{}},r=e=>{i(e),n()};try{s.decodeAudioData(t,t=>{"function"!=typeof t.copyFromChannel&&(rC(t),iC(t)),rj.add(t),n().then(()=>e(t))},e=>{null===e?r(ev()):r(e)})}catch(e){r(e)}})}),ao=(ej=r1,class extends ej{constructor(e,t){super(e,t),this._nativeContext=e,this._audioWorklet=void 0===ar?void 0:{addModule:(e,t)=>ar(this,e,t)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new rw(this)}createBiquadFilter(){return new rF(this)}createBuffer(e,t,s){return new rS({length:t,numberOfChannels:e,sampleRate:s})}createBufferSource(){return new rI(this)}createChannelMerger(e=6){return new rL(this,{numberOfInputs:e})}createChannelSplitter(e=6){return new rB(this,{numberOfOutputs:e})}createConstantSource(){return new rZ(this)}createConvolver(){return new rG(this)}createDelay(e=1){return new rU(this,{maxDelayTime:e})}createDynamicsCompressor(){return new rQ(this)}createGain(){return new rY(this)}createIIRFilter(e,t){return new rK(this,{feedback:t,feedforward:e})}createOscillator(){return new r4(this)}createPanner(){return new r8(this)}createPeriodicWave(e,t,s={disableNormalization:!1}){return new r9(this,{...s,imag:t,real:e})}createStereoPanner(){return new ae(this)}createWaveShaper(){return new at(this)}decodeAudioData(e,t,s){return aa(this._nativeContext,e).then(e=>("function"==typeof t&&t(e),e),e=>{throw"function"==typeof s&&s(e),e})}}),al=(eT=r_,eN=(e,t)=>e.createMediaElementSource(t.mediaElement),class extends eT{constructor(e,t){let s=rh(e),i=eN(s,t);if(rp(s))throw TypeError();super(e,!0,i,null),this._nativeMediaElementAudioSourceNode=i}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}}),ac=(eC=r_,ek=(e,t)=>{let s=e.createMediaStreamDestination();return nO(s,t),1===s.numberOfOutputs&&Object.defineProperty(s,"numberOfOutputs",{get:()=>0}),s},class extends eC{constructor(e,t){let s=rh(e);if(rp(s))throw TypeError();let i=ek(s,{...nA,...t});super(e,!1,i,null),this._nativeMediaStreamAudioDestinationNode=i}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}}),au=(eS=r_,eA=(e,{mediaStream:t})=>{let s=t.getAudioTracks();s.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0);let i=s.slice(0,1),n=e.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(n,"mediaStream",{value:t}),n},class extends eS{constructor(e,t){let s=rh(e),i=eA(s,t);if(rp(s))throw TypeError();super(e,!0,i,null),this._nativeMediaStreamAudioSourceNode=i}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}),ah=(eE=r_,eM=(e,{mediaStreamTrack:t})=>{if("function"==typeof e.createMediaStreamTrackSource)return e.createMediaStreamTrackSource(t);let s=new MediaStream([t]),i=e.createMediaStreamSource(s);if("audio"!==t.kind)throw nj();if(rp(e))throw TypeError();return i},class extends eE{constructor(e,t){super(e,!0,eM(rh(e),t),null)}}),ad=(eO=ao,class extends eO{constructor(e={}){let t;if(null===rx)throw Error("Missing the native AudioContext constructor.");try{t=new rx(e)}catch(e){if(12===e.code&&"sampleRate is not in range"===e.message)throw nJ();throw e}if(null===t)throw n5();if(!iz(e.latencyHint))throw TypeError(`The provided value '${e.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==e.sampleRate&&t.sampleRate!==e.sampleRate)throw nJ();super(t,2);let{latencyHint:s}=e,{sampleRate:i}=t;if(this._baseLatency="number"==typeof t.baseLatency?t.baseLatency:"balanced"===s?512/i:"interactive"===s||void 0===s?256/i:"playback"===s?1024/i:128*Math.max(2,Math.min(128,Math.round(s*i/128)))/i,this._nativeAudioContext=t,"webkitAudioContext"===rx.name?(this._nativeGainNode=t.createGain(),this._nativeOscillatorNode=t.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(t.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===t.state){this._state="suspended";let e=()=>{"suspended"===this._state&&(this._state=null),t.removeEventListener("statechange",e)};t.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw nj()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),iV(this)}))}createMediaElementSource(e){return new al(this,{mediaElement:e})}createMediaStreamDestination(){return new ac(this)}createMediaStreamSource(e){return new au(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new ah(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise((e,t)=>{let s=()=>{this._nativeAudioContext.removeEventListener("statechange",s),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",s)}):this._nativeAudioContext.resume().catch(e=>{if(void 0===e||15===e.code)throw nj();throw e})}suspend(){return this._nativeAudioContext.suspend().catch(e=>{if(void 0===e)throw nj();throw e})}}),ap=e=>{let t=r0.get(e);if(void 0===t)throw Error("The context has no set of AudioWorkletNodes.");return t},am=(e,t,s=0,i=0)=>{let n=e[s];if(void 0===n)throw iN();return i3(t)?n.connect(t,0,i):n.connect(t,0)},af=(e,t,s,i=0)=>void 0===t?e.forEach(e=>e.disconnect()):"number"==typeof t?nv(iN,e,t).disconnect():i3(t)?void 0===s?e.forEach(e=>e.disconnect(t)):void 0===i?nv(iN,e,s).disconnect(t,0):nv(iN,e,s).disconnect(t,0,i):void 0===s?e.forEach(e=>e.disconnect(t)):nv(iN,e,s).disconnect(t,0),ax=new WeakMap,ag=(eD=e=>ip(ax,e),(e,t,s,i)=>{let n,r;if(0===i.numberOfInputs&&0===i.numberOfOutputs)throw nJ();let a=Array.isArray(i.outputChannelCount)?i.outputChannelCount:Array.from(i.outputChannelCount);if(a.some(e=>e<1))throw nJ();if(a.length!==i.numberOfOutputs)throw iN();if("explicit"!==i.channelCountMode)throw nJ();let o=i.channelCount*i.numberOfInputs,l=a.reduce((e,t)=>e+t,0),c=void 0===s.parameterDescriptors?0:s.parameterDescriptors.length;if(o+c>6||l>6)throw nJ();let u=new MessageChannel,h=[],d=[];for(let t=0;t<i.numberOfInputs;t+=1)h.push(nQ(e,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1})),d.push(nG(e,{channelCount:i.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:i.channelCount}));let p=[];if(void 0!==s.parameterDescriptors)for(let{defaultValue:t,maxValue:n,minValue:r,name:a}of s.parameterDescriptors){let s=rW(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==i.parameterData[a]?i.parameterData[a]:void 0===t?0:t});Object.defineProperties(s.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===n?34028234663852886e22:n},minValue:{get:()=>void 0===r?-34028234663852886e22:r}}),p.push(s)}let m=rz(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,o+c)}),f=nz(t,e.sampleRate),x=nX(e,f,o+c,Math.max(1,l)),g=nG(e,{channelCount:Math.max(1,l),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,l)}),y=[];for(let t=0;t<i.numberOfOutputs;t+=1)y.push(rz(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:a[t]}));for(let e=0;e<i.numberOfInputs;e+=1){h[e].connect(d[e]);for(let t=0;t<i.channelCount;t+=1)d[e].connect(m,t,e*i.channelCount+t)}let b=new nr(void 0===s.parameterDescriptors?[]:s.parameterDescriptors.map(({name:e},t)=>{let s=p[t];return s.connect(m,0,o+t),s.start(0),[e,s.offset]}));m.connect(x);let v=i.channelInterpretation,w=null,j=0===i.numberOfOutputs?[x]:y,T={get bufferSize(){return f},get channelCount(){return i.channelCount},set channelCount(_){throw nj()},get channelCountMode(){return i.channelCountMode},set channelCountMode(_){throw nj()},get channelInterpretation(){return v},set channelInterpretation(value){for(let e of h)e.channelInterpretation=value;v=value},get context(){return x.context},get inputs(){return h},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return i.numberOfOutputs},get onprocessorerror(){return w},set onprocessorerror(value){"function"==typeof w&&T.removeEventListener("processorerror",w),"function"==typeof(w="function"==typeof value?value:null)&&T.addEventListener("processorerror",w)},get parameters(){return b},get port(){return u.port2},addEventListener:(...e)=>x.addEventListener(e[0],e[1],e[2]),connect:am.bind(null,j),disconnect:af.bind(null,j),dispatchEvent:(...e)=>x.dispatchEvent(e[0]),removeEventListener:(...e)=>x.removeEventListener(e[0],e[1],e[2])},N=new Map;u.port1.addEventListener=(n=u.port1.addEventListener,(...t)=>{if("message"===t[0]){let s="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==s){let i=N.get(t[1]);void 0!==i?t[1]=i:(t[1]=t=>{ai(e.currentTime,e.sampleRate,()=>s(t))},N.set(s,t[1]))}}return n.call(u.port1,t[0],t[1],t[2])}),u.port1.removeEventListener=(r=u.port1.removeEventListener,(...e)=>{if("message"===e[0]){let t=N.get(e[1]);void 0!==t&&(N.delete(e[1]),e[1]=t)}return r.call(u.port1,e[0],e[1],e[2])});let C=null;Object.defineProperty(u.port1,"onmessage",{get:()=>C,set:e=>{"function"==typeof C&&u.port1.removeEventListener("message",C),"function"==typeof(C="function"==typeof e?e:null)&&(u.port1.addEventListener("message",C),u.port1.start())}}),s.prototype.port=u.port1;let k=null;nW(e,T,s,i).then(e=>k=e);let S=nc(i.numberOfInputs,i.channelCount),A=nc(i.numberOfOutputs,a),E=void 0===s.parameterDescriptors?[]:s.parameterDescriptors.reduce((e,{name:t})=>({...e,[t]:new Float32Array(128)}),{}),M=!0,O=()=>{i.numberOfOutputs>0&&x.disconnect(g);for(let e=0,t=0;e<i.numberOfOutputs;e+=1){let s=y[e];for(let i=0;i<a[e];i+=1)g.disconnect(s,t+i,i);t+=a[e]}},D=new Map;x.onaudioprocess=({inputBuffer:t,outputBuffer:n})=>{if(null!==k){let r=eD(T);for(let l=0;l<f;l+=128){for(let e=0;e<i.numberOfInputs;e+=1)for(let s=0;s<i.channelCount;s+=1)no(t,S[e],s,s,l);void 0!==s.parameterDescriptors&&s.parameterDescriptors.forEach(({name:e},s)=>{no(t,E,e,o+s,l)});for(let e=0;e<i.numberOfInputs;e+=1)for(let t=0;t<a[e];t+=1)0===A[e][t].byteLength&&(A[e][t]=new Float32Array(128));try{let t=S.map((e,t)=>{if(r[t].size>0)return D.set(t,f/128),e;let s=D.get(t);return void 0===s?[]:(e.every(e=>e.every(e=>0===e))&&(1===s?D.delete(t):D.set(t,s-1)),e)});M=ai(e.currentTime+l/e.sampleRate,e.sampleRate,()=>k.process(t,A,E));for(let e=0,t=0;e<i.numberOfOutputs;e+=1){for(let s=0;s<a[e];s+=1)nl(n,A[e],s,t+s,l);t+=a[e]}}catch(e){M=!1,T.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}))}if(!M){for(let e=0;e<i.numberOfInputs;e+=1){h[e].disconnect(d[e]);for(let t=0;t<i.channelCount;t+=1)d[l].disconnect(m,t,e*i.channelCount+t)}if(void 0!==s.parameterDescriptors){let e=s.parameterDescriptors.length;for(let t=0;t<e;t+=1){let e=p[t];e.disconnect(m,0,o+t),e.stop()}}m.disconnect(x),x.onaudioprocess=null,R?O():q();break}}}};let R=!1,I=nQ(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),P=()=>x.connect(I).connect(e.destination),q=()=>{x.disconnect(I),I.disconnect()};return P(),rV(T,()=>{if(M){q(),i.numberOfOutputs>0&&x.connect(g);for(let e=0,t=0;e<i.numberOfOutputs;e+=1){let s=y[e];for(let i=0;i<a[e];i+=1)g.connect(s,t+i,i);t+=a[e]}}R=!0},()=>{M&&(P(),O()),R=!1})}),ay=(eR=(e,t)=>{ap(e).delete(t)},(e,t,s)=>{let i=new WeakMap,n=null,r=async(r,a)=>{let o=iK(r),l=null,c=ij(o,a),u=Array.isArray(t.outputChannelCount)?t.outputChannelCount:Array.from(t.outputChannelCount);if(null===rv){let e=u.reduce((e,t)=>e+t,0),s=nG(a,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),i=[];for(let e=0;e<r.numberOfOutputs;e+=1)i.push(rz(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:u[e]}));let n=nQ(a,{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation,gain:1});n.connect=am.bind(null,i),n.disconnect=af.bind(null,i),l=[s,i,n]}else c||(o=new rv(a,e));if(i.set(a,null===l?o:l[2]),null!==l){if(null===n){if(void 0===s)throw Error("Missing the processor constructor.");if(null===rd)throw Error("Missing the native OfflineAudioContext constructor.");let e=r.channelCount*r.numberOfInputs,i=void 0===s.parameterDescriptors?0:s.parameterDescriptors.length,o=e+i,l=async()=>{let s=new rd(o,128*Math.ceil(r.context.length/128),a.sampleRate),n=[],l=[];for(let e=0;e<t.numberOfInputs;e+=1)n.push(nQ(s,{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation,gain:1})),l.push(nG(s,{channelCount:t.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:t.channelCount}));let c=await Promise.all(Array.from(r.parameters.values()).map(async e=>{let t=rW(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await rD(s,e,t.offset),t})),u=rz(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+i)});for(let e=0;e<t.numberOfInputs;e+=1){n[e].connect(l[e]);for(let s=0;s<t.channelCount;s+=1)l[e].connect(u,s,e*t.channelCount+s)}for(let[t,s]of c.entries())s.connect(u,0,e+t),s.start(0);return u.connect(s.destination),await Promise.all(n.map(e=>ru(r,s,e))),rX(s)};n=nh(r,0===o?null:await l(),a,t,u,s,ai)}let e=await n,i=rO(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[o,c,h]=l;null!==e&&(i.buffer=e,i.start(0)),i.connect(o);for(let e=0,t=0;e<r.numberOfOutputs;e+=1){let s=c[e];for(let i=0;i<u[e];i+=1)o.connect(s,t+i,i);t+=u[e]}return h}if(c)for(let[e,t]of r.parameters.entries())await rM(a,t,o.parameters.get(e));else for(let[e,t]of r.parameters.entries())await rD(a,t,o.parameters.get(e));return await ru(r,a,o),o};return{render(e,t){eR(t,e);let s=i.get(t);return void 0!==s?Promise.resolve(s):r(e,t)}}}),ab=as?(eI=(e,t)=>{ap(e).add(t)},eP=r_,eq=(e,t,s,i,n,r)=>{if(null!==s)try{let t,n;let a=new s(e,i,r),o=new Map,l=null;if(Object.defineProperties(a,{channelCount:{get:()=>r.channelCount,set:()=>{throw nj()}},channelCountMode:{get:()=>"explicit",set:()=>{throw nj()}},onprocessorerror:{get:()=>l,set:e=>{"function"==typeof l&&a.removeEventListener("processorerror",l),l="function"==typeof e?e:null,"function"==typeof l&&a.addEventListener("processorerror",l)}}}),a.addEventListener=(t=a.addEventListener,(...e)=>{if("processorerror"===e[0]){let t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){let s=o.get(e[1]);void 0!==s?e[1]=s:(e[1]=s=>{"error"===s.type?(Object.defineProperties(s,{type:{value:"processorerror"}}),t(s)):t(new ErrorEvent(e[0],{...s}))},o.set(t,e[1]))}}return t.call(a,"error",e[1],e[2]),t.call(a,...e)}),a.removeEventListener=(n=a.removeEventListener,(...e)=>{if("processorerror"===e[0]){let t=o.get(e[1]);void 0!==t&&(o.delete(e[1]),e[1]=t)}return n.call(a,"error",e[1],e[2]),n.call(a,e[0],e[1],e[2])}),0!==r.numberOfOutputs){let t=nQ(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return a.connect(t).connect(e.destination),rV(a,()=>t.disconnect(),()=>t.connect(e.destination))}return a}catch(e){if(11===e.code)throw nJ();throw e}if(void 0===n)throw nJ();return nV(r),ag(e,t,n,r)},eF=e=>an.get(e),eV=e=>({...e,outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),ez=(e,t)=>{ax.set(e,t)},eL=e=>{let{port1:t,port2:s}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),s.close()}},class extends eP{constructor(e,t,s){var i;let n=rh(e),r=rp(n),a=eV({...na,...s});eL(a);let o=ir.get(n),l=null==o?void 0:o.get(t),c=eq(r||"closed"!==n.state?n:null!==(i=eF(n))&&void 0!==i?i:n,r?null:e.baseLatency,rv,t,l,a);super(e,!0,c,r?ay(t,a,l):null);let u=[];c.parameters.forEach((e,t)=>{let s=rR(this,r,e);u.push([t,s])}),this._nativeAudioWorkletNode=c,this._onprocessorerror=null,this._parameters=new nr(u),r&&eI(n,this);let{activeInputs:h}=iP(this);ez(c,h)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){let t="function"==typeof e?rn(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;let s=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==s&&s===t?e:s}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}}):void 0,av=(e,t,s)=>{if(null===rd)throw Error("Missing the native OfflineAudioContext constructor.");try{return new rd(e,t,s)}catch(e){if("SyntaxError"===e.name)throw nJ();throw e}},a_=(e,t)=>rc(e).render(e,t).then(()=>Promise.all(Array.from(ap(t)).map(e=>rc(e).render(e,t)))).then(()=>rX(t)).then(e=>("function"!=typeof e.copyFromChannel?(rC(e),iC(e)):ra(iT,()=>iT(e))||rk(e),rj.add(e),e)),aw=(eB=ao,class extends eB{constructor(e,t,s){let i;if("number"==typeof e&&void 0!==t&&void 0!==s)i={length:t,numberOfChannels:e,sampleRate:s};else if("object"==typeof e)i=e;else throw Error("The given parameters are not valid.");let{length:n,numberOfChannels:r,sampleRate:a}={...nK,...i},o=av(r,n,a);ra(nE,()=>nE(o))||o.addEventListener("statechange",(()=>{let e=0,t=s=>{"running"===this._state&&(e>0?(o.removeEventListener("statechange",t),s.stopImmediatePropagation(),this._waitForThePromiseToSettle(s)):e+=1)};return t})()),super(o,r),this._length=n,this._nativeOfflineAudioContext=o,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(nj()):(this._state="running",a_(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,iV(this)}))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout(()=>this._waitForThePromiseToSettle(e))}}),aj=e=>rg(it.get(e))||rg(e),aT=e=>s9.has(e)||ry(e),aN=e=>ie.has(e)||rb(e),aC=e=>rp(it.get(e))||rp(e);function ak(e){return void 0===e}function aS(e){return void 0!==e}function aA(e){return"number"==typeof e}function aE(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object}function aM(e){return Array.isArray(e)}function aO(e){return"string"==typeof e}function aD(e){return aO(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function aR(e,t){if(!e)throw Error(t)}function aI(e,t,s=1/0){if(!(t<=e&&e<=s))throw RangeError(`Value must be within [${t}, ${s}], got: ${e}`)}function aP(e){e.isOffline||"running"===e.state||az('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let aq=!1,aF=!1,aV=console;function az(...e){aV.warn(...e)}let aL="object"==typeof self?self:null,aB=aL&&(aL.hasOwnProperty("AudioContext")||aL.hasOwnProperty("webkitAudioContext"));var aW=s(5826);class aZ{constructor(e,t,s,i){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){let e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=new Worker(URL.createObjectURL(e));t.onmessage=this._callback.bind(this),this._worker=t}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(e){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),"worker"===this._type&&(null===(t=this._worker)||void 0===t||t.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function aH(e,...t){if(!t.length)return e;let s=t.shift();if(aE(e)&&aE(s))for(let t in s){var i;(i=s[t],"value"===t||aN(i)||aT(i)||i instanceof rS)?e[t]=s[t]:aE(s[t])?(e[t]||Object.assign(e,{[t]:{}}),aH(e[t],s[t])):Object.assign(e,{[t]:s[t]})}return aH(e,...t)}function aG(e,t,s=[],i){let n={},r=Array.from(t);if(aE(r[0])&&i&&!Reflect.has(r[0],i)&&!Object.keys(r[0]).some(t=>Reflect.has(e,t))&&(aH(n,{[i]:r[0]}),s.splice(s.indexOf(i),1),r.shift()),1===r.length&&aE(r[0]))aH(n,r[0]);else for(let e=0;e<s.length;e++)aS(r[e])&&(n[s[e]]=r[e]);return aH(e,n)}function aU(e,t){return t.forEach(t=>{Reflect.has(e,t)&&delete e[t]}),e}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class a${constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||aL&&this.toString()===aL.TONE_DEBUG_CLASS)&&function(...e){aV.log(...e)}(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}function aQ(e,t){return e>t+1e-6}function aY(e,t){return aQ(e,t)||aJ(e,t)}function aX(e,t){return e+1e-6<t}function aJ(e,t){return 1e-6>Math.abs(e-t)}a$.version=sF;class aK extends a${constructor(){super(),this.name="Timeline",this._timeline=[];let e=aG(aK.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(aR(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){let t=this._timeline[this.length-1];aR(aY(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{let t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){let e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(e){let t=this._timeline.indexOf(e);return -1!==t&&this._timeline.splice(t,1),this}get(e,t="time"){let s=this._search(e,t);return -1!==s?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){let s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){let t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];let s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0){if(aJ(this._timeline[t].time,e)){for(let s=t;s>=0;s--)if(aJ(this._timeline[s].time,e))t=s;else break;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1)}else this._timeline=[]}else 1===this._timeline.length&&aY(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){let t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){let t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(0===this._timeline.length)return -1;let s=0,i=this._timeline.length,n=i;if(i>0&&this._timeline[i-1][t]<=e)return i-1;for(;s<n;){let i=Math.floor(s+(n-s)/2),r=this._timeline[i],a=this._timeline[i+1];if(aJ(r[t],e)){for(let s=i;s<this._timeline.length;s++)if(aJ(this._timeline[s][t],e))i=s;else break;return i}if(aX(r[t],e)&&aQ(a[t],e))return i;aQ(r[t],e)?n=i:s=i+1}return -1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){let s=this._search(e);return -1!==s&&this._iterate(t,0,s),this}forEachAfter(e,t){let s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let i=this._search(e),n=this._search(t);return -1!==i&&-1!==n?(this._timeline[i].time!==e&&(i+=1),this._timeline[n].time===t&&(n-=1),this._iterate(s,i,n)):-1===i&&this._iterate(s,0,n),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){let s=this._search(e);if(-1!==s&&aJ(this._timeline[s].time,e)){let i=s;for(let t=s;t>=0;t--)if(aJ(this._timeline[t].time,e))i=t;else break;this._iterate(e=>{t(e)},i,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}let a0=[];function a1(e){a0.push(e)}let a2=[];function a4(e){a2.push(e)}class a5 extends a${constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(e=>{ak(this._events)&&(this._events={}),this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(t)}),this}once(e,t){let s=(...i)=>{t(...i),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(e=>{if(ak(this._events)&&(this._events={}),this._events.hasOwnProperty(e)){if(ak(t))this._events[e]=[];else{let s=this._events[e];for(let e=s.length-1;e>=0;e--)s[e]===t&&s.splice(e,1)}}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){let s=this._events[e].slice(0);for(let e=0,i=s.length;e<i;e++)s[e].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{let s=Object.getOwnPropertyDescriptor(a5.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class a3 extends a5{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class a6 extends a3{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new aK,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;let s=aG(a6.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=(null===(e=arguments[0])||void 0===e?void 0:e.latencyHint)||""):(this._context=new ad({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new aZ(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(t=arguments[0])||void 0===t?void 0:t.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){if(!this._initialized){var e;e=this,a0.forEach(t=>t(e)),this._initialized=!0}return this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return aR(aj(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return aR(aj(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return aR(aj(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){aR(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){aR(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){aR(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){aR(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){var s;return s=this.rawContext,aR(aS(ab),"AudioWorkletNode only works in a secure context (https or localhost)"),new(s instanceof(null==aL?void 0:aL.BaseAudioContext)?null==aL?void 0:aL.AudioWorkletNode:ab)(s,e,t)}addAudioWorkletModule(e){return(0,aW.mG)(this,void 0,void 0,function*(){aR(aS(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return(0,aW.mG)(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return aj(this._context)?this._context.resume():Promise.resolve()}close(){return(0,aW.mG)(this,void 0,void 0,function*(){if(aj(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized){var e;e=this,a2.forEach(t=>t(e))}})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{let t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let t=0;t<s.length;t++)s[t]=e;let i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=t,i.loop=!0,i.start(0),this._constants.set(e,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){let e=this.now();this._timeouts.forEachBefore(e,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(e,t){this._timeoutIds++;let s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){let s=++this._timeoutIds,i=()=>{let n=this.now();this._timeouts.add({callback:()=>{e(),i()},id:s,time:n+t})};return i(),s}}class a8 extends a3{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return(0,aW.mG)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function a9(e,t){aM(t)?t.forEach(t=>a9(e,t)):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}let a7=()=>{};class oe extends a${constructor(){super(),this.name="ToneAudioBuffer",this.onload=a7;let e=aG(oe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,aO(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:a7,onload:a7,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:on().sampleRate}set(e){return e instanceof oe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return(0,aW.mG)(this,void 0,void 0,function*(){let t=oe.load(e).then(e=>{this.set(e),this.onload(this)});oe.downloads.push(t);try{yield t}finally{let e=oe.downloads.indexOf(t);oe.downloads.splice(e,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){let t=aM(e)&&e[0].length>0,s=t?e.length:1,i=t?e[0].length:e.length,n=on(),r=n.createBuffer(s,i,n.sampleRate),a=t||1!==s?e:[e];for(let e=0;e<s;e++)r.copyToChannel(a[e],e);return this._buffer=r,this}toMono(e){if(aA(e))this.fromArray(this.toArray(e));else{let e=new Float32Array(this.length),t=this.numberOfChannels;for(let s=0;s<t;s++){let t=this.toArray(s);for(let s=0;s<t.length;s++)e[s]+=t[s]}e=e.map(e=>e/t),this.fromArray(e)}return this}toArray(e){if(aA(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{let e=[];for(let t=0;t<this.numberOfChannels;t++)e[t]=this.getChannelData(t);return e}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){aR(this.loaded,"Buffer is not loaded");let s=Math.floor(e*this.sampleRate),i=Math.floor(t*this.sampleRate);aR(s<i,"The start time must be less than the end time");let n=on().createBuffer(this.numberOfChannels,i-s,this.sampleRate);for(let e=0;e<this.numberOfChannels;e++)n.copyToChannel(this.getChannelData(e).subarray(s,i),e);return new oe(n)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new oe().fromArray(e)}static fromUrl(e){return(0,aW.mG)(this,void 0,void 0,function*(){let t=new oe;return yield t.load(e)})}static load(e){return(0,aW.mG)(this,void 0,void 0,function*(){let t=""===oe.baseUrl||oe.baseUrl.endsWith("/")?oe.baseUrl:oe.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw Error(`could not load url: ${e}`);let i=yield s.arrayBuffer();return yield on().decodeAudioData(i)})}static supportsType(e){let t=e.split("."),s=t[t.length-1];return""!==document.createElement("audio").canPlayType("audio/"+s)}static loaded(){return(0,aW.mG)(this,void 0,void 0,function*(){for(yield Promise.resolve();oe.downloads.length;)yield oe.downloads[0]})}}oe.baseUrl="",oe.downloads=[];class ot extends a6{constructor(){var e,t,s,i,n,r;super({clockSource:"offline",context:(e=arguments[0],aC(e))?arguments[0]:(t=arguments[0],s=arguments[1]*arguments[2],i=arguments[2],new aw(t,s,i)),lookAhead:0,updateInterval:(n=arguments[0],aC(n))?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,r=arguments[0],this._duration=aC(r)?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return(0,aW.mG)(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;let s=Math.floor(this.sampleRate/128);e&&t%s==0&&(yield new Promise(e=>setTimeout(e,1)))}})}render(){return(0,aW.mG)(this,arguments,void 0,function*(e=!0){return yield this.workletsAreReady(),yield this._renderClock(e),new oe((yield this._context.startRendering()))})}close(){return Promise.resolve()}}let os=new a8,oi=os;function on(){return oi===os&&aB&&function(e,t=!1){t&&oi.dispose(),oi=aj(e)?new a6(e):aC(e)?new ot(e):e}(new a6),oi}if(aL&&!aL.TONE_SILENCE_LOGGING){let e=` * Tone.js v${sF} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function or(e){return Math.pow(2,e/12)}let oa=440;function oo(e){return Math.round(ol(e))}function ol(e){return 69+12*Math.log2(e/oa)}function oc(e){return oa*Math.pow(2,(e-69)/12)}class ou extends a${constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{let s=parseInt(e,10),i="."===t?1.5:1;return 1===s?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/s)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{let t=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(t)))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let i=0;return e&&"0"!==e&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(i+=this._beatsToUnits(parseFloat(t))),s&&"0"!==s&&(i+=this._beatsToUnits(parseFloat(s)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof ou&&this.fromType(this._val),ak(this._val))return this._noArg();if(aO(this._val)&&ak(this._units)){for(let e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(aE(this._val)){let e=0;for(let t in this._val)if(aS(this._val[t])){let s=this._val[t];e+=new this.constructor(this.context,t).valueOf()*s}return e}if(aS(this._units)){let e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}return aO(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class oh extends ou{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{let t=new oh(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){let s=new this.constructor(this.context,e).valueOf(),i=this.valueOf();return i+(Math.round(i/s)*s-i)*t}toNotation(){let e=this.toSeconds(),t=["1m"];for(let e=1;e<9;e++){let s=Math.pow(2,e);t.push(s+"n."),t.push(s+"n"),t.push(s+"t")}t.push("0");let s=t[0],i=new oh(this.context,t[0]).toSeconds();return t.forEach(t=>{let n=new oh(this.context,t).toSeconds();Math.abs(n-e)<Math.abs(i-e)&&(s=t,i=n)}),s}toBarsBeatsSixteenths(){let e=this._beatsToUnits(1),t=this.valueOf()/e,s=Math.floor((t=parseFloat(t.toFixed(4)))/this._getTimeSignature()),i=t%1*4;t=Math.floor(t)%this._getTimeSignature();let n=i.toString();return n.length>3&&(i=parseFloat(parseFloat(n).toFixed(3))),[s,t,i].join(":")}toTicks(){let e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return oo(this.toFrequency())}_now(){return this.context.now()}}class od extends oh{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return oa}static set A4(e){oa=e}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return"midi"===this.defaultUnits?e:od.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){let s=op[e.toLowerCase()]+(parseInt(t,10)+1)*12;return"midi"===this.defaultUnits?s:od.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let i=1;return e&&"0"!==e&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(i*=this._beatsToUnits(parseFloat(t))),s&&"0"!==s&&(i*=this._beatsToUnits(parseFloat(s)/4)),i}}})}transpose(e){return new od(this.context,this.valueOf()*or(e))}harmonize(e){return e.map(e=>this.transpose(e))}toMidi(){return oo(this.valueOf())}toNote(){let e=Math.round(12*Math.log2(this.toFrequency()/od.A4))+57,t=Math.floor(e/12);return t<0&&(e+=-12*t),om[e%12]+t.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let e=this._beatsToUnits(1);return Math.floor(this.valueOf()/e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return oc(e)}static ftom(e){return oo(e)}}let op={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},om=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class of extends oh{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ox extends a${constructor(){super();let e=aG(ox.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:on()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return ak(e)&&aq&&!aF&&(aF=!0,az("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing")),new oh(this.context,e).toSeconds()}toFrequency(e){return new od(this.context,e).toFrequency()}toTicks(e){return new of(this.context,e).toTicks()}_getPartialProperties(e){let t=this.get();return Object.keys(t).forEach(s=>{ak(e[s])&&delete t[s]}),t}get(){let e=this.constructor.getDefaults();return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){let s=this[t];aS(s)&&aS(s.value)&&aS(s.setValueAtTime)?e[t]=s.value:s instanceof ox?e[t]=s._getPartialProperties(e[t]):aM(s)||aA(s)||aO(s)||"boolean"==typeof s?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&aS(this[t])&&(this[t]&&aS(this[t].value)&&aS(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof ox?this[t].set(e[t]):this[t]=e[t])}),this}}class og extends aK{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){let t=this.get(e);return null!==t?t.state:this._initial}setStateAtTime(e,t,s){return aI(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){let s=this._search(t);for(let t=s;t>=0;t--){let s=this._timeline[t];if(s.state===e)return s}}getNextState(e,t){let s=this._search(t);if(-1!==s)for(let t=s;t<this._timeline.length;t++){let s=this._timeline[t];if(s.state===e)return s}}}class oy extends ox{constructor(){let e=aG(oy.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,aR(aS(e.param)&&(aN(e.param)||e.param instanceof oy),"param must be an AudioParam");!aN(e.param);)e.param=e.param._param;this._swappable=!!aS(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new aK(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,aS(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ox.getDefaults(),{convert:!0,units:"number"})}get value(){let e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return aS(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return aS(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return aS(this.maxValue)&&aS(this.minValue)&&aI(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Math.pow(10,e/20):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?Math.log(e)/Math.LN10*20:e}setValueAtTime(e,t){let s=this.toSeconds(t),i=this._fromType(e);return aR(isFinite(i)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,s),this}getValueAtTime(e){let t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),i=this._events.get(t),n=this._initialValue;if(null===i)n=this._initialValue;else if("setTargetAtTime"===i.type&&(null===s||"setValueAtTime"===s.type)){let e;let s=this._events.getBefore(i.time);e=null===s?this._initialValue:s.value,"setTargetAtTime"===i.type&&(n=this._exponentialApproach(i.time,e,i.value,i.constant,t))}else if(null===s)n=i.value;else if("linearRampToValueAtTime"===s.type||"exponentialRampToValueAtTime"===s.type){let e=i.value;if("setTargetAtTime"===i.type){let t=this._events.getBefore(i.time);e=null===t?this._initialValue:t.value}n="linearRampToValueAtTime"===s.type?this._linearInterpolate(i.time,e,s.time,s.value,t):this._exponentialInterpolate(i.time,e,s.time,s.value,t)}else n=i.value;return this._toType(n)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){let s=this._fromType(e),i=this.toSeconds(t);return aR(isFinite(s)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:i,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,i),this._param.linearRampToValueAtTime(s,i),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=aJ(s,0)?this._minOutput:s,this._assertRange(s);let i=this.toSeconds(t);return aR(isFinite(s)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,i),this._param.exponentialRampToValueAtTime(s,i),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t);let i=Math.log((s=this.toSeconds(s))+1)/Math.log(200);return this.setTargetAtTime(e,t,i),this.cancelAndHoldAtTime(t+.9*s),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){let i=this._fromType(e);aR(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");let n=this.toSeconds(t);return this._assertRange(i),aR(isFinite(i)&&isFinite(n),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:n,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",e,n,s),this._param.setTargetAtTime(i,n,s),this}setValueCurveAtTime(e,t,s,i=1){s=this.toSeconds(s),t=this.toSeconds(t);let n=this._fromType(e[0])*i;this.setValueAtTime(this._toType(n),t);let r=s/(e.length-1);for(let s=1;s<e.length;s++){let n=this._fromType(e[s])*i;this.linearRampToValueAtTime(this._toType(n),t+s*r)}return this}cancelScheduledValues(e){let t=this.toSeconds(e);return aR(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){let t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));aR(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);let i=this._events.get(t),n=this._events.getAfter(t);return i&&aJ(i.time,t)?n?(this._param.cancelScheduledValues(n.time),this._events.cancel(n.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):n&&(this._param.cancelScheduledValues(n.time),this._events.cancel(n.time),"linearRampToValueAtTime"===n.type?this.linearRampToValueAtTime(this._toType(s),t):"exponentialRampToValueAtTime"===n.type&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){let t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);let s=this._events.get(t);if(s&&"setTargetAtTime"===s.type){let i=this._events.getAfter(s.time),n=i?i.time:t+2,r=(n-t)/10;for(let s=t;s<n;s+=r)e.linearRampToValueAtTime(this.getValueAtTime(s),s)}return this._events.forEachAfter(this.context.currentTime,t=>{"cancelScheduledValues"===t.type?e.cancelScheduledValues(t.time):"setTargetAtTime"===t.type?e.setTargetAtTime(t.value,t.time,t.constant):e[t.type](t.value,t.time)}),this}setParam(e){aR(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,i,n){return s+(t-s)*Math.exp(-(n-e)/i)}_linearInterpolate(e,t,s,i,n){return t+(n-e)/(s-e)*(i-t)}_exponentialInterpolate(e,t,s,i,n){return t*Math.pow(i/t,(n-e)/(s-e))}}class ob extends ox{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return aS(this.input)?aN(this.input)||this.input instanceof oy?1:this.input.numberOfInputs:0}get numberOfOutputs(){return aS(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return aS(e)&&(e instanceof ob||aT(e))}_getInternalNodes(){let e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(t=>{t.channelCount=e.channelCount,t.channelCountMode=e.channelCountMode,t.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){let e=this._getInternalNodes();aR(e.length>0,"ToneAudioNode does not have any internal nodes");let t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return o_(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return az("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return ow(this,e,t,s),this}chain(...e){return ov(this,...e),this}fan(...e){return e.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),aS(this.input)&&(this.input instanceof ob?this.input.dispose():aT(this.input)&&this.input.disconnect()),aS(this.output)&&(this.output instanceof ob?this.output.dispose():aT(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ov(...e){let t=e.shift();e.reduce((e,t)=>(e instanceof ob?e.connect(t):aT(e)&&o_(e,t),t),t)}function o_(e,t,s=0,i=0){for(aR(aS(e),"Cannot connect from undefined node"),aR(aS(t),"Cannot connect to undefined node"),(t instanceof ob||aT(t))&&aR(t.numberOfInputs>0,"Cannot connect to node with no inputs"),aR(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof ob||t instanceof oy;)aS(t.input)&&(t=t.input);for(;e instanceof ob;)aS(e.output)&&(e=e.output);aN(t)?e.connect(t,s):e.connect(t,s,i)}function ow(e,t,s=0,i=0){if(aS(t))for(;t instanceof ob;)t=t.input;for(;!aT(e);)aS(e.output)&&(e=e.output);aN(t)?e.disconnect(t,s):aT(t)?e.disconnect(t,s,i):e.disconnect()}class oj extends ob{constructor(){let e=aG(oj.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new oy({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),a9(this,"gain")}static getDefaults(){return Object.assign(ob.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class oT extends ob{constructor(e){super(e),this.onended=a7,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new oj({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){let t=this.toSeconds(e);return -1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ob.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:a7})}_startGain(e,t=1){aR(-1===this._startTime,"Source cannot be started more than once");let s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){aR(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();let t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let e="exponential"===this._curve?2*t:0;this._stopSource(this.now()+e),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==a7&&(this.onended(this),this.onended=a7,!this.context.isOffline)){let e=()=>this.dispose();"undefined"!=typeof requestIdleCallback?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),aR(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=a7,this}}class oN extends oT{constructor(){let e=aG(oN.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),o_(this._source,this._gainNode),this.offset=new oy({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(oT.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){let t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class oC extends ob{constructor(){let e=aG(oC.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new oN({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ob.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return ok(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,i){return this._param.setValueCurveAtTime(e,t,s,i),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function ok(e,t,s,i){(t instanceof oy||aN(t)||t instanceof oC&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof oC&&(t.overridden=!0)),o_(e,t,s,i)}class oS extends oy{constructor(){let e=aG(oS.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new aK(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(oy.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);let i=this._fromType(e),n=this._events.get(t),r=Math.round(Math.max(1/s,1));for(let e=0;e<=r;e++){let r=s*e+t,a=this._exponentialApproach(n.time,n.value,i,s,r);this.linearRampToValueAtTime(this._toType(a),r)}return this}setValueAtTime(e,t){let s=this.toSeconds(t);super.setValueAtTime(e,t);let i=this._events.get(s),n=this._events.previousEvent(i),r=this._getTicksUntilEvent(n,s);return i.ticks=Math.max(r,0),this}linearRampToValueAtTime(e,t){let s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);let i=this._events.get(s),n=this._events.previousEvent(i),r=this._getTicksUntilEvent(n,s);return i.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);let s=this._fromType(e),i=this._events.get(t),n=Math.round(Math.max((t-i.time)*10,1)),r=(t-i.time)/n;for(let e=0;e<=n;e++){let n=r*e+i.time,a=this._exponentialInterpolate(i.time,i.value,t,s,n);this.linearRampToValueAtTime(this._toType(a),n)}return this}_getTicksUntilEvent(e,t){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ak(e.ticks)){let t=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(t,e.time)}let s=this._fromType(this.getValueAtTime(e.time)),i=this._fromType(this.getValueAtTime(t)),n=this._events.get(t);return n&&n.time===t&&"setValueAtTime"===n.type&&(i=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+i)+e.ticks}getTicksAtTime(e){let t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){let s=this.toSeconds(t),i=this.getTicksAtTime(t);return this.getTimeOfTick(i+e)-s}getTimeOfTick(e){let t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&"linearRampToValueAtTime"===s.type&&t.value!==s.value){let i=this._fromType(this.getValueAtTime(t.time)),n=(this._fromType(this.getValueAtTime(s.time))-i)/(s.time-t.time),r=Math.sqrt(Math.pow(i,2)-2*n*(t.ticks-e)),a=(-i+r)/n;return(a>0?a:(-i-r)/n)+t.time}return t?0===t.value?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){let s=this.toSeconds(t),i=this.toSeconds(e),n=this.getTicksAtTime(s);return this.getTicksAtTime(s+i)-n}_fromType(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){let t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class oA extends oC{constructor(){let e=aG(oA.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new oS({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(oC.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class oE extends ox{constructor(){let e=aG(oE.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new og,this._tickOffset=new aK,this._ticksAtTime=new aK,this._secondsAtTime=new aK,this.frequency=new oA({context:this.context,units:e.units,value:e.frequency}),a9(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ox.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){let s=this.toSeconds(e);return"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),aS(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){let t=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(t)){let e=this._state.get(t);e&&e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){let t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){let t=this.toSeconds(e),s=this._state.getLastState("stopped",t),i=this._ticksAtTime.get(t),n={state:"paused",time:t};this._state.add(n);let r=i||s,a=i?i.ticks:0,o=null;return this._state.forEachBetween(r.time,t+this.sampleTime,e=>{let t=r.time,s=this._tickOffset.get(e.time);s&&s.time>=r.time&&(a=s.ticks,t=s.time),"started"===r.state&&"started"!==e.state&&(a+=this.frequency.getTicksAtTime(e.time)-this.frequency.getTicksAtTime(t),e.time!==n.time&&(o={state:e.state,time:e.time,ticks:a})),r=e}),this._state.remove(n),o&&this._ticksAtTime.add(o),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){let t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);let t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let i=this._secondsAtTime.get(e),n=i||t,r=i?i.seconds:0,a=null;return this._state.forEachBetween(n.time,e+this.sampleTime,e=>{let t=n.time,i=this._tickOffset.get(e.time);i&&i.time>=n.time&&(r=i.seconds,t=i.time),"started"===n.state&&"started"!==e.state&&(r+=e.time-t,e.time!==s.time&&(a={state:e.state,time:e.time,seconds:r})),n=e}),this._state.remove(s),a&&this._secondsAtTime.add(a),r}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){let s=this._tickOffset.get(t),i=this._state.get(t),n=Math.max(s.time,i.time),r=this.frequency.getTicksAtTime(n)+e-s.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(e,t,s){let i=this._state.get(e);this._state.forEachBetween(e,t,t=>{i&&"started"===i.state&&"started"!==t.state&&this.forEachTickBetween(Math.max(i.time,e),t.time-this.sampleTime,s),i=t});let n=null;if(i&&"started"===i.state){let r=Math.max(i.time,e),a=this.frequency.getTicksAtTime(r),o=a-this.frequency.getTicksAtTime(i.time),l=Math.ceil(o)-o;l=aJ(l,1)?0:l;let c=this.frequency.getTimeOfTick(a+l);for(;c<t;){try{s(c,Math.round(this.getTicksAtTime(c)))}catch(e){n=e;break}c+=this.frequency.getDurationOfTicks(1,c)}}if(n)throw n;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class oM extends ox{constructor(){let e=aG(oM.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=a7,this._lastUpdate=0,this._state=new og("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new oE({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,a9(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ox.getDefaults(),{callback:a7,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){aP(this.context);let s=this.toSeconds(e);return this.log("start",s),"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){let t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){let t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){let s=this.toSeconds(t),i=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(i+e,s)}_loop(){let e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,e=>{switch(e.state){case"started":let t=this._tickSource.getTicksAtTime(e.time);this.emit("start",e.time,t);break;case"stopped":0!==e.time&&this.emit("stop",e.time);break;case"paused":this.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,t,(e,t)=>{this.callback(e,t)}))}getStateAtTime(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}a5.mixin(oM);class oO extends ob{constructor(){let e=aG(oO.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new oj({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,a9(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ob.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class oD extends ob{constructor(){let e=aG(oD.getDefaults(),arguments);super(e),this.name="Destination",this.input=new oO({context:this.context}),this.output=new oj({context:this.context}),this.volume=this.input.volume,ov(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ob.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ov(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}a1(e=>{e.destination=new oD({context:e})}),a4(e=>{e.destination.dispose()});class oR extends ob{constructor(){super(...arguments),this.name="Listener",this.positionX=new oy({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new oy({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new oy({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new oy({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new oy({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new oy({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new oy({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new oy({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new oy({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ob.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}a1(e=>{e.listener=new oR({context:e})}),a4(e=>{e.listener.dispose()});class oI extends a${constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let e=aG(oI.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;let s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:a7,onload:a7,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return aR(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=a7,i=a7){return aO(t)?(this.baseUrl&&"data:audio/"===t.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(e.toString(),new oe(this.baseUrl+t,s,i))):this._buffers.set(e.toString(),new oe(t,s,i)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class oP extends od{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return oo(super._frequencyToUnits(e))}_ticksToUnits(e){return oo(super._ticksToUnits(e))}_beatsToUnits(e){return oo(super._beatsToUnits(e))}_secondsToUnits(e){return oo(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return oc(this.toMidi())}transpose(e){return new oP(this.context,this.toMidi()+e)}}class oq extends of{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class oF extends ox{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new aK,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){let e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}a1(e=>{e.draw=new oF({context:e})}),a4(e=>{e.draw.dispose()});class oV extends a${constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){aR(aS(e.time),"Events must have a time property"),aR(aS(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new oz(e.time,e.time+e.duration,e);for(null===this._root?this._root=t:this._root.insert(t),this._length++;null!==t;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(null!==this._root){let t=[];for(let s of(this._root.search(e.time,t),t))if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,e=>this.remove(e)),this}_setRoot(e){this._root=e,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(e,t){null!==e.parent?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{let t;let s=e.getBalance(),i=null;if(s>0){if(null===e.left.right)(t=e.left).right=e.right,i=t;else{for(t=e.left.right;null!==t.right;)t=t.right;t.parent&&(t.parent.right=t.left,i=t.parent,t.left=e.left,t.right=e.right)}}else if(null===e.right.left)(t=e.right).left=e.left,i=t;else{for(t=e.right.left;null!==t.left;)t=t.left;t.parent&&(t.parent.left=t.right,i=t.parent,t.left=e.left,t.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=t:e.parent.right=t:this._setRoot(t),i&&this._rebalance(i)}e.dispose()}_rotateLeft(e){let t=e.parent,s=e.isLeftChild(),i=e.right;i&&(e.right=i.left,i.left=e),null!==t?s?t.left=i:t.right=i:this._setRoot(i)}_rotateRight(e){let t=e.parent,s=e.isLeftChild(),i=e.left;i&&(e.left=i.right,i.right=e),null!==t?s?t.left=i:t.right=i:this._setRoot(i)}_rebalance(e){let t=e.getBalance();t>1&&e.left?0>e.left.getBalance()?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(null!==this._root){let t=[];if(this._root.search(e,t),t.length>0){let e=t[0];for(let s=1;s<t.length;s++)t[s].low>e.low&&(e=t[s]);return e.event}}return null}forEach(e){if(null!==this._root){let t=[];this._root.traverse(e=>t.push(e)),t.forEach(t=>{t.event&&e(t.event)})}return this}forEachAtTime(e,t){if(null!==this._root){let s=[];this._root.search(e,s),s.forEach(e=>{e.event&&t(e.event)})}return this}forEachFrom(e,t){if(null!==this._root){let s=[];this._root.searchAfter(e,s),s.forEach(e=>{e.event&&t(e.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class oz{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}search(e,t){!(e>this.max)&&(null!==this.left&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),this.low>e||null===this.right||this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),null!==this.left&&this.left.searchAfter(e,t)),null!==this.right&&this.right.searchAfter(e,t)}traverse(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class oL extends a${constructor(e){super(),this.name="TimelineValue",this._timeline=new aK({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){let t=this._timeline.get(e);return t?t.value:this._initialValue}}class oB extends ob{constructor(){super(aG(oB.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return ok(this,e,t,s),this}}class oW extends oB{constructor(){let e=aG(oW.getDefaults(),arguments,["mapping","length"]);(super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,aM(e.mapping)||e.mapping instanceof Float32Array)?this.curve=Float32Array.from(e.mapping):"function"==typeof e.mapping&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(oC.getDefaults(),{length:1024})}setMap(e,t=1024){let s=new Float32Array(t);for(let i=0;i<t;i++){let n=i/(t-1)*2-1;s[i]=e(n,i)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){aR(["none","2x","4x"].some(t=>t.includes(e)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class oZ extends oB{constructor(){let e=aG(oZ.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new oW({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(oB.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class oH{constructor(e,t){this.id=oH._eventId++,this._remainderTime=0;let s=Object.assign(oH.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:a7,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){let t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}oH._eventId=0;class oG extends oH{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let s=Object.assign(oG.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},oH.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return aX(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new oq(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){aX(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new oq(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;let t=this.transport.getTicksAtTime(e);aQ(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class oU extends ox{constructor(){let e=aG(oU.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new oL(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new aK,this._repeatedEvents=new oV,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new oM({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),a9(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ox.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!=0&&t%(2*this._swingTicks)!=0){let s=Math.sin(t%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;e+=new oq(this.context,2*this._swingTicks/3).toSeconds()*s}aq=!0,this._timeline.forEachAtTime(t,t=>t.invoke(e)),aq=!1}schedule(e,t){let s=new oH(this,{callback:e,time:new of(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,i=1/0){let n=new oG(this,{callback:e,duration:new oh(this.context,i).toTicks(),interval:new oh(this.context,t).toTicks(),time:new of(this.context,s).toTicks()});return this._addEvent(n,this._repeatedEvents)}scheduleOnce(e,t){let s=new oH(this,{callback:e,once:!0,time:new of(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){let t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){let t=this.toTicks(e);return this._timeline.forEachFrom(t,e=>this.clear(e.id)),this._repeatedEvents.forEachFrom(t,e=>this.clear(e.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new oq(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let s;return this.context.resume(),aS(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){aM(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new oh(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new oh(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new oq(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){let e=this.now(),t=this._clock.getTicksAtTime(e);return new oq(this.context,t).toBarsBeatsSixteenths()}set position(e){let t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){let t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(!this.loop)return 0;{let e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){let t=this.now();if("started"===this.state){let s=this._clock.getTicksAtTime(t),i=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),n=t+i;this.emit("stop",n),this._clock.setTicksAtTime(e,n),this.emit("start",n,this._clock.getSecondsAtTime(n))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),"started"!==this.state)return 0;{let t=this.now(),s=this.getTicksAtTime(t),i=e-s%e;return this._clock.nextTickTime(i,t)}}syncSignal(e,t){let s=this.now(),i=this.bpm,n=1/(60/i.getValueAtTime(s)/this.PPQ),r=[];if("time"===e.units){let e=1/64/n,t=new oj(e),s=new oZ(-1),a=new oj(e);i.chain(t,s,a),i=a,n=1/n,r=[t,s,a]}t||(t=0!==e.getValueAtTime(s)?e.getValueAtTime(s)/n:0);let a=new oj(t);return i.connect(a),a.connect(e._param),r.push(a),this._syncedSignals.push({initial:e.value,nodes:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){let s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(e=>e.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),function e(t,s){aM(s)?s.forEach(s=>e(t,s)):Object.defineProperty(t,s,{writable:!0})}(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}a5.mixin(oU),a1(e=>{e.transport=new oU({context:e})}),a4(e=>{e.transport.dispose()});class o$ extends ob{constructor(e){super(e),this.input=void 0,this._state=new og("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=a7,this._syncedStop=a7,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new oO({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,a9(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ob.getDefaults(),{mute:!1,onstop:a7,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let i=ak(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i)){if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){let e=this._state.get(i);e&&(e.offset=this.toSeconds(ak(t)?0:t),e.duration=s?this.toSeconds(s):void 0);let n=this.context.transport.schedule(e=>{this._start(e,t,s)},i);this._scheduled.push(n),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else aP(this.context),this._start(i,t,s)}else aR(aQ(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,t,s);return this}stop(e){let t=ak(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),"started"===this._state.getValueAtTime(t)||aS(this._state.getNextState("started",t))){if(this.log("stop",t),this._synced){let e=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop(t);this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(aQ(t,0)){let s=this._state.get(t);if(s&&"started"===s.state&&s.time!==t){let i;let n=t-this.toSeconds(s.time);s.duration&&(i=this.toSeconds(s.duration)-n),this._start(e,this.toSeconds(s.offset)+n,i)}}},this._syncedStop=e=>{let t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));"started"===this._state.getValueAtTime(t)&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=a7,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class oQ extends oT{constructor(){let e=aG(oQ.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,o_(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new oy({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new oe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(oT.getDefaults(),{url:new oe,loop:!1,loopEnd:0,loopStart:0,onload:a7,onerror:a7,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,i=1){var n,r,a;aR(this.buffer.loaded,"buffer is either not set or not loaded");let o=this.toSeconds(e);this._startGain(o,i),t=this.loop?(n=t,r=this.loopStart,ak(n)?r:n):ak(a=t)?0:a;let l=Math.max(this.toSeconds(t),0);if(this.loop){let e=this.toSeconds(this.loopEnd)||this.buffer.duration,t=this.toSeconds(this.loopStart),s=e-t;aY(l,e)&&(l=(l-t)%s+t),aJ(l,this.buffer.duration)&&(l=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,aX(l,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(o,l)),aS(s)){let e=this.toSeconds(s);e=Math.max(e,0),this.stop(o+e)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function oY(e,t){return(0,aW.mG)(this,void 0,void 0,function*(){let s=t/e.context.sampleRate,i=new ot(1,s,e.context.sampleRate);return new e.constructor(Object.assign(e.get(),{frequency:2/s,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class oX extends oT{constructor(){let e=aG(oX.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],o_(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new oy({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new oy({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),a9(this,["frequency","detune"])}static getDefaults(){return Object.assign(oT.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){let t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class oJ extends o${constructor(){let e=aG(oJ.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new oC({context:this.context,units:"frequency",value:e.frequency}),a9(this,"frequency"),this.detune=new oC({context:this.context,units:"cents",value:e.detune}),a9(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(o$.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){let t=this.toSeconds(e),s=new oX({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){let t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){let t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return oJ._periodicWaveCache.find(e=>{var t,s;return e.phase===this._phase&&(t=e.partials,s=this._partials,t.length===s.length&&t.every((e,t)=>s[t]===e))});{let e=oJ._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;let t=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&t)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{let t=this._getCachedPeriodicWave();if(aS(t)){let{partials:e,wave:s}=t;this._wave=s,this._partials=e,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{let[t,s]=this._getRealImaginary(e,this._phase),i=this.context.createPeriodicWave(t,s);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),oJ._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:t,type:this._type,wave:this._wave}),oJ._periodicWaveCache.length>100&&oJ._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&"custom"!==this._type&&"custom"!==e?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){aI(e,0);let t=this._type,s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),"custom"!==this._type)0===e?this.type=t:this.type=t+e.toString();else{let t=new Float32Array(e);this._partials.forEach((e,s)=>t[s]=e),this._partials=Array.from(t),this.type=this._type}}_getRealImaginary(e,t){let s=2048,i=new Float32Array(2048),n=new Float32Array(s),r=1;if("custom"===e){if(r=this._partials.length+1,this._partialCount=this._partials.length,s=r,0===this._partials.length)return[i,n]}else{let t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);t?(r=parseInt(t[2],10)+1,this._partialCount=parseInt(t[2],10),e=t[1],s=r=Math.max(r,2)):this._partialCount=0,this._partials=[]}for(let a=1;a<s;++a){let s;let o=2/(a*Math.PI);switch(e){case"sine":s=a<=r?1:0,this._partials[a-1]=s;break;case"square":s=1&a?2*o:0,this._partials[a-1]=s;break;case"sawtooth":s=o*(1&a?1:-1),this._partials[a-1]=s;break;case"triangle":s=1&a?o*o*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=s;break;case"custom":s=this._partials[a-1];break;default:throw TypeError("Oscillator: invalid type: "+e)}0!==s?(i[a]=-s*Math.sin(t*a),n[a]=s*Math.cos(t*a)):(i[a]=0,n[a]=0)}return[i,n]}_inverseFFT(e,t,s){let i=0,n=e.length;for(let r=0;r<n;r++)i+=e[r]*Math.cos(r*s)+t[r]*Math.sin(r*s);return i}getInitialValue(){let[e,t]=this._getRealImaginary(this._type,0),s=0,i=2*Math.PI;for(let n=0;n<32;n++)s=Math.max(this._inverseFFT(e,t,n/32*i),s);return Math.max(Math.min(-this._inverseFFT(e,t,this._phase)/s,1),-1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return(0,aW.mG)(this,arguments,void 0,function*(e=1024){return oY(this,e)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}oJ._periodicWaveCache=[];class oK extends oB{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new oW({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class o0 extends oC{constructor(){let e=aG(o0.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new oj({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(oC.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class o1 extends o${constructor(){let e=aG(o1.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new oK({context:this.context}),this._modulationNode=new oj({context:this.context}),this._carrier=new oJ({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new oJ({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new o0({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),a9(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(oJ.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return(0,aW.mG)(this,arguments,void 0,function*(e=1024){return oY(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class o2 extends o${constructor(){let e=aG(o2.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new oj({context:this.context,gain:0}),this._carrier=new oJ({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new oC({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new oJ({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new o0({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new o0({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),a9(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(oJ.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return(0,aW.mG)(this,arguments,void 0,function*(e=1024){return oY(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class o4 extends o${constructor(){let e=aG(o4.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new oj({context:this.context,gain:0}),this._thresh=new oW({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new oC({context:this.context,units:"audioRange",value:e.width}),this._triangle=new oJ({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),a9(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(o$.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return(0,aW.mG)(this,arguments,void 0,function*(e=1024){return oY(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class o5 extends o${constructor(){let e=aG(o5.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new oC({context:this.context,units:"frequency",value:e.frequency}),this.detune=new oC({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,a9(this,["frequency","detune"])}static getDefaults(){return Object.assign(oJ.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){let t=-e/2,s=e/(this._oscillators.length-1);this._forEach((e,i)=>e.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(aI(e,1),this._oscillators.length!==e){this._forEach(e=>e.dispose()),this._oscillators=[];for(let t=0;t<e;t++){let s=new oJ({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:0===t?()=>this.onstop(this):a7});"custom"===this.type&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((e,t)=>e.phase=this._phase+t/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return(0,aW.mG)(this,arguments,void 0,function*(e=1024){return oY(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class o3 extends o${constructor(){let e=aG(o3.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new o0({context:this.context,value:2}),this._pulse=new o4({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new oJ({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),a9(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(o$.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return(0,aW.mG)(this,arguments,void 0,function*(e=1024){return oY(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}let o6={am:o1,fat:o5,fm:o2,oscillator:oJ,pulse:o4,pwm:o3};class o8 extends o${constructor(){let e=aG(o8.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new oC({context:this.context,units:"frequency",value:e.frequency}),this.detune=new oC({context:this.context,units:"cents",value:e.detune}),a9(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(oJ.getDefaults(),o2.getDefaults(),o1.getDefaults(),o5.getDefaults(),o4.getDefaults(),o3.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(e=this._sourceType),e+this._oscillator.type}set type(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;let t=o6[e],s=this.now();if(this._oscillator){let e=this._oscillator;e.stop(s),this.context.setTimeout(()=>e.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(t=this._oscillator.type),"fm"===e?this.type="fm"+t:"am"===e?this.type="am"+t:"fat"===e?this.type="fat"+t:"oscillator"===e?this.type=t:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}_getOscType(e,t){return e instanceof o6[t]}get baseType(){return this._oscillator.baseType}set baseType(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===e||"pwm"===e||(this._oscillator.baseType=e)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(e){this._getOscType(this._oscillator,"fat")&&aA(e)&&(this._oscillator.count=e)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(e){this._getOscType(this._oscillator,"fat")&&aA(e)&&(this._oscillator.spread=e)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&aO(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return(0,aW.mG)(this,arguments,void 0,function*(e=1024){return oY(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class o9 extends oC{constructor(){super(aG(o9.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new oj({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ov(this._constantSource,this._sum)}static getDefaults(){return Object.assign(oC.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class o7 extends oB{constructor(){let e=aG(o7.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new o0({context:this.context,value:e.max-e.min}),this._add=this.output=new o9({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(oB.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class le extends oB{constructor(){super(aG(le.getDefaults(),arguments)),this.name="Zero",this._gain=new oj({context:this.context}),this.output=this._gain,this.input=void 0,o_(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),ow(this.context.getConstant(0),this._gain),this}}class lt extends ob{constructor(){let e=aG(lt.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=oy.prototype._fromType,this._toType=oy.prototype._toType,this._is=oy.prototype._is,this._clampValue=oy.prototype._clampValue,this._oscillator=new oJ(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new oj({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new oC({context:this.context,units:"audioRange",value:0}),this._zeros=new le({context:this.context}),this._a2g=new oK({context:this.context}),this._scaler=this.output=new o7({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),a9(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(oJ.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){let t=this.min,s=this.max;this._units=e,this.min=t,this.max=s}get state(){return this._oscillator.state}connect(e,t,s){return(e instanceof oy||e instanceof oC)&&(this.convert=e.convert,this.units=e.units),ok(this,e,t,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function ls(e,t=1/0){let s=new WeakMap;return function(i,n){Reflect.defineProperty(i,n,{configurable:!0,enumerable:!0,get:function(){return s.get(this)},set:function(i){aI(i,e,t),s.set(this,i)}})}}function li(e,t=1/0){let s=new WeakMap;return function(i,n){Reflect.defineProperty(i,n,{configurable:!0,enumerable:!0,get:function(){return s.get(this)},set:function(i){aI(this.toSeconds(i),e,t),s.set(this,i)}})}}class ln extends o${constructor(){let e=aG(ln.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new oe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(o$.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:a7,onerror:a7,playbackRate:1,reverse:!1})}load(e){return(0,aW.mG)(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=a7){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){var i,n,r,a,o;t=this._loop?(i=t,n=this._loopStart,ak(i)?n:i):ak(r=t)?0:r;let l=this.toSeconds(t),c=s;a=s,o=Math.max(this._buffer.duration-l,0),s=ak(a)?o:a;let u=this.toSeconds(s);u/=this._playbackRate,e=this.toSeconds(e);let h=new oQ({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(h),this._loop&&ak(c)?h.start(e,l):h.start(e,l,u-this.toSeconds(this.fadeOut))}_stop(e){let t=this.toSeconds(e);this._activeSources.forEach(e=>e.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var i;null===(i=[...this._activeSources].pop())||void 0===i||i.stop(e),this._start(e,t,s)}seek(e,t){let s=this.toSeconds(t);if("started"===this._state.getValueAtTime(s)){let t=this.toSeconds(e);this._stop(s),this._start(s,t)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&aI(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&aI(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){let e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;let t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(e=>e.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}(0,aW.gn)([li(0)],ln.prototype,"fadeIn",void 0),(0,aW.gn)([li(0)],ln.prototype,"fadeOut",void 0);class lr extends oB{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new oW({context:this.context,mapping:e=>2*Math.abs(e)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class la extends ob{constructor(){let e=aG(la.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new oC({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ob.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(aO(e))return e;{let s;for(s in lo)if(lo[s][t]===e)return s;return e}}_setCurve(e,t,s){if(aO(s)&&Reflect.has(lo,s)){let i=lo[s];aE(i)?"_decayCurve"!==e&&(this[e]=i[t]):this[e]=i}else if(aM(s)&&"_decayCurve"!==e)this[e]=s;else throw Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let s=this.toSeconds(this.attack),i=this.toSeconds(this.decay),n=this.getValueAtTime(e);if(n>0&&(s=(1-n)/(1/s)),s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,s,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,s,e);else{this._sig.cancelAndHoldAtTime(e);let i=this._attackCurve;for(let e=1;e<i.length;e++)if(i[e-1]<=n&&n<=i[e]){(i=this._attackCurve.slice(e))[0]=n;break}this._sig.setValueCurveAtTime(i,e,s,t)}if(i&&this.sustain<1){let n=t*this.sustain,r=e+s;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(n,i+r):this._sig.exponentialApproachValueAtTime(n,r,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);let t=this.getValueAtTime(e);if(t>0){let s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,s,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,s,e):(aR(aM(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return ok(this,e,t,s),this}asArray(){return(0,aW.mG)(this,arguments,void 0,function*(e=1024){let t=e/this.context.sampleRate,s=new ot(1,t,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),n=i+this.toSeconds(this.release),r=.1*n,a=n+r,o=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return o._sig.toDestination(),o.triggerAttackRelease(t*(i+r)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,aW.gn)([li(0)],la.prototype,"attack",void 0),(0,aW.gn)([li(0)],la.prototype,"decay",void 0),(0,aW.gn)([ls(0,1)],la.prototype,"sustain",void 0),(0,aW.gn)([li(0)],la.prototype,"release",void 0);let lo=(()=>{let e,t;let s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));let i=[];for(e=0;e<127;e++){let s=Math.sin(2*Math.PI*(t=e/127)*6.4-Math.PI/2)+1;i[e]=s/10+.83*t}i[127]=1;let n=[];for(e=0;e<128;e++)n[e]=Math.ceil(e/127*5)/5;let r=[];for(e=0;e<128;e++)t=e/127,r[e]=.5*(1-Math.cos(Math.PI*t));let a=[];for(e=0;e<128;e++){let s=Math.cos((4*Math.pow(t=e/127,3)+.2)*Math.PI*2*t);a[e]=Math.abs(s*(1-t))}function o(e){let t=Array(e.length);for(let s=0;s<e.length;s++)t[s]=1-e[s];return t}return{bounce:{In:o(a),Out:a},cosine:{In:s,Out:s.slice(0).reverse()},exponential:"exponential",linear:"linear",ripple:{In:i,Out:o(i)},sine:{In:r,Out:o(r)},step:{In:n,Out:o(n)}}})();class ll extends ob{constructor(){let e=aG(ll.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new oO({context:this.context,volume:e.volume}),this.volume=this._volume.volume,a9(this,"volume")}static getDefaults(){return Object.assign(ob.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){let s=this["_original_"+e]=this[e];this[e]=(...e)=>{let i=e[t],n=this.context.transport.schedule(i=>{e[t]=i,s.apply(this,e)},i);this._scheduledEvents.push(n)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,i){let n=this.toSeconds(s),r=this.toSeconds(t);return this.triggerAttack(e,n,i),this.triggerRelease(n+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class lc extends ll{constructor(){let e=aG(lc.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ll.getDefaults(),{detune:0,onsilence:a7,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);let i=this.toSeconds(t);return this._triggerEnvelopeAttack(i,s),this.setNote(e,i),this}triggerRelease(e){this.log("triggerRelease",e);let t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){let s=this.toSeconds(t),i=e instanceof od?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){let e=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,e,s)}else this.frequency.setValueAtTime(i,s);return this}}(0,aW.gn)([li(0)],lc.prototype,"portamento",void 0);class lu extends la{constructor(){super(aG(lu.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new oj({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class lh extends lc{constructor(){let e=aG(lh.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new o8(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new lu(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),a9(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(lc.getDefaults(),{envelope:Object.assign(aU(la.getDefaults(),Object.keys(ob.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(aU(o8.getDefaults(),[...Object.keys(o$.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){let t=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ld extends lh{constructor(){let e=aG(ld.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,a9(this,["oscillator","envelope"])}static getDefaults(){return aH(lc.getDefaults(),lh.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){let s=this.toSeconds(t),i=this.toFrequency(e instanceof od?e.toFrequency():e),n=i*this.octaves;return this.oscillator.frequency.setValueAtTime(n,s),this.oscillator.frequency.exponentialRampToValueAtTime(i,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,aW.gn)([ls(0)],ld.prototype,"octaves",void 0),(0,aW.gn)([li(0)],ld.prototype,"pitchDecay",void 0);let lp=new Set;function lm(e,t){let s=`registerProcessor("${e}", ${t})`;lp.add(s)}eY=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`,lp.add(eY),eX=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`,lp.add(eX),eJ=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`,lp.add(eJ),lm("feedback-comb-filter",`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`);class lf extends ll{constructor(){let e=aG(lf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;let t={};Object.keys(e.urls).forEach(s=>{let i=parseInt(s,10);aR(aD(s)||aA(i)&&isFinite(i),`url key is neither a note or midi pitch: ${s}`),aD(s)?t[new od(this.context,s).toMidi()]=e.urls[s]:aA(i)&&isFinite(i)&&(t[i]=e.urls[i])}),this._buffers=new oI({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ll.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:a7,onerror:a7,release:.1,urls:{}})}_findClosest(e){let t=0;for(;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(e=>{let i=ol(new od(this.context,e).toFrequency()),n=Math.round(i),r=i-n,a=this._findClosest(n),o=n-a,l=this._buffers.get(o),c=or(a+r),u=new oQ({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);u.start(t,0,l.duration/c,s),aM(this._activeSources.get(n))||this._activeSources.set(n,[]),this._activeSources.get(n).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(n)){let e=this._activeSources.get(n),t=e.indexOf(u);-1!==t&&e.splice(t,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(e=>{let s=new od(this.context,e).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){let e=this._activeSources.get(s);t=this.toSeconds(t),e.forEach(e=>{e.stop(t)}),this._activeSources.set(s,[])}}),this}releaseAll(e){let t=this.toSeconds(e);return this._activeSources.forEach(e=>{for(;e.length;)e.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,i=1){let n=this.toSeconds(s);return this.triggerAttack(e,n,i),aM(t)?(aR(aM(e),"notes must be an array when duration is array"),e.forEach((e,s)=>{let i=t[Math.min(s,t.length-1)];this.triggerRelease(e,n+this.toSeconds(i))})):this.triggerRelease(e,n+this.toSeconds(t)),this}add(e,t,s){if(aR(aD(e)||isFinite(e),`note must be a pitch or midi: ${e}`),aD(e)){let i=new od(this.context,e).toMidi();this._buffers.add(i,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}(0,aW.gn)([li(0)],lf.prototype,"attack",void 0),(0,aW.gn)([li(0)],lf.prototype,"release",void 0);class lx extends ob{constructor(){let e=aG(lx.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new lr({context:this.context}),this.a=new oj({context:this.context,gain:0}),this.b=new oj({context:this.context,gain:0}),this.output=new oj({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new oC({context:this.context,units:"normalRange",value:e.fade}),a9(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",o_(this._split,this.a.gain,0),o_(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ob.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class lg extends ob{constructor(){let e=aG(lg.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new oy({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",a9(this,"pan")}static getDefaults(){return Object.assign(ob.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}lm("bit-crusher",`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`);class ly extends ob{constructor(){let e=aG(ly.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ob.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class lb extends ob{constructor(){let e=aG(lb.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ob.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class lv extends ob{constructor(e){super(e),this.name="StereoEffect",this.input=new oj({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new lx({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new ly({context:this.context,channels:2}),this._merge=new lb({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),a9(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),ov(...e),o_(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),ov(...e),o_(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ob.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class l_ extends lv{constructor(){let e=aG(l_.getDefaults(),arguments,["frequency","depth"]);super(e),this.name="Tremolo",this._lfoL=new lt({context:this.context,type:e.type,min:1,max:0}),this._lfoR=new lt({context:this.context,type:e.type,min:1,max:0}),this._amplitudeL=new oj({context:this.context}),this._amplitudeR=new oj({context:this.context}),this.frequency=new oC({context:this.context,value:e.frequency,units:"frequency"}),this.depth=new oC({context:this.context,value:e.depth,units:"normalRange"}),a9(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=e.spread}static getDefaults(){return Object.assign(lv.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class lw extends ob{constructor(){let e=aG(lw.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new oj({context:this.context}),lw._allSolos.has(this.context)||lw._allSolos.set(this.context,new Set),lw._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ob.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),lw._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){lw._soloed.has(this.context)||lw._soloed.set(this.context,new Set),lw._soloed.get(this.context).add(this)}_removeSolo(){lw._soloed.has(this.context)&&lw._soloed.get(this.context).delete(this)}_isSoloed(){return lw._soloed.has(this.context)&&lw._soloed.get(this.context).has(this)}_noSolos(){return!lw._soloed.has(this.context)||lw._soloed.has(this.context)&&0===lw._soloed.get(this.context).size}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),lw._allSolos.get(this.context).delete(this),this._removeSolo(),this}}lw._allSolos=new Map,lw._soloed=new Map;class lj extends ob{constructor(){let e=aG(lj.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new lg({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new oO({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,a9(this,["pan","volume"])}static getDefaults(){return Object.assign(ob.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class lT extends ob{constructor(){let e=aG(lT.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new lw({solo:e.solo,context:this.context}),this._panVol=this.output=new lj({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),a9(this,["pan","volume"])}static getDefaults(){return Object.assign(ob.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return lT.buses.has(e)||lT.buses.set(e,new oj({context:this.context})),lT.buses.get(e)}send(e,t=0){let s=this._getBus(e),i=new oj({context:this.context,units:"decibels",gain:t});return this.connect(i),i.connect(s),i}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}lT.buses=new Map,on().transport,on().destination,on().destination,on().listener,on().draw,on();class lN{async initialize(){this.isInitialized||(await oi.resume(),this.masterGain=new oj(.5).toDestination(),this.pannerLeft=new lg(-1).connect(this.masterGain),this.pannerRight=new lg(1).connect(this.masterGain),this.isInitialized=!0)}async playBinauralBeat(e,t=.5){this.isInitialized||await this.initialize(),this.stopAll(),this.masterGain&&this.pannerLeft&&this.pannerRight&&(this.masterGain.gain.value=t,e.forEach((t,s)=>{if(new oj(.3/e.length),"binaural"===t.type){let e=new oJ({frequency:t.baseFreq,type:"sine"}),i=new oJ({frequency:t.baseFreq+t.beatFreq,type:"sine"}),n=new oj(.5).connect(this.pannerLeft),r=new oj(.5).connect(this.pannerRight);e.connect(n),i.connect(r),e.start(),i.start(),this.oscillators.set(`${s}-left`,{left:e,right:i,gain:n})}else if("solfeggio"===t.type){let e=new oJ({frequency:t.baseFreq,type:"sine"}),i=new oj(.2).connect(this.masterGain);e.connect(i),e.start(),this.oscillators.set(`${s}-solfeggio`,{left:e,right:e,gain:i})}else if("isochronic"===t.type){let e=new oJ({frequency:t.baseFreq,type:"sine"}),i=new l_({frequency:t.beatFreq,depth:1,type:"square"}).start(),n=new oj(.3).connect(this.masterGain);e.connect(i).connect(n),e.start(),this.oscillators.set(`${s}-isochronic`,{left:e,right:e,gain:n})}}))}setVolume(e){this.masterGain&&this.masterGain.gain.rampTo(e,.1)}setIntensity(e){let t=e/10;this.oscillators.forEach(({gain:e})=>{e.gain.rampTo(.3*t,.5)})}stopAll(){this.oscillators.forEach(({left:e,right:t,gain:s})=>{try{e.stop(),e.dispose(),e!==t&&(t.stop(),t.dispose()),s.dispose()}catch(e){}}),this.oscillators.clear()}dispose(){this.stopAll(),this.pannerLeft?.dispose(),this.pannerRight?.dispose(),this.masterGain?.dispose(),this.isInitialized=!1}constructor(){this.oscillators=new Map,this.masterGain=null,this.isInitialized=!1,this.pannerLeft=null,this.pannerRight=null}}new lN;class lC{constructor(){this.isEnabled=!0,this.intervalId=null,this.isSupported=!1}checkSupport(){return this.isSupported}setEnabled(e){this.isEnabled=e,e||this.stop()}isActive(){return this.isEnabled}pulse(e=50){this.isEnabled&&this.isSupported&&navigator.vibrate(e)}pattern(e){this.isEnabled&&this.isSupported&&navigator.vibrate(e)}startRhythmic(e,t=5){if(!this.isEnabled||!this.isSupported)return;this.stop();let s=t/10*Math.max(20,Math.min(100,1e3/e)),i=Math.max(50,1e3/e-s),n=[s,i];this.intervalId=setInterval(()=>{this.isEnabled&&this.isSupported&&navigator.vibrate(n)},s+i)}phasePattern(e,t=5){if(!this.isEnabled||!this.isSupported)return;let s={onset:[30,100,30,100,30],peak:[50,50,50,50,50,50,50],sustain:[40,80,40,80],comedown:[20,150,20,200],complete:[100,50,100]},i=(s[e]||s.sustain).map(e=>Math.round(t/10*e));navigator.vibrate(i)}breathingPulse(e,t=5){this.isEnabled&&this.isSupported&&e&&navigator.vibrate(Math.round(t/10*30))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isSupported&&navigator.vibrate(0)}}let lk=new lC;var lS=s(3353),lA=s.n(lS);let lE=lA()(async()=>{},{loadableGenerated:{modules:["components\\visuals\\index.tsx -> ./MandalaVisual"]},ssr:!1}),lM=lA()(async()=>{},{loadableGenerated:{modules:["components\\visuals\\index.tsx -> ./ParticlesVisual"]},ssr:!1}),lO=lA()(async()=>{},{loadableGenerated:{modules:["components\\visuals\\index.tsx -> ./TunnelVisual"]},ssr:!1}),lD=lA()(async()=>{},{loadableGenerated:{modules:["components\\visuals\\index.tsx -> ./WavesVisual"]},ssr:!1}),lR=lA()(async()=>{},{loadableGenerated:{modules:["components\\visuals\\index.tsx -> ./BreathVisual"]},ssr:!1}),lI=lA()(async()=>{},{loadableGenerated:{modules:["components\\visuals\\index.tsx -> ./ChakraVisual"]},ssr:!1}),lP=lA()(async()=>{},{loadableGenerated:{modules:["components\\visuals\\index.tsx -> ./CosmicVisual"]},ssr:!1}),lq=lA()(async()=>{},{loadableGenerated:{modules:["components\\visuals\\index.tsx -> ./FractalsVisual"]},ssr:!1});function lF({type:e,intensity:t,colors:s}){let i={intensity:t,colors:s};switch(e){case"mandala":default:return eK.jsx(lE,{...i});case"particles":return eK.jsx(lM,{...i});case"tunnel":return eK.jsx(lO,{...i});case"waves":return eK.jsx(lD,{...i});case"breath":return eK.jsx(lR,{...i});case"chakra":return eK.jsx(lI,{...i});case"cosmic":return eK.jsx(lP,{...i});case"fractals":return eK.jsx(lq,{...i})}}let lV=[{name:"Relaxing",inhale:4,hold:4,exhale:6,pause:2,description:"Calming 4-4-6-2 pattern"},{name:"Box",inhale:4,hold:4,exhale:4,pause:4,description:"Equal 4-4-4-4 balance"},{name:"Energizing",inhale:4,hold:0,exhale:4,pause:0,description:"Quick rhythmic breath"},{name:"Deep",inhale:6,hold:2,exhale:8,pause:2,description:"Extended exhale for calm"}];function lz({isActive:e,onToggle:t,intensity:s=5,colors:i=["#8b5cf6","#ec4899"],compact:n=!1}){let[r,a]=(0,e0.useState)(lV[0]),[o,l]=(0,e0.useState)("inhale"),[c,u]=(0,e0.useState)(r.inhale),[h,d]=(0,e0.useState)(!1),[p,m]=(0,e0.useState)(0);(0,e0.useCallback)(e=>{switch(e){case"inhale":return r.hold>0?"hold":"exhale";case"hold":return"exhale";case"exhale":return r.pause>0?"pause":"inhale";case"pause":return"inhale"}},[r]);let f=(0,e0.useCallback)(e=>{switch(e){case"inhale":return r.inhale;case"hold":return r.hold;case"exhale":return r.exhale;case"pause":return r.pause}},[r]),x=()=>{switch(o){case"inhale":case"hold":return 1.4;case"exhale":case"pause":return .8}};return n?eK.jsx(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:`p-3 rounded-xl transition-all ${e?"bg-gradient-to-r from-neuro-cyan/30 to-neuro-purple/30 border border-neuro-cyan/50":"bg-white/10 hover:bg-white/20"}`,children:eK.jsx(sb,{className:`w-5 h-5 ${e?"text-neuro-cyan":"text-white/60"}`})}):(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,className:`w-full glass rounded-xl p-4 transition-all ${e?"border border-neuro-cyan/50":""}`,children:(0,eK.jsxs)("div",{className:"flex items-center justify-between",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:`p-2 rounded-lg ${e?"bg-neuro-cyan/20":"bg-white/10"}`,children:eK.jsx(sb,{className:`w-5 h-5 ${e?"text-neuro-cyan":"text-white/60"}`})}),(0,eK.jsxs)("div",{className:"text-left",children:[eK.jsx("p",{className:"text-sm font-medium text-white",children:"Breathing Guide"}),eK.jsx("p",{className:"text-xs text-white/50",children:e?`${r.name} • Cycle ${p}`:"Sync your breath"})]})]}),eK.jsx("div",{className:`w-12 h-6 rounded-full transition-all ${e?"bg-neuro-cyan":"bg-white/20"}`,children:eK.jsx(ts.E.div,{animate:{x:e?24:2},className:"w-5 h-5 mt-0.5 rounded-full bg-white shadow-lg"})})]})}),eK.jsx(e1.M,{children:e&&(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"glass rounded-xl p-4 mt-2 overflow-hidden",children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,eK.jsxs)("button",{onClick:()=>d(!h),className:"flex items-center gap-2 text-xs text-white/60 hover:text-white",children:[eK.jsx(sE,{className:"w-3 h-3"}),r.name]}),eK.jsx("span",{className:"text-xs text-white/40",children:r.description})]}),eK.jsx(e1.M,{children:h&&eK.jsx(ts.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex flex-wrap gap-2 mb-4",children:lV.map(e=>eK.jsx("button",{onClick:()=>{a(e),d(!1)},className:`px-3 py-1.5 rounded-lg text-xs transition-all ${r.name===e.name?"bg-neuro-cyan text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:e.name},e.name))})}),(0,eK.jsxs)("div",{className:"relative flex items-center justify-center h-32",children:[eK.jsx(ts.E.div,{animate:{scale:x(),opacity:"inhale"===o||"hold"===o?.3:.1},transition:{duration:f(o),ease:"easeInOut"},className:"absolute w-24 h-24 rounded-full",style:{background:`radial-gradient(circle, ${i[0]}40, transparent)`}}),eK.jsx(ts.E.div,{animate:{scale:x()},transition:{duration:f(o),ease:"easeInOut"},className:"relative w-20 h-20 rounded-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${i[0]}60, ${i[1]}60)`,boxShadow:`0 0 30px ${i[0]}40`},children:eK.jsx("span",{className:"text-2xl font-bold text-white",children:c})})]}),eK.jsx(ts.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-lg font-medium text-white mt-2",children:(e=>{switch(e){case"inhale":return"Breathe In";case"hold":return"Hold";case"exhale":return"Breathe Out";case"pause":return"Rest"}})(o)},o),eK.jsx("div",{className:"flex items-center justify-center gap-1 mt-4",children:["inhale","hold","exhale","pause"].map(e=>{let t=f(e);return 0===t?null:eK.jsx("div",{className:`h-1 rounded-full transition-all ${o===e?"bg-neuro-cyan":"bg-white/20"}`,style:{width:`${8*t}px`}},e)})})]})})]})}var lL=s(3734);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let lB=(0,ti.Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),lW=(0,ti.Z)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);function lZ({dose:e,duration:t,onClose:s}){let{user:i,profile:n}=(0,su.a)(),[r,a]=(0,e0.useState)("rating"),[o,l]=(0,e0.useState)(0),[c,u]=(0,e0.useState)(0),[h,d]=(0,e0.useState)(null),[p,m]=(0,e0.useState)(""),[f,x]=(0,e0.useState)(""),[g,y]=(0,e0.useState)(!1),b=async()=>{i&&0!==o&&(y(!0),await (0,sN.fM)(i.id,e.id,o,p||void 0,h??void 0),y(!1),a("testimonial"))},v=async()=>{if(!i||!f.trim()){a("complete");return}y(!0),await (0,sN.nc)(i.id,n?.full_name||"Anonymous Explorer",f,o,e.id),y(!1),a("complete")};return eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md glass rounded-3xl p-6 border border-white/20 relative",children:[eK.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-5 h-5 text-white/60"})}),(0,eK.jsxs)(e1.M,{mode:"wait",children:["rating"===r&&(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[(0,eK.jsxs)("div",{className:"text-center mb-6",children:[eK.jsx("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:`${e.colors[0]}30`},children:eK.jsx("span",{className:"text-3xl",children:"✨"})}),eK.jsx("h2",{className:"text-xl font-bold text-white",children:"Journey Complete!"}),(0,eK.jsxs)("p",{className:"text-white/60 text-sm mt-1",children:[e.name," • ",(e=>{let t=Math.floor(e/60);return`${t} minute${1!==t?"s":""}`})(t)]})]}),(0,eK.jsxs)("div",{className:"mb-6",children:[eK.jsx("p",{className:"text-sm text-white/60 text-center mb-3",children:"How was your experience?"}),eK.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>eK.jsx(ts.E.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onMouseEnter:()=>u(e),onMouseLeave:()=>u(0),onClick:()=>l(e),className:"p-1",children:eK.jsx(lL.Z,{className:`w-8 h-8 transition-colors ${e<=(c||o)?"text-amber-400 fill-amber-400":"text-white/30"}`})},e))})]}),(0,eK.jsxs)("div",{className:"mb-6",children:[eK.jsx("p",{className:"text-sm text-white/60 text-center mb-3",children:"Would you recommend this?"}),(0,eK.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d(!0),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all ${!0===h?"bg-green-500/30 border border-green-500/50 text-green-400":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:[eK.jsx(lB,{className:"w-5 h-5"}),"Yes"]}),(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d(!1),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all ${!1===h?"bg-red-500/30 border border-red-500/50 text-red-400":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:[eK.jsx(lW,{className:"w-5 h-5"}),"No"]})]})]}),eK.jsx("div",{className:"mb-6",children:eK.jsx("textarea",{placeholder:"Any feedback? (optional)",value:p,onChange:e=>m(e.target.value),className:"w-full h-20 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 resize-none text-sm"})}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,disabled:0===o||g,className:"w-full py-4 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-semibold disabled:opacity-50 flex items-center justify-center gap-2",children:g?eK.jsx(sc.Z,{className:"w-5 h-5 animate-spin"}):"Continue"})]},"rating"),"testimonial"===r&&(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[(0,eK.jsxs)("div",{className:"text-center mb-6",children:[eK.jsx("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center bg-gradient-to-br from-neuro-purple/30 to-neuro-magenta/30",children:eK.jsx("span",{className:"text-3xl",children:"\uD83D\uDCAC"})}),eK.jsx("h2",{className:"text-xl font-bold text-white",children:"Share Your Experience"}),eK.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Help others discover amazing journeys"})]}),(0,eK.jsxs)("div",{className:"mb-6",children:[eK.jsx("textarea",{placeholder:"Tell us about your journey... What did you experience? How did it make you feel?",value:f,onChange:e=>x(e.target.value),className:"w-full h-32 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 resize-none"}),eK.jsx("p",{className:"text-xs text-white/40 mt-2",children:"Your testimonial may be featured on our landing page (with your approval)"})]}),(0,eK.jsxs)("div",{className:"flex gap-3",children:[eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a("complete"),className:"flex-1 py-4 rounded-xl bg-white/10 text-white font-medium hover:bg-white/20 transition-colors",children:"Skip"}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,disabled:g,className:"flex-1 py-4 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-semibold disabled:opacity-50 flex items-center justify-center gap-2",children:g?eK.jsx(sc.Z,{className:"w-5 h-5 animate-spin"}):(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(sm.Z,{className:"w-4 h-4"}),"Submit"]})})]})]},"testimonial"),"complete"===r&&(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-8",children:[eK.jsx(ts.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center bg-gradient-to-br from-green-500/30 to-emerald-500/30",children:eK.jsx("span",{className:"text-4xl",children:"\uD83D\uDE4F"})}),eK.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Thank You!"}),eK.jsx("p",{className:"text-white/60 text-sm mb-6",children:"Your feedback helps us improve the experience"}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"px-8 py-3 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-semibold",children:"Done"})]},"complete")]})]})})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let lH=(0,ti.Z)("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),lG=[{id:"not-working",label:"It's not working for me"},{id:"too-intense",label:"Too intense"},{id:"not-intense",label:"Not intense enough"},{id:"busy",label:"Got interrupted / busy"},{id:"other",label:"Other reason"}];function lU({isOpen:e,doseId:t,doseName:s,elapsedTime:i,onConfirmExit:n,onCancel:r}){let{user:a}=(0,su.a)(),[o,l]=(0,e0.useState)(""),[c,u]=(0,e0.useState)(""),[h,d]=(0,e0.useState)(!1),p=async()=>{d(!0),o&&await (0,sN.z1)(a?.id||null,t,s,i,o,c),d(!1),n()},m=()=>{l(""),u(""),r()};return eK.jsx(e1.M,{children:e&&eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",onClick:m,children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"w-full max-w-md glass rounded-3xl p-6 border border-white/20",children:[(0,eK.jsxs)("div",{className:"text-center mb-6",children:[eK.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-500/20 flex items-center justify-center mx-auto mb-4",children:eK.jsx(lH,{className:"w-8 h-8 text-amber-400"})}),eK.jsx("h2",{className:"text-xl font-bold text-white",children:"Leaving so soon?"}),(0,eK.jsxs)("p",{className:"text-white/60 text-sm mt-1",children:["You've only been on ",s," for ",`${Math.floor(i/60)}:${(i%60).toString().padStart(2,"0")}`]})]}),(0,eK.jsxs)("div",{className:"mb-4",children:[eK.jsx("p",{className:"text-sm text-white/60 mb-3",children:"What went wrong?"}),eK.jsx("div",{className:"space-y-2",children:lG.map(e=>eK.jsx("button",{onClick:()=>l(e.id),className:`w-full p-3 rounded-xl text-left text-sm transition-all ${o===e.id?"bg-neuro-purple/30 border border-neuro-purple/50 text-white":"bg-white/5 text-white/70 hover:bg-white/10"}`,children:e.label},e.id))})]}),o&&eK.jsx(ts.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4",children:eK.jsx("textarea",{placeholder:"Tell us more so we can improve... (optional)",value:c,onChange:e=>u(e.target.value),className:"w-full h-20 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 resize-none text-sm"})}),(0,eK.jsxs)("div",{className:"flex gap-3",children:[eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"flex-1 py-3 rounded-xl bg-white/10 text-white font-medium hover:bg-white/20 transition-colors",children:"Continue Trip"}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,disabled:h,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-red-500 to-orange-500 text-white font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:h?eK.jsx(sc.Z,{className:"w-4 h-4 animate-spin"}):"End Trip"})]})]})})})}let l$={idle:"Ready",onset:"Onset",peak:"Peak",sustain:"Sustain",comedown:"Comedown",complete:"Complete"};function lQ(){let{currentDose:e,isPlaying:t,phase:s,elapsedTime:i,totalDuration:n,intensity:r,volume:a,currentVisual:o,showControls:l,togglePlay:c,stopTrip:u,setPhase:h,setElapsedTime:d,setIntensity:p,setVolume:m,setVisual:f,toggleControls:x,addJournalEntry:g}=tt(),{user:y}=(0,su.a)();(0,e0.useRef)(null),(0,e0.useRef)(null);let[b,v]=(0,e0.useState)(!0),[w,j]=(0,e0.useState)(!1),[T,N]=(0,e0.useState)(!1),[C,k]=(0,e0.useState)(!1),[S,A]=(0,e0.useState)(null),[E,M]=(0,e0.useState)(0),[O,D]=(0,e0.useState)(!1);(0,e0.useCallback)(e=>{let t=e/n;t<.15?h("onset"):t<.4?h("peak"):t<.7?h("sustain"):t<1?h("comedown"):h("complete")},[n,h]);let R=()=>{let e=!b;v(e),lk.setEnabled(e),e||lk.stop()};if(!e)return null;let I=i/n*100;return(0,eK.jsxs)(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black",onClick:()=>{x()},children:[eK.jsx(lF,{type:o,intensity:r,colors:e.colors}),eK.jsx(e1.M,{children:l&&(0,eK.jsxs)(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-black/60 pointer-events-none",onClick:e=>e.stopPropagation(),children:[eK.jsx("div",{className:"absolute top-0 left-0 right-0 p-6 pointer-events-auto",children:(0,eK.jsxs)("div",{className:"flex items-center justify-between",children:[(0,eK.jsxs)("div",{children:[eK.jsx("h2",{className:"text-xl font-bold text-white",children:e.name}),eK.jsx("p",{className:"text-sm text-white/60",children:e.tagline})]}),eK.jsx(ts.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:u,className:"p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-6 h-6"})})]})}),eK.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-auto",children:eK.jsx(ts.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),c()},className:"w-20 h-20 rounded-full bg-white/20 backdrop-blur-xl flex items-center justify-center",children:t?eK.jsx(sR,{className:"w-10 h-10 text-white"}):eK.jsx(sI.Z,{className:"w-10 h-10 text-white ml-1"})})}),(0,eK.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6 pointer-events-auto",children:[(0,eK.jsxs)("div",{className:"mb-6",children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between text-sm text-white/60 mb-2",children:[eK.jsx("span",{children:t4(i)}),eK.jsx("span",{className:"px-3 py-1 rounded-full bg-white/10 text-white font-medium",children:l$[s]}),eK.jsx("span",{children:t4(n)})]}),eK.jsx("div",{className:"h-1 bg-white/20 rounded-full overflow-hidden",children:eK.jsx(ts.E.div,{className:"h-full bg-gradient-to-r from-neuro-purple to-neuro-magenta",style:{width:`${I}%`}})})]}),(0,eK.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,eK.jsxs)("div",{className:"glass rounded-xl p-4",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eK.jsx(sP,{className:"w-4 h-4 text-white/60"}),eK.jsx("span",{className:"text-sm text-white/60",children:"Volume"})]}),eK.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a,onChange:e=>m(parseFloat(e.target.value)),className:"w-full accent-neuro-purple",onClick:e=>e.stopPropagation()})]}),(0,eK.jsxs)("div",{className:"glass rounded-xl p-4",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eK.jsx(t7,{className:"w-4 h-4 text-white/60"}),eK.jsx("span",{className:"text-sm text-white/60",children:"Intensity"})]}),eK.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:r,onChange:e=>p(parseInt(e.target.value)),className:"w-full accent-neuro-magenta",onClick:e=>e.stopPropagation()})]})]}),(0,eK.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[T&&eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e=>{e.stopPropagation(),R()},className:`glass rounded-xl p-4 transition-all ${b?"border border-neuro-magenta/50":""}`,children:(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:`p-2 rounded-lg ${b?"bg-neuro-magenta/20":"bg-white/10"}`,children:eK.jsx(sq,{className:`w-5 h-5 ${b?"text-neuro-magenta":"text-white/60"}`})}),(0,eK.jsxs)("div",{className:"text-left",children:[eK.jsx("p",{className:"text-sm font-medium text-white",children:"Haptic"}),eK.jsx("p",{className:"text-xs text-white/50",children:b?"On":"Off"})]})]})}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e=>{e.stopPropagation(),j(!w)},className:`glass rounded-xl p-4 transition-all ${w?"border border-neuro-cyan/50":""}`,children:(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:`p-2 rounded-lg ${w?"bg-neuro-cyan/20":"bg-white/10"}`,children:eK.jsx(sb,{className:`w-5 h-5 ${w?"text-neuro-cyan":"text-white/60"}`})}),(0,eK.jsxs)("div",{className:"text-left",children:[eK.jsx("p",{className:"text-sm font-medium text-white",children:"Breathing"}),eK.jsx("p",{className:"text-xs text-white/50",children:w?"Guided":"Off"})]})]})})]}),w&&eK.jsx("div",{className:"mb-4",onClick:e=>e.stopPropagation(),children:eK.jsx(lz,{isActive:w,onToggle:()=>j(!w),intensity:r,colors:e?.colors,compact:!1})}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e=>{e.stopPropagation(),x()},className:"w-full py-3 rounded-xl bg-white/10 text-white/60 text-sm font-medium hover:bg-white/15 transition-colors",children:"Hide Controls"})]})]})}),eK.jsx(ts.E.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),i<.9*n?D(!0):u()},className:"absolute top-6 right-6 z-50 p-3 rounded-full bg-black/50 hover:bg-black/70 backdrop-blur-sm border border-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-6 h-6 text-white"})}),eK.jsx(lU,{isOpen:O,doseId:e?.id||"",doseName:e?.name||"",elapsedTime:i,onConfirmExit:()=>{D(!1),u()},onCancel:()=>D(!1)}),!l&&(0,eK.jsxs)(ts.E.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center text-white/30",children:[eK.jsx(sA,{className:"w-6 h-6 animate-bounce"}),eK.jsx("span",{className:"text-xs",children:"Tap for controls"})]}),eK.jsx(e1.M,{children:C&&S&&eK.jsx(lZ,{dose:S,duration:E,onClose:()=>{k(!1),A(null)}})})]})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let lY=(0,ti.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),lX=[{id:"psilocybin",name:"Psilocybin",slug:"psilocybin",tagline:"Mushroom Mysticism",description:"Deep introspective journey with fractal visuals and ego dissolution. Experience interconnectedness.",category:"psychedelic",frequencies:[{name:"Theta Deep",baseFreq:200,beatFreq:6,type:"binaural"},{name:"528Hz Love",baseFreq:528,beatFreq:0,type:"solfeggio"}],defaultDuration:1800,intensity:8,visualType:"fractals",colors:["#8b5cf6","#3b82f6","#f59e0b","#22c55e"],effects:["Ego dissolution","Visual fractals","Deep insight","Interconnectedness"],trialsRemaining:500,isPremium:!1},{id:"dmt",name:"DMT Breakthrough",slug:"dmt",tagline:"Hyperspace Gateway",description:"Intense geometric hyperspace breakthrough. Meet the machine elves. Not for beginners.",category:"psychedelic",frequencies:[{name:"Gamma Burst",baseFreq:400,beatFreq:40,type:"binaural"},{name:"963Hz Crown",baseFreq:963,beatFreq:0,type:"solfeggio"}],defaultDuration:900,intensity:10,visualType:"tunnel",colors:["#ec4899","#06b6d4","#f59e0b","#ffffff"],effects:["Hyperspace","Entity contact","Time dissolution","Geometric visions"],trialsRemaining:500,isPremium:!0,price:4.99},{id:"lsd",name:"LSD Journey",slug:"lsd",tagline:"Reality Enhancement",description:"Classic psychedelic experience with enhanced colors, breathing walls, and profound thoughts.",category:"psychedelic",frequencies:[{name:"Alpha Wave",baseFreq:300,beatFreq:10,type:"binaural"},{name:"Theta Layer",baseFreq:250,beatFreq:7,type:"binaural"}],defaultDuration:2700,intensity:7,visualType:"waves",colors:["#f97316","#8b5cf6","#22c55e","#06b6d4"],effects:["Enhanced colors","Breathing visuals","Synesthesia","Time dilation"],trialsRemaining:500,isPremium:!1},{id:"mdma",name:"MDMA Euphoria",slug:"mdma",tagline:"Pure Love & Connection",description:"Waves of euphoria, empathy, and connection. Feel the love radiating through you.",category:"euphoric",frequencies:[{name:"Alpha Bliss",baseFreq:350,beatFreq:10,type:"binaural"},{name:"528Hz Heart",baseFreq:528,beatFreq:0,type:"solfeggio"}],defaultDuration:2400,intensity:8,visualType:"particles",colors:["#ec4899","#f472b6","#fbbf24","#ffffff"],effects:["Euphoria","Empathy","Sensory enhancement","Love waves"],trialsRemaining:500,isPremium:!1},{id:"cannabis",name:"Cannabis Calm",slug:"cannabis",tagline:"Mellow Relaxation",description:"Gentle relaxation with mild euphoria. Perfect for unwinding and creative thinking.",category:"euphoric",frequencies:[{name:"Alpha Chill",baseFreq:220,beatFreq:10,type:"binaural"},{name:"432Hz Earth",baseFreq:432,beatFreq:0,type:"solfeggio"}],defaultDuration:1800,intensity:4,visualType:"breath",colors:["#22c55e","#f59e0b","#8b5cf6","#fbbf24"],effects:["Relaxation","Mild euphoria","Enhanced senses","Creativity"],trialsRemaining:500,isPremium:!1},{id:"ketamine",name:"Ketamine Drift",slug:"ketamine",tagline:"Dissociative Float",description:"Float outside your body through infinite voids. Experience ego death and rebirth.",category:"dissociative",frequencies:[{name:"Delta Deep",baseFreq:150,beatFreq:2,type:"binaural"},{name:"Theta Float",baseFreq:180,beatFreq:5,type:"binaural"}],defaultDuration:1500,intensity:9,visualType:"cosmic",colors:["#ffffff","#6b7280","#06b6d4","#000000"],effects:["Dissociation","Floating","Ego death","Infinite void"],trialsRemaining:500,isPremium:!0,price:3.99},{id:"mescaline",name:"Mescaline Vision",slug:"mescaline",tagline:"Desert Wisdom",description:"Ancient shamanic journey through desert landscapes. Connect with ancestral spirits.",category:"psychedelic",frequencies:[{name:"Theta Vision",baseFreq:280,beatFreq:6,type:"binaural"},{name:"396Hz Root",baseFreq:396,beatFreq:0,type:"solfeggio"}],defaultDuration:2400,intensity:7,visualType:"mandala",colors:["#f59e0b","#92400e","#06b6d4","#dc2626"],effects:["Shamanic visions","Earth connection","Ancestral wisdom","Desert beauty"],trialsRemaining:500,isPremium:!0,price:3.99},{id:"ayahuasca",name:"Ayahuasca Ceremony",slug:"ayahuasca",tagline:"Mother Vine Healing",description:"Deep healing journey with mother ayahuasca. Face your shadows and emerge transformed.",category:"psychedelic",frequencies:[{name:"Delta Heal",baseFreq:120,beatFreq:3,type:"binaural"},{name:"Theta Spirit",baseFreq:200,beatFreq:7,type:"binaural"},{name:"174Hz Pain",baseFreq:174,beatFreq:0,type:"solfeggio"}],defaultDuration:3600,intensity:10,visualType:"chakra",colors:["#22c55e","#8b5cf6","#f59e0b","#dc2626"],effects:["Deep healing","Shadow work","Purging","Rebirth"],trialsRemaining:500,isPremium:!0,price:5.99},{id:"salvia",name:"Salvia Trickster",slug:"salvia",tagline:"Reality Unzipped",description:"Reality tears apart at the seams. Become one with objects. Meet the trickster entities.",category:"dissociative",frequencies:[{name:"Gamma Chaos",baseFreq:450,beatFreq:35,type:"binaural"},{name:"Theta Weird",baseFreq:300,beatFreq:5,type:"binaural"}],defaultDuration:600,intensity:10,visualType:"fractals",colors:["#22c55e","#8b5cf6","#6b7280","#fbbf24"],effects:["Reality dissolution","Object merging","Trickster entities","Bizarre visions"],trialsRemaining:500,isPremium:!0,price:2.99},{id:"2cb",name:"2C-B Sensual",slug:"2cb",tagline:"Playful Psychedelia",description:"Perfect balance of psychedelic visuals and euphoric warmth. Social and sensual.",category:"euphoric",frequencies:[{name:"Alpha Warm",baseFreq:320,beatFreq:10,type:"binaural"},{name:"528Hz Heart",baseFreq:528,beatFreq:0,type:"solfeggio"}],defaultDuration:1800,intensity:6,visualType:"waves",colors:["#ec4899","#06b6d4","#8b5cf6","#f59e0b"],effects:["Sensuality","Mild visuals","Social warmth","Body high"],trialsRemaining:500,isPremium:!1},{id:"nitrous",name:"Nitrous Whomp",slug:"nitrous",tagline:"Brief Cosmic Glimpse",description:"Quick wah-wah-wah journey to brief enlightenment. The cosmic joke revealed.",category:"dissociative",frequencies:[{name:"Theta Flash",baseFreq:400,beatFreq:7,type:"binaural"},{name:"Beta Wobble",baseFreq:380,beatFreq:20,type:"binaural"}],defaultDuration:120,intensity:7,visualType:"tunnel",colors:["#e5e7eb","#ffffff","#f97316","#8b5cf6"],effects:["Wah-wah","Brief enlightenment","Cosmic laughter","Quick peak"],trialsRemaining:500,isPremium:!1},{id:"adderall",name:"Adderall Focus",slug:"adderall",tagline:"Laser Sharp Mind",description:"Crystal clear focus and productivity. Everything becomes achievable and organized.",category:"focus",frequencies:[{name:"Beta Focus",baseFreq:350,beatFreq:18,type:"binaural"},{name:"Gamma Sharp",baseFreq:400,beatFreq:32,type:"binaural"}],defaultDuration:3600,intensity:6,visualType:"breath",colors:["#ffffff","#3b82f6","#f59e0b","#6b7280"],effects:["Hyperfocus","Productivity","Clarity","Drive"],trialsRemaining:500,isPremium:!1},{id:"ambien",name:"Ambien Dreams",slug:"ambien",tagline:"Hypnagogic Portal",description:"Slip into surreal dreamlike states. Reality becomes soft and malleable.",category:"sleep",frequencies:[{name:"Delta Sleep",baseFreq:100,beatFreq:2,type:"binaural"},{name:"Theta Dream",baseFreq:150,beatFreq:5,type:"binaural"}],defaultDuration:1800,intensity:5,visualType:"cosmic",colors:["#1e1b4b","#8b5cf6","#fbbf24","#c084fc"],effects:["Drowsiness","Surreal visions","Hypnagogia","Dream entry"],trialsRemaining:500,isPremium:!0,price:2.99},{id:"ghb",name:"GHB Waves",slug:"ghb",tagline:"Euphoric Relaxation",description:"Waves of warm euphoria wash over you. Social confidence and sensory bliss.",category:"euphoric",frequencies:[{name:"Alpha Warm",baseFreq:280,beatFreq:10,type:"binaural"},{name:"Theta Bliss",baseFreq:220,beatFreq:6,type:"binaural"}],defaultDuration:1500,intensity:7,visualType:"waves",colors:["#f59e0b","#8b5cf6","#ec4899","#fbbf24"],effects:["Euphoria","Social warmth","Relaxation","Sensuality"],trialsRemaining:500,isPremium:!0,price:3.99},{id:"kratom",name:"Kratom Balance",slug:"kratom",tagline:"Natural Harmony",description:"Gentle natural uplift with pain relief. Balanced energy and calm.",category:"natural",frequencies:[{name:"Alpha Balance",baseFreq:260,beatFreq:10,type:"binaural"},{name:"432Hz Earth",baseFreq:432,beatFreq:0,type:"solfeggio"}],defaultDuration:2400,intensity:4,visualType:"breath",colors:["#22c55e","#f59e0b","#92400e","#fbbf24"],effects:["Mood lift","Pain relief","Energy","Calm focus"],trialsRemaining:500,isPremium:!1},{id:"dxm",name:"DXM Plateaus",slug:"dxm",tagline:"Robotic Transcendence",description:"Ascend through dissociative plateaus. Music becomes transcendently meaningful.",category:"dissociative",frequencies:[{name:"Theta Robo",baseFreq:200,beatFreq:6,type:"binaural"},{name:"Delta Plat",baseFreq:120,beatFreq:3,type:"binaural"}],defaultDuration:2400,intensity:8,visualType:"tunnel",colors:["#8b5cf6","#6b7280","#06b6d4","#000000"],effects:["Dissociation","Music enhancement","Plateaus","Robotripping"],trialsRemaining:500,isPremium:!1},{id:"caffeine",name:"Caffeine Rush",slug:"caffeine",tagline:"Clean Energy",description:"Pure focused energy without the jitters. Crystal clear alertness.",category:"focus",frequencies:[{name:"Beta Alert",baseFreq:380,beatFreq:16,type:"binaural"},{name:"Gamma Clear",baseFreq:420,beatFreq:30,type:"binaural"}],defaultDuration:1200,intensity:5,visualType:"breath",colors:["#78350f","#fbbf24","#ffffff","#f59e0b"],effects:["Alertness","Focus","Energy","Clarity"],trialsRemaining:500,isPremium:!1},{id:"meditation",name:"Deep Meditation",slug:"meditation",tagline:"Natural Transcendence",description:"Access deep meditative states naturally. Third eye activation and inner peace.",category:"meditative",frequencies:[{name:"Theta Zen",baseFreq:200,beatFreq:7,type:"binaural"},{name:"Alpha Peace",baseFreq:250,beatFreq:10,type:"binaural"},{name:"963Hz Crown",baseFreq:963,beatFreq:0,type:"solfeggio"}],defaultDuration:2400,intensity:3,visualType:"chakra",colors:["#6366f1","#8b5cf6","#f59e0b","#ffffff"],effects:["Inner peace","Third eye","Transcendence","Stillness"],trialsRemaining:500,isPremium:!1},{id:"runners-high",name:"Runner's High",slug:"runners-high",tagline:"Endorphin Rush",description:"Natural endorphin and endocannabinoid release. Feel triumphant and alive.",category:"natural",frequencies:[{name:"Alpha Flow",baseFreq:300,beatFreq:10,type:"binaural"},{name:"Beta Energy",baseFreq:350,beatFreq:18,type:"binaural"}],defaultDuration:1800,intensity:6,visualType:"particles",colors:["#f97316","#fbbf24","#22c55e","#06b6d4"],effects:["Euphoria","Energy","Achievement","Clarity"],trialsRemaining:500,isPremium:!1},{id:"lean",name:"Lean Purple",slug:"lean",tagline:"Slow Motion Waves",description:"Everything slows down to half speed. Heavy sedation and warm comfort.",category:"euphoric",frequencies:[{name:"Delta Slow",baseFreq:100,beatFreq:2,type:"binaural"},{name:"Theta Nod",baseFreq:140,beatFreq:5,type:"binaural"}],defaultDuration:2400,intensity:7,visualType:"waves",colors:["#7c3aed","#a855f7","#c084fc","#ffffff"],effects:["Time dilation","Sedation","Warmth","Music enhancement"],trialsRemaining:500,isPremium:!0,price:3.99}],lJ=[{id:"euphoric",name:"Euphoric",icon:"✨",color:"#ec4899"},{id:"psychedelic",name:"Psychedelic",icon:"\uD83C\uDF44",color:"#8b5cf6"},{id:"meditative",name:"Meditative",icon:"\uD83E\uDDD8",color:"#06b6d4"},{id:"creative",name:"Creative",icon:"\uD83C\uDFA8",color:"#f97316"},{id:"sleep",name:"Sleep",icon:"\uD83C\uDF19",color:"#6366f1"},{id:"focus",name:"Focus",icon:"\uD83C\uDFAF",color:"#22c55e"},{id:"dissociative",name:"Dissociative",icon:"\uD83C\uDF00",color:"#6b7280"},{id:"natural",name:"Natural",icon:"\uD83C\uDF3F",color:"#84cc16"}];var lK=s(962);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l0=(0,ti.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var l1=s(4061),l2=s(7739),l4=s(2113),l5=s(6143),l3=s(4351),l6=s(2244),l8=s(3341),l9=s(6245),l7=class extends l3.l{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#s=(0,l6.O)(),this.bindMethods(),this.setOptions(t)}#e;#i=void 0;#n=void 0;#r=void 0;#a;#o;#s;#t;#l;#c;#u;#h;#d;#p;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#i.addObserver(this),ce(this.#i,this.options)?this.#f():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ct(this.#i,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ct(this.#i,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#g(),this.#y(),this.#i.removeObserver(this)}setOptions(e){let t=this.options,s=this.#i;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l8.Nc)(this.options.enabled,this.#i))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#b(),this.#i.setOptions(this.options),t._defaulted&&!(0,l8.VS)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#i,observer:this});let i=this.hasListeners();i&&cs(this.#i,s,this.options,t)&&this.#f(),this.updateResult(),i&&(this.#i!==s||(0,l8.Nc)(this.options.enabled,this.#i)!==(0,l8.Nc)(t.enabled,this.#i)||(0,l8.KC)(this.options.staleTime,this.#i)!==(0,l8.KC)(t.staleTime,this.#i))&&this.#v();let n=this.#_();i&&(this.#i!==s||(0,l8.Nc)(this.options.enabled,this.#i)!==(0,l8.Nc)(t.enabled,this.#i)||n!==this.#p)&&this.#w(n)}getOptimisticResult(e){let t=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(t,e);return(0,l8.VS)(this.getCurrentResult(),s)||(this.#r=s,this.#o=this.options,this.#a=this.#i.state),s}getCurrentResult(){return this.#r}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),t?.(s),"promise"!==s||(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#s.status||this.#s.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#i}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#f(e){this.#b();let t=this.#i.fetch(this.options,e);return e?.throwOnError||(t=t.catch(l8.ZT)),t}#v(){this.#g();let e=(0,l8.KC)(this.options.staleTime,this.#i);if(l8.sk||this.#r.isStale||!(0,l8.PN)(e))return;let t=(0,l8.Kp)(this.#r.dataUpdatedAt,e);this.#h=l9.mr.setTimeout(()=>{this.#r.isStale||this.updateResult()},t+1)}#_(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#i):this.options.refetchInterval)??!1}#w(e){this.#y(),this.#p=e,!l8.sk&&!1!==(0,l8.Nc)(this.options.enabled,this.#i)&&(0,l8.PN)(this.#p)&&0!==this.#p&&(this.#d=l9.mr.setInterval(()=>{(this.options.refetchIntervalInBackground||l2.j.isFocused())&&this.#f()},this.#p))}#x(){this.#v(),this.#w(this.#_())}#g(){this.#h&&(l9.mr.clearTimeout(this.#h),this.#h=void 0)}#y(){this.#d&&(l9.mr.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let s;let i=this.#i,n=this.options,r=this.#r,a=this.#a,o=this.#o,l=e!==i?e.state:this.#n,{state:c}=e,u={...c},h=!1;if(t._optimisticResults){let s=this.hasListeners(),r=!s&&ce(e,t),a=s&&cs(e,i,t,n);(r||a)&&(u={...u,...(0,l5.z)(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:d,errorUpdatedAt:p,status:m}=u;s=u.data;let f=!1;if(void 0!==t.placeholderData&&void 0===s&&"pending"===m){let e;r?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(e=r.data,f=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#u?.state.data,this.#u):t.placeholderData,void 0!==e&&(m="success",s=(0,l8.oE)(r?.data,e,t),h=!0)}if(t.select&&void 0!==s&&!f){if(r&&s===a?.data&&t.select===this.#l)s=this.#c;else try{this.#l=t.select,s=t.select(s),s=(0,l8.oE)(r?.data,s,t),this.#c=s,this.#t=null}catch(e){this.#t=e}}this.#t&&(d=this.#t,s=this.#c,p=Date.now(),m="error");let x="fetching"===u.fetchStatus,g="pending"===m,y="error"===m,b=g&&x,v=void 0!==s,w={status:m,fetchStatus:u.fetchStatus,isPending:g,isSuccess:"success"===m,isError:y,isInitialLoading:b,isLoading:b,data:s,dataUpdatedAt:u.dataUpdatedAt,error:d,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:x,isRefetching:x&&!g,isLoadingError:y&&!v,isPaused:"paused"===u.fetchStatus,isPlaceholderData:h,isRefetchError:y&&v,isStale:ci(e,t),refetch:this.refetch,promise:this.#s,isEnabled:!1!==(0,l8.Nc)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},s=()=>{t(this.#s=w.promise=(0,l6.O)())},n=this.#s;switch(n.status){case"pending":e.queryHash===i.queryHash&&t(n);break;case"fulfilled":("error"===w.status||w.data!==n.value)&&s();break;case"rejected":("error"!==w.status||w.error!==n.reason)&&s()}}return w}updateResult(){let e=this.#r,t=this.createResult(this.#i,this.options);this.#a=this.#i.state,this.#o=this.options,void 0!==this.#a.data&&(this.#u=this.#i),(0,l8.VS)(t,e)||(this.#r=t,this.#j({listeners:(()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!this.#m.size)return!0;let i=new Set(s??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(t=>this.#r[t]!==e[t]&&i.has(t))})()}))}#b(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#i)return;let t=this.#i;this.#i=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#j(e){l4.Vr.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#i,type:"observerResultsUpdated"})})}};function ce(e,t){return!1!==(0,l8.Nc)(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)||void 0!==e.state.data&&ct(e,t,t.refetchOnMount)}function ct(e,t,s){if(!1!==(0,l8.Nc)(t.enabled,e)&&"static"!==(0,l8.KC)(t.staleTime,e)){let i="function"==typeof s?s(e):s;return"always"===i||!1!==i&&ci(e,t)}return!1}function cs(e,t,s,i){return(e!==t||!1===(0,l8.Nc)(i.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&ci(e,s)}function ci(e,t){return!1!==(0,l8.Nc)(t.enabled,e)&&e.isStaleByTime((0,l8.KC)(t.staleTime,e))}var cn=s(4976),cr=e0.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),ca=()=>e0.useContext(cr),co=(e,t,s)=>{let i=s?.state.error&&"function"==typeof e.throwOnError?(0,l8.L3)(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||i)&&!t.isReset()&&(e.retryOnMount=!1)},cl=e=>{e0.useEffect(()=>{e.clearReset()},[e])},cc=({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(n&&void 0===e.data||(0,l8.L3)(s,[e.error,i])),cu=e0.createContext(!1),ch=()=>e0.useContext(cu);cu.Provider;var cd=e=>{if(e.suspense){let t=e=>"static"===e?e:Math.max(e??1e3,1e3),s=e.staleTime;e.staleTime="function"==typeof s?(...e)=>t(s(...e)):t(s),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}},cp=(e,t)=>e.isLoading&&e.isFetching&&!t,cm=(e,t)=>e?.suspense&&t.isPending,cf=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});async function cx(){try{let e=await fetch("/api/trials");return(await e.json()).count}catch(e){return console.error("Error fetching trial count:",e),420}}function cg({dose:e,onSelect:t,onRequireAuth:s}){let{isPremium:i}=tt(),{user:n}=(0,su.a)(),[r,a]=(0,e0.useState)(!1),[o,l]=(0,e0.useState)(!1),{trialCount:c,isLoading:u}=function(){let{data:e=420,isLoading:t,error:s}=function(e,t,s){let i=ch(),n=ca(),r=(0,cn.NL)(s),a=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(a);let o=r.getQueryCache().get(a.queryHash);a._optimisticResults=i?"isRestoring":"optimistic",cd(a),co(a,n,o),cl(n);let l=!r.getQueryCache().get(a.queryHash),[c]=e0.useState(()=>new t(r,a)),u=c.getOptimisticResult(a),h=!i&&!1!==e.subscribed;if(e0.useSyncExternalStore(e0.useCallback(e=>{let t=h?c.subscribe(l4.Vr.batchCalls(e)):l8.ZT;return c.updateResult(),t},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),e0.useEffect(()=>{c.setOptions(a)},[a,c]),cm(a,u))throw cf(a,c,n);if(cc({result:u,errorResetBoundary:n,throwOnError:a.throwOnError,query:o,suspense:a.suspense}))throw u.error;if(r.getDefaultOptions().queries?._experimental_afterQuery?.(a,u),a.experimental_prefetchInRender&&!l8.sk&&cp(u,i)){let e=l?cf(a,c,n):o?.promise;e?.catch(l8.ZT).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}({queryKey:["trialCount"],queryFn:cx,staleTime:3e4,gcTime:3e5,refetchInterval:6e4},l7,void 0);return{trialCount:e,isLoading:t,error:s}}(),h=lJ.find(t=>t.id===e.category),d=c>0,p=e.isPremium&&!i&&!d,m=()=>{if(!p){if(!n){s();return}t(e)}},f=e=>`${Math.floor(e/60)} min`;return(0,eK.jsxs)(ts.E.div,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:m,className:t2("relative glass rounded-2xl p-5 cursor-pointer transition-all duration-300","border border-white/10 hover:border-white/20","bg-gradient-to-br from-white/5 to-white/0",p&&"opacity-60 cursor-not-allowed"),style:{boxShadow:`0 0 40px ${e.colors[0]}15`},children:[(0,eK.jsxs)("div",{className:"absolute top-3 right-3 flex items-center gap-2",children:[e.isPremium&&(0,eK.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30",children:[eK.jsx(t9.Z,{className:"w-3 h-3 text-amber-400"}),eK.jsx("span",{className:"text-xs font-medium text-amber-400",children:"Premium"})]}),eK.jsx("button",{onClick:e=>{e.stopPropagation(),l(!0)},className:"p-1.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(l0,{className:"w-4 h-4 text-white/60"})})]}),eK.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl mb-4",style:{backgroundColor:`${h?.color}20`},children:h?.icon}),eK.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:e.name}),eK.jsx("p",{className:"text-sm text-white/50 mb-3",children:e.tagline}),eK.jsx("p",{className:"text-sm text-white/70 mb-4 line-clamp-2",children:e.description}),(0,eK.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-1.5 text-white/60",children:[eK.jsx(t8,{className:"w-4 h-4"}),eK.jsx("span",{className:"text-xs",children:f(e.defaultDuration)})]}),(0,eK.jsxs)("div",{className:"flex items-center gap-1.5 text-white/60",children:[eK.jsx(t7,{className:"w-4 h-4"}),(0,eK.jsxs)("span",{className:"text-xs",children:["Intensity ",e.intensity,"/10"]})]})]}),eK.jsx("div",{className:"flex flex-wrap gap-1.5 mb-4",children:e.frequencies.slice(0,2).map((e,t)=>eK.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-white/10 text-white/70",children:e.name},t))}),(0,eK.jsxs)("div",{className:"flex items-center justify-between",children:[eK.jsx("div",{className:"flex items-center gap-2",children:u?(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(l1.Z,{className:"w-4 h-4 text-amber-400/50 animate-pulse"}),eK.jsx("span",{className:"text-xs font-medium text-amber-400/50",children:"Loading..."})]}):d?(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(l1.Z,{className:"w-4 h-4 text-amber-400"}),(0,eK.jsxs)("span",{className:"text-xs font-medium text-amber-400",children:[c,"/420 free globally"]})]}):p?(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(sa,{className:"w-4 h-4 text-white/40"}),eK.jsx("span",{className:"text-xs text-white/40",children:"Promo ended"})]}):eK.jsx("span",{className:"text-xs text-white/50",children:"Ready to experience"})}),eK.jsx(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),m()},className:t2("px-4 py-2 rounded-full text-sm font-medium transition-all",p?"bg-white/10 text-white/40":"bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white"),children:p?"Locked":"Experience"})]}),eK.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-0.5 rounded-full opacity-50",style:{background:`linear-gradient(90deg, ${e.colors[0]}, ${e.colors[1]||e.colors[0]})`}}),r&&o&&(0,lK.createPortal)(eK.jsx(e1.M,{children:eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/95 backdrop-blur-xl",onClick:()=>l(!1),children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},onClick:e=>e.stopPropagation(),className:"w-full max-w-lg glass rounded-3xl p-6 border border-white/20 max-h-[85vh] overflow-y-auto",style:{boxShadow:`0 0 100px ${e.colors[0]}50, 0 0 40px ${e.colors[0]}30`},children:[(0,eK.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center text-3xl",style:{backgroundColor:`${h?.color}20`},children:h?.icon}),(0,eK.jsxs)("div",{children:[eK.jsx("h3",{className:"text-xl font-bold text-white",children:e.name}),eK.jsx("p",{className:"text-sm text-white/60",children:e.tagline})]})]}),eK.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-5 h-5"})})]}),eK.jsx("p",{className:"text-white/80 mb-6 leading-relaxed",children:e.description}),(0,eK.jsxs)("div",{className:"mb-6",children:[eK.jsx("h4",{className:"text-sm font-semibold text-white/60 mb-2 uppercase tracking-wider",children:"What to Expect"}),eK.jsx("div",{className:"flex flex-wrap gap-2",children:e.effects.map((e,t)=>eK.jsx("span",{className:"px-3 py-1.5 rounded-full text-sm bg-white/10 text-white/80",children:e},t))})]}),(0,eK.jsxs)("div",{className:"mb-6 p-4 rounded-xl bg-gradient-to-r from-neuro-purple/10 to-neuro-magenta/10 border border-neuro-purple/20",children:[eK.jsx("h4",{className:"text-sm font-semibold text-neuro-purple mb-2",children:"\uD83E\uDDE0 The Science"}),(0,eK.jsxs)("p",{className:"text-xs text-white/60 leading-relaxed",children:["This experience uses ",e.frequencies.length," frequency layer",e.frequencies.length>1?"s":""," including ",e.frequencies[0].name,' to guide your brainwaves into the desired state. Binaural beats work by playing slightly different frequencies in each ear, creating a perceived "beat" that entrains your brain.']})]}),(0,eK.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,eK.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[eK.jsx(t8,{className:"w-5 h-5 mx-auto mb-1 text-white/60"}),eK.jsx("p",{className:"text-lg font-bold text-white",children:f(e.defaultDuration)}),eK.jsx("p",{className:"text-xs text-white/40",children:"Duration"})]}),(0,eK.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[eK.jsx(t7,{className:"w-5 h-5 mx-auto mb-1 text-white/60"}),(0,eK.jsxs)("p",{className:"text-lg font-bold text-white",children:[e.intensity,"/10"]}),eK.jsx("p",{className:"text-xs text-white/40",children:"Intensity"})]}),(0,eK.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[eK.jsx(t9.Z,{className:"w-5 h-5 mx-auto mb-1 text-white/60"}),eK.jsx("p",{className:"text-lg font-bold text-white",children:e.visualType}),eK.jsx("p",{className:"text-xs text-white/40",children:"Visual"})]})]}),eK.jsx("button",{onClick:e=>{e.stopPropagation(),l(!1),m()},disabled:p,className:t2("w-full py-4 rounded-xl font-semibold transition-all",p?"bg-white/10 text-white/40 cursor-not-allowed":"bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white hover:shadow-lg hover:shadow-neuro-purple/30"),children:p?"Unlock with Premium":n?"Start Experience":"Sign In to Experience"})]})})}),document.body)]})}let cy=[{id:"basic",name:"Basic",price:9.99,period:"month",features:["All premium doses","Custom Trip Builder","90-minute sessions","All visual patterns","No ads"],popular:!1},{id:"premium",name:"Premium Plus",price:19.99,period:"month",features:["Everything in Basic","EEG Integration","Biometric sync","Spatial audio","AR Visual mode","Priority support"],popular:!0},{id:"pro",name:"Professional",price:49.99,period:"month",features:["Everything in Premium","Therapist dashboard","Client session export","Multi-user support","API access","White-label option"],popular:!1}];function cb({isOpen:e,onClose:t,feature:s}){let{setPremium:i}=tt(),n=e=>{i(!0),t()};return eK.jsx(e1.M,{children:e&&eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:t,children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},onClick:e=>e.stopPropagation(),className:"relative w-full max-w-4xl max-h-[90vh] overflow-y-auto glass rounded-3xl p-6",children:[eK.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-5 h-5"})}),(0,eK.jsxs)("div",{className:"text-center mb-8",children:[(0,eK.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30 mb-4",children:[eK.jsx(tl,{className:"w-5 h-5 text-amber-400"}),eK.jsx("span",{className:"text-sm font-medium text-amber-400",children:"Unlock Full Experience"})]}),eK.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Choose Your Journey"}),s&&(0,eK.jsxs)("p",{className:"text-white/60",children:[eK.jsx("span",{className:"text-neuro-purple",children:s})," is a Premium feature"]})]}),eK.jsx("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:cy.map(e=>(0,eK.jsxs)(ts.E.div,{whileHover:{scale:1.02},className:`relative rounded-2xl p-5 border transition-all ${e.popular?"bg-gradient-to-b from-neuro-purple/20 to-neuro-magenta/20 border-neuro-purple/50":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[e.popular&&eK.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 rounded-full bg-gradient-to-r from-neuro-purple to-neuro-magenta text-xs font-bold",children:"MOST POPULAR"}),eK.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:e.name}),(0,eK.jsxs)("div",{className:"flex items-baseline gap-1 mb-4",children:[(0,eK.jsxs)("span",{className:"text-3xl font-bold text-white",children:["$",e.price]}),(0,eK.jsxs)("span",{className:"text-white/50",children:["/",e.period]})]}),eK.jsx("ul",{className:"space-y-2 mb-6",children:e.features.map((e,t)=>(0,eK.jsxs)("li",{className:"flex items-center gap-2 text-sm text-white/70",children:[eK.jsx(sj.Z,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),e]},t))}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(e.id),className:`w-full py-3 rounded-xl font-medium transition-all ${e.popular?"bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:"Start Free Trial"})]},e.id))}),eK.jsx("p",{className:"text-center text-xs text-white/40",children:"7-day free trial • Cancel anytime • Secure payment via Stripe"})]})})})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let cv=(0,ti.Z)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),c_=(0,ti.Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);var cw=s(3855);function cj({type:e,category:t}){let{user:s}=(0,su.a)(),[i,n]=(0,e0.useState)(!1),[r,a]=(0,e0.useState)(""),[o,l]=(0,e0.useState)(!1),[c,u]=(0,e0.useState)(!1),[h,d]=(0,e0.useState)(""),p=async()=>{if(r.trim()){l(!0),d("");try{await (0,sN.ZO)(s?.id||null,e,r,t)?(u(!0),setTimeout(()=>{n(!1),u(!1),a("")},2e3)):d("Failed to submit. Please try again.")}catch(e){d("Something went wrong.")}finally{l(!1)}}},m="drug"===e?cv:c_,f="drug"===e?"Suggest a Dose":"Suggest a Visual",x="drug"===e?`Describe your ideal ${t||"binaural"} experience...`:"Describe your dream visual pattern...",g=t?`for ${t}`:"";return(0,eK.jsxs)(eK.Fragment,{children:[(0,eK.jsxs)(ts.E.div,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>n(!0),className:"relative glass rounded-2xl p-5 cursor-pointer transition-all duration-300 border border-dashed border-white/20 hover:border-neuro-purple/50 min-h-[200px] flex flex-col items-center justify-center gap-3",children:[eK.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-r from-neuro-purple/20 to-neuro-magenta/20 flex items-center justify-center",children:eK.jsx(cw.Z,{className:"w-7 h-7 text-neuro-purple"})}),(0,eK.jsxs)("div",{className:"text-center",children:[eK.jsx("h3",{className:"font-semibold text-white mb-1",children:f}),eK.jsx("p",{className:"text-xs text-white/50",children:"drug"===e?`Help us create new ${t||""} experiences`:"Describe visuals, AI generates them"})]}),eK.jsx("span",{className:"px-3 py-1 rounded-full bg-neuro-purple/20 text-neuro-purple text-xs font-medium",children:"Submit Idea"})]}),eK.jsx(e1.M,{children:i&&eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>!o&&n(!1),children:eK.jsx(ts.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"w-full max-w-md glass rounded-3xl p-6 border border-white/20",children:c?(0,eK.jsxs)("div",{className:"text-center py-8",children:[eK.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-4",children:eK.jsx(t9.Z,{className:"w-8 h-8 text-green-400"})}),eK.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Thanks!"}),eK.jsx("p",{className:"text-white/60",children:"Your suggestion has been submitted. We'll review it soon!"})]}):(0,eK.jsxs)(eK.Fragment,{children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-neuro-purple/20 to-neuro-magenta/20 flex items-center justify-center",children:eK.jsx(m,{className:"w-6 h-6 text-neuro-purple"})}),(0,eK.jsxs)("div",{children:[eK.jsx("h3",{className:"text-lg font-bold text-white",children:f}),eK.jsx("p",{className:"text-xs text-white/60",children:g||"Help shape the future"})]})]}),eK.jsx("button",{onClick:()=>n(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-5 h-5"})})]}),h&&eK.jsx("div",{className:"mb-4 p-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 text-sm",children:h}),(0,eK.jsxs)("div",{className:"space-y-4",children:[(0,eK.jsxs)("div",{children:[eK.jsx("label",{className:"text-sm text-white/60 mb-2 block",children:"Your Suggestion"}),eK.jsx("textarea",{value:r,onChange:e=>a(e.target.value),placeholder:x,rows:4,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 resize-none"})]}),"visual"===e&&(0,eK.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/20",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eK.jsx(t9.Z,{className:"w-4 h-4 text-amber-400"}),eK.jsx("span",{className:"text-sm font-semibold text-amber-400",children:"AI Visual Generator"})]}),eK.jsx("p",{className:"text-xs text-white/60",children:"In the future, AI will generate custom WebGL shaders from your description. For now, our team will review and create visuals based on popular suggestions!"})]}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,disabled:!r.trim()||o,className:"w-full py-4 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-semibold disabled:opacity-50 flex items-center justify-center gap-2",children:o?(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(sc.Z,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):(0,eK.jsxs)(eK.Fragment,{children:[eK.jsx(sm.Z,{className:"w-5 h-5"}),"Submit Suggestion"]})})]})]})})})})]})}function cT({dose:e,onComplete:t,onCancel:s}){let[i,n]=(0,e0.useState)(5),[r,a]=(0,e0.useState)("inhale");return(0,eK.jsxs)(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black flex flex-col items-center justify-center",children:[eK.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:`radial-gradient(circle at center, ${e.colors[0]}40, transparent 70%)`}}),eK.jsx(ts.E.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},onClick:s,className:"absolute top-6 right-6 px-4 py-2 rounded-full bg-white/10 text-white/60 text-sm hover:bg-white/20 transition-colors",children:"Cancel"}),eK.jsx(ts.E.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},className:"mb-8",children:eK.jsx("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-neuro-purple to-neuro-magenta flex items-center justify-center",children:eK.jsx("span",{className:"text-4xl",children:"\uD83E\uDDE0"})})}),eK.jsx(ts.E.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-2xl font-bold text-white mb-2",children:e.name}),eK.jsx(ts.E.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-white/60 mb-12",children:e.tagline}),(0,eK.jsxs)("div",{className:"relative mb-8",children:[eK.jsx(ts.E.div,{animate:{scale:"inhale"===r?1.3:1,opacity:"inhale"===r?.5:.2},transition:{duration:1,ease:"easeInOut"},className:"absolute inset-0 rounded-full",style:{background:`radial-gradient(circle, ${e.colors[0]}60, transparent)`,width:"200px",height:"200px",marginLeft:"-20px",marginTop:"-20px"}}),eK.jsx(ts.E.div,{animate:{scale:"inhale"===r?1.2:.9},transition:{duration:1,ease:"easeInOut"},className:"w-40 h-40 rounded-full flex items-center justify-center relative",style:{background:`linear-gradient(135deg, ${e.colors[0]}80, ${e.colors[1]||e.colors[0]}80)`,boxShadow:`0 0 60px ${e.colors[0]}40`},children:eK.jsx(e1.M,{mode:"wait",children:eK.jsx(ts.E.span,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.3},className:"text-6xl font-bold text-white",children:i},i)})})]}),(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center",children:[eK.jsx("p",{className:"text-xl text-white font-medium",children:"inhale"===r?"Breathe In...":"Breathe Out..."}),eK.jsx("p",{className:"text-white/50 text-sm mt-2",children:"Relax and prepare for your journey"})]},r),eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"absolute bottom-12 left-0 right-0 text-center",children:(0,eK.jsxs)("div",{className:"flex items-center justify-center gap-6 text-white/40 text-sm",children:[eK.jsx("span",{children:"\uD83C\uDFA7 Headphones on"}),eK.jsx("span",{children:"\uD83D\uDC41️ Close your eyes"}),eK.jsx("span",{children:"\uD83E\uDDD8 Relax your body"})]})})]})}function cN(){let[e,t]=(0,e0.useState)(""),[s,i]=(0,e0.useState)("all"),[n,r]=(0,e0.useState)(!1),[a,o]=(0,e0.useState)(!1),[l,c]=(0,e0.useState)(null),{startTrip:u,isPremium:h}=tt(),{user:d}=(0,su.a)(),p=lX.filter(t=>{let i=t.name.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase()),n="all"===s||t.category===s;return i&&n}),m=async e=>{c(e)},f=async()=>{l&&d&&(h||await (0,sN.pt)(l.id,d.id),u(l),c(null))};return(0,eK.jsxs)("div",{className:"min-h-screen pb-32",children:[(0,eK.jsxs)("div",{className:"sticky top-0 z-40 bg-neuro-deep/80 backdrop-blur-xl border-b border-white/5",children:[(0,eK.jsxs)("div",{className:"px-4 pt-12 pb-4",children:[eK.jsx("h1",{className:"text-3xl font-bold text-gradient mb-1",children:"Dispensary"}),eK.jsx("p",{className:"text-white/50 text-sm",children:"Choose your consciousness journey"})]}),eK.jsx("div",{className:"px-4 pb-4",children:(0,eK.jsxs)("div",{className:"relative",children:[eK.jsx(lY,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),eK.jsx("input",{type:"text",placeholder:"Search experiences...",value:e,onChange:e=>t(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 transition-colors"})]})}),(0,eK.jsxs)("div",{className:"relative",children:[eK.jsx("div",{className:"px-4 pb-4 overflow-x-auto scrollbar-hide",children:(0,eK.jsxs)("div",{className:"flex gap-2 pb-1",children:[eK.jsx("button",{onClick:()=>i("all"),className:`px-4 py-2.5 rounded-full text-sm font-medium whitespace-nowrap transition-all flex-shrink-0 ${"all"===s?"bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white shadow-lg shadow-neuro-purple/30":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:"All Doses"}),lJ.map(e=>(0,eK.jsxs)("button",{onClick:()=>i(e.id),className:`px-4 py-2.5 rounded-full text-sm font-medium whitespace-nowrap transition-all flex items-center gap-1.5 flex-shrink-0 ${s===e.id?"text-white shadow-lg":"bg-white/5 text-white/60 hover:bg-white/10"}`,style:{background:s===e.id?`${e.color}30`:void 0,boxShadow:s===e.id?`0 4px 15px ${e.color}40`:void 0},children:[eK.jsx("span",{children:e.icon}),eK.jsx("span",{className:"hidden sm:inline",children:e.name})]},e.id))]})}),eK.jsx("div",{className:"absolute right-0 top-0 bottom-4 w-8 bg-gradient-to-l from-neuro-deep to-transparent pointer-events-none"})]})]}),(0,eK.jsxs)("div",{className:"px-4 py-6",children:[(0,eK.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[p.map((e,t)=>eK.jsx(ts.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:eK.jsx(cg,{dose:e,onSelect:m,onRequireAuth:()=>o(!0)})},e.id)),eK.jsx(ts.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*p.length},children:eK.jsx(cj,{type:"drug",category:"all"!==s?lJ.find(e=>e.id===s)?.name:void 0})}),eK.jsx(ts.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:(p.length+1)*.05},children:eK.jsx(cj,{type:"visual"})})]}),0===p.length&&(0,eK.jsxs)("div",{className:"text-center py-12 mb-4",children:[eK.jsx("p",{className:"text-white/40 mb-4",children:"No experiences found in this category yet"}),eK.jsx("p",{className:"text-white/60 text-sm",children:"Be the first to suggest one! \uD83D\uDC47"})]})]}),eK.jsx(cb,{isOpen:n,onClose:()=>r(!1),feature:"Premium Doses"}),eK.jsx(sh,{isOpen:a,onClose:()=>o(!1)}),eK.jsx(e1.M,{children:l&&eK.jsx(cT,{dose:l,onComplete:f,onCancel:()=>{c(null)}})})]})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let cC=(0,ti.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ck=(0,ti.Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),cS=(0,ti.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),cA=(0,ti.Z)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),cE=(0,ti.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),cM=(0,ti.Z)("Watch",[["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["polyline",{points:"12 10 12 12 13 13",key:"19dquz"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}]]),cO=(0,ti.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function cD(){let[e,t]=(0,e0.useState)(!1);return(0,eK.jsxs)(eK.Fragment,{children:[(0,eK.jsxs)(ts.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(!0),className:"glass rounded-2xl p-5 cursor-pointer border border-white/10 hover:border-neuro-cyan/30 transition-all",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-4",children:[eK.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-r from-neuro-cyan/20 to-blue-500/20 flex items-center justify-center",children:eK.jsx(cM,{className:"w-7 h-7 text-neuro-cyan"})}),(0,eK.jsxs)("div",{className:"flex-1",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[eK.jsx("h3",{className:"font-semibold text-white",children:"Biometric Sync"}),eK.jsx("span",{className:"px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400 text-xs font-medium",children:"Coming Soon"})]}),eK.jsx("p",{className:"text-xs text-white/60",children:"Connect Apple Watch or Fitbit for real-time adaptation"})]}),eK.jsx(sT.Z,{className:"w-5 h-5 text-white/40"})]}),(0,eK.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[(0,eK.jsxs)("div",{className:"text-center p-2 rounded-xl bg-white/5",children:[eK.jsx(cE,{className:"w-4 h-4 mx-auto mb-1 text-red-400"}),eK.jsx("p",{className:"text-sm font-bold text-white",children:"--"}),eK.jsx("p",{className:"text-xs text-white/40",children:"BPM"})]}),(0,eK.jsxs)("div",{className:"text-center p-2 rounded-xl bg-white/5",children:[eK.jsx(cO,{className:"w-4 h-4 mx-auto mb-1 text-green-400"}),eK.jsx("p",{className:"text-sm font-bold text-white",children:"--"}),eK.jsx("p",{className:"text-xs text-white/40",children:"HRV"})]}),(0,eK.jsxs)("div",{className:"text-center p-2 rounded-xl bg-white/5",children:[eK.jsx(t9.Z,{className:"w-4 h-4 mx-auto mb-1 text-purple-400"}),eK.jsx("p",{className:"text-sm font-bold text-white",children:"--"}),eK.jsx("p",{className:"text-xs text-white/40",children:"Stress"})]})]})]}),eK.jsx(e1.M,{children:e&&eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>t(!1),children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"w-full max-w-md glass rounded-3xl p-6 border border-white/20",children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-neuro-cyan/20 to-blue-500/20 flex items-center justify-center",children:eK.jsx(cM,{className:"w-6 h-6 text-neuro-cyan"})}),(0,eK.jsxs)("div",{children:[eK.jsx("h3",{className:"text-xl font-bold text-white",children:"Biometric Sync"}),eK.jsx("p",{className:"text-xs text-white/60",children:"Real-time adaptation"})]})]}),eK.jsx("button",{onClick:()=>t(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-5 h-5"})})]}),(0,eK.jsxs)("div",{className:"space-y-4",children:[eK.jsx("p",{className:"text-white/80",children:"Connect your wearable device to unlock intelligent, real-time session adaptation based on your biometrics."}),(0,eK.jsxs)("div",{className:"space-y-3",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5",children:[eK.jsx(cE,{className:"w-5 h-5 text-red-400"}),(0,eK.jsxs)("div",{children:[eK.jsx("h4",{className:"text-sm font-medium text-white",children:"Heart Rate Monitoring"}),eK.jsx("p",{className:"text-xs text-white/50",children:"Adjust intensity based on your pulse"})]})]}),(0,eK.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5",children:[eK.jsx(cO,{className:"w-5 h-5 text-green-400"}),(0,eK.jsxs)("div",{children:[eK.jsx("h4",{className:"text-sm font-medium text-white",children:"HRV Analysis"}),eK.jsx("p",{className:"text-xs text-white/50",children:"Optimize frequencies for your nervous system"})]})]}),(0,eK.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5",children:[eK.jsx(t9.Z,{className:"w-5 h-5 text-purple-400"}),(0,eK.jsxs)("div",{children:[eK.jsx("h4",{className:"text-sm font-medium text-white",children:"Stress Detection"}),eK.jsx("p",{className:"text-xs text-white/50",children:"Auto-adjust when you need it most"})]})]})]}),(0,eK.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/20",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eK.jsx(t9.Z,{className:"w-4 h-4 text-amber-400"}),eK.jsx("span",{className:"text-sm font-semibold text-amber-400",children:"Coming Q3 2024"})]}),eK.jsx("p",{className:"text-xs text-white/60",children:"We're working on Apple HealthKit and Fitbit integrations. Stay tuned for updates!"})]}),eK.jsx("button",{onClick:()=>t(!1),className:"w-full py-3 rounded-xl bg-white/10 text-white font-medium hover:bg-white/15 transition-colors",children:"Notify Me When Available"})]})]})})})]})}let cR=[{id:"focus",icon:cC,label:"Deep Focus",color:"#3b82f6",description:"Lock in and get things done"},{id:"creativity",icon:ck,label:"Creative Flow",color:"#f59e0b",description:"Unlock artistic potential"},{id:"relax",icon:sb,label:"Deep Relaxation",color:"#10b981",description:"Melt away stress"},{id:"sleep",icon:cS,label:"Better Sleep",color:"#6366f1",description:"Drift into deep rest"},{id:"energy",icon:cA,label:"Energy Boost",color:"#ef4444",description:"Ignite your motivation"},{id:"spiritual",icon:t9.Z,label:"Spiritual Journey",color:"#8b5cf6",description:"Explore consciousness"},{id:"love",icon:cE,label:"Self Love",color:"#ec4899",description:"Connect with yourself"},{id:"clarity",icon:sv.Z,label:"Mental Clarity",color:"#06b6d4",description:"Clear the fog"}],cI={focus:["adderall","caffeine","meditation"],creativity:["lsd","cannabis","psilocybin"],relax:["cannabis","kratom","meditation"],sleep:["ambien","meditation","cannabis"],energy:["caffeine","runners-high","adderall"],spiritual:["dmt","ayahuasca","psilocybin","mescaline"],love:["mdma","meditation","2cb"],clarity:["meditation","psilocybin","lsd"]};function cP(){let[e,t]=(0,e0.useState)(null),[s,i]=(0,e0.useState)(!1),{startTrip:n,isPremium:r,decrementTrial:a,getTrialsRemaining:o}=tt(),l=e?cI[e]?.map(e=>lX.find(t=>t.id===e)).filter(Boolean):[],c=e=>{t(e),i(!0)},u=e=>{let t=o(e.id);!r&&e.isPremium&&t<=0||(!r&&e.isPremium&&a(e.id),n(e))},h=cR.find(t=>t.id===e);return(0,eK.jsxs)("div",{className:"min-h-screen pb-32",children:[(0,eK.jsxs)("div",{className:"px-4 pt-12 pb-6",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[eK.jsx(tr,{className:"w-8 h-8 text-neuro-cyan"}),eK.jsx("h1",{className:"text-3xl font-bold text-gradient",children:"Find Your State"})]}),eK.jsx("p",{className:"text-white/50 text-sm",children:"Tell us your goal, we'll guide your journey"})]}),(0,eK.jsxs)("div",{className:"mx-4 mb-6 p-4 rounded-2xl bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/20",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eK.jsx(t9.Z,{className:"w-5 h-5 text-amber-400"}),eK.jsx("span",{className:"text-sm font-semibold text-amber-400",children:"AI CURATOR COMING SOON"})]}),eK.jsx("p",{className:"text-xs text-white/60",children:"Our AI will learn your preferences and create personalized dose stacks. For now, explore our curated recommendations!"})]}),eK.jsx(e1.M,{mode:"wait",children:s?(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0},className:"px-4",children:[(0,eK.jsxs)("button",{onClick:()=>i(!1),className:"flex items-center gap-2 text-white/60 hover:text-white mb-6 transition-colors",children:[eK.jsx(sT.Z,{className:"w-4 h-4 rotate-180"}),eK.jsx("span",{className:"text-sm",children:"Choose different goal"})]}),h&&(0,eK.jsxs)("div",{className:"flex items-center gap-4 mb-6 p-4 glass rounded-2xl",style:{borderColor:`${h.color}30`},children:[eK.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center",style:{backgroundColor:`${h.color}20`},children:eK.jsx(h.icon,{className:"w-7 h-7",style:{color:h.color}})}),(0,eK.jsxs)("div",{children:[eK.jsx("h2",{className:"text-xl font-bold text-white",children:h.label}),eK.jsx("p",{className:"text-sm text-white/60",children:h.description})]})]}),eK.jsx("h3",{className:"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider",children:"Recommended for you"}),eK.jsx("div",{className:"space-y-3",children:l.map((e,t)=>(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"glass rounded-2xl p-4 flex items-center gap-4",children:[eK.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",style:{background:`linear-gradient(135deg, ${e.colors[0]}20, ${e.colors[1]||e.colors[0]}20)`},children:"psychedelic"===e.category?"\uD83C\uDF44":"euphoric"===e.category?"✨":"meditative"===e.category?"\uD83E\uDDD8":"focus"===e.category?"\uD83C\uDFAF":"\uD83D\uDCAB"}),(0,eK.jsxs)("div",{className:"flex-1",children:[eK.jsx("h4",{className:"font-semibold text-white",children:e.name}),eK.jsx("p",{className:"text-xs text-white/50",children:e.tagline})]}),eK.jsx(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(e),className:"px-4 py-2 rounded-full text-sm font-medium bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white",children:"Try"})]},e.id))}),(0,eK.jsxs)("div",{className:"mt-8 p-5 rounded-2xl bg-gradient-to-br from-neuro-purple/10 to-neuro-magenta/10 border border-neuro-purple/20 text-center",children:[eK.jsx(sv.Z,{className:"w-10 h-10 text-neuro-purple mx-auto mb-3"}),eK.jsx("h3",{className:"font-semibold text-white mb-2",children:"AI Trip Curator"}),eK.jsx("p",{className:"text-sm text-white/60 mb-4",children:"Coming soon: Our AI will analyze your journal, mood, and biometrics to create the perfect personalized dose stack."}),eK.jsx("span",{className:"px-4 py-2 rounded-full bg-neuro-purple/20 text-neuro-purple text-sm font-medium",children:"Premium Feature"})]}),eK.jsx("div",{className:"mt-6",children:eK.jsx(cD,{})}),(0,eK.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[eK.jsx(cj,{type:"drug"}),eK.jsx(cj,{type:"visual"})]})]},"results"):(0,eK.jsxs)(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-50},className:"px-4",children:[eK.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"What's your intention today?"}),eK.jsx("div",{className:"grid grid-cols-2 gap-3",children:cR.map((e,t)=>{let s=e.icon;return(0,eK.jsxs)(ts.E.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>c(e.id),className:"p-4 glass rounded-2xl text-left hover:border-white/20 transition-all group",style:{borderColor:`${e.color}20`},children:[eK.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center mb-3",style:{backgroundColor:`${e.color}20`},children:eK.jsx(s,{className:"w-5 h-5",style:{color:e.color}})}),eK.jsx("h3",{className:"font-semibold text-white mb-1",children:e.label}),eK.jsx("p",{className:"text-xs text-white/50",children:e.description}),eK.jsx(sT.Z,{className:"w-4 h-4 absolute top-4 right-4 text-white/20 group-hover:text-white/40 transition-colors"})]},e.id)})})]},"goals")})]})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let cq=(0,ti.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var cF=s(6993),cV=s(4857),cz=s(1806),cL=s(3810);/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let cB=(0,ti.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function cW({entry:e,onClose:t}){var s;let[i,n]=(0,e0.useState)(!1),[r,a]=(0,e0.useState)(!1),o=(0,e0.useRef)(null),l=(s=e.doseId,lX.find(e=>e.id===s)),c=e=>`${Math.floor(e/60)} min`,u=`🧠 Just completed a ${e.doseName} session on NeuroNirvana!

Duration: ${c(e.duration)}
Intensity: ${e.intensity}/10
Mood: ${e.mood.join(", ")}

${e.notes?`"${e.notes.slice(0,100)}${e.notes.length>100?"...":""}"`:""}

Try it yourself: neuronirvana.app 🌌`,h=async()=>{await navigator.clipboard.writeText(u),n(!0),setTimeout(()=>n(!1),2e3)},d=e=>{let t=encodeURIComponent(u),s={twitter:`https://twitter.com/intent/tweet?text=${t}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent("https://neuronirvana.app")}&quote=${t}`,whatsapp:`https://wa.me/?text=${t}`};s[e]&&window.open(s[e],"_blank")},p=async()=>{a(!0),setTimeout(()=>{a(!1),alert("Image generation coming soon! For now, take a screenshot of the card.")},1e3)};return eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm overflow-y-auto",onClick:t,children:(0,eK.jsxs)(ts.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"w-full max-w-md",children:[(0,eK.jsxs)("div",{ref:o,className:"glass rounded-3xl p-6 border border-white/20 mb-4",style:{background:`linear-gradient(135deg, ${l?.colors[0]}20 0%, #0a0a0f 50%, ${l?.colors[1]||l?.colors[0]}20 100%)`},children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center text-3xl",style:{backgroundColor:`${l?.colors[0]}30`},children:l?.category==="psychedelic"?"\uD83C\uDF44":l?.category==="euphoric"?"✨":l?.category==="meditative"?"\uD83E\uDDD8":l?.category==="focus"?"\uD83C\uDFAF":l?.category==="sleep"?"\uD83C\uDF19":l?.category==="dissociative"?"\uD83C\uDF00":"\uD83C\uDF3F"}),(0,eK.jsxs)("div",{children:[eK.jsx("h3",{className:"text-xl font-bold text-white",children:e.doseName}),eK.jsx("p",{className:"text-sm text-white/60",children:new Date(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),eK.jsx("button",{onClick:t,className:"p-2 rounded-full bg-white/10 hover:bg-white/20",children:eK.jsx(ss.Z,{className:"w-5 h-5"})})]}),(0,eK.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,eK.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[eK.jsx("p",{className:"text-lg font-bold text-white",children:c(e.duration)}),eK.jsx("p",{className:"text-xs text-white/40",children:"Duration"})]}),(0,eK.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[(0,eK.jsxs)("p",{className:"text-lg font-bold text-white",children:[e.intensity,"/10"]}),eK.jsx("p",{className:"text-xs text-white/40",children:"Intensity"})]}),(0,eK.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[eK.jsx("p",{className:"text-lg font-bold text-white",children:l?.visualType}),eK.jsx("p",{className:"text-xs text-white/40",children:"Visual"})]})]}),eK.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.mood.map((e,t)=>eK.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-white/10 text-white/80",children:e},t))}),e.notes&&eK.jsx("div",{className:"p-4 rounded-xl bg-white/5 mb-4",children:(0,eK.jsxs)("p",{className:"text-sm text-white/70 italic",children:['"',e.notes,'"']})}),(0,eK.jsxs)("div",{className:"flex items-center justify-center gap-2 pt-4 border-t border-white/10",children:[eK.jsx(t9.Z,{className:"w-4 h-4 text-neuro-purple"}),eK.jsx("span",{className:"text-sm text-white/60",children:"neuronirvana.app"})]})]}),(0,eK.jsxs)("div",{className:"glass rounded-2xl p-4 border border-white/20",children:[eK.jsx("h4",{className:"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider",children:"Share Your Journey"}),(0,eK.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d("twitter"),className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-white/5 hover:bg-white/10",children:[eK.jsx(cV.Z,{className:"w-5 h-5 text-[#1DA1F2]"}),eK.jsx("span",{className:"text-xs text-white/60",children:"Twitter"})]}),(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d("facebook"),className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-white/5 hover:bg-white/10",children:[eK.jsx(cz.Z,{className:"w-5 h-5 text-[#4267B2]"}),eK.jsx("span",{className:"text-xs text-white/60",children:"Facebook"})]}),(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d("whatsapp"),className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-white/5 hover:bg-white/10",children:[eK.jsx("svg",{className:"w-5 h-5 text-[#25D366]",fill:"currentColor",viewBox:"0 0 24 24",children:eK.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),eK.jsx("span",{className:"text-xs text-white/60",children:"WhatsApp"})]}),(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-white/5 hover:bg-white/10",children:[i?eK.jsx(sj.Z,{className:"w-5 h-5 text-green-400"}):eK.jsx(cL.Z,{className:"w-5 h-5 text-white/60"}),eK.jsx("span",{className:"text-xs text-white/60",children:i?"Copied!":"Copy"})]})]}),(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,disabled:r,className:"w-full py-3 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-medium flex items-center justify-center gap-2",children:[eK.jsx(cB,{className:"w-5 h-5"}),r?"Generating...":"Download as Image"]})]})]})})}let cZ=[{id:"euphoric",label:"Euphoric",emoji:"✨"},{id:"peaceful",label:"Peaceful",emoji:"\uD83E\uDDD8"},{id:"creative",label:"Creative",emoji:"\uD83C\uDFA8"},{id:"introspective",label:"Introspective",emoji:"\uD83D\uDD2E"},{id:"energized",label:"Energized",emoji:"⚡"},{id:"relaxed",label:"Relaxed",emoji:"\uD83D\uDE0C"}];function cH(){let{journalEntries:e,addJournalEntry:t,setJournalEntries:s}=tt(),{user:i}=(0,su.a)(),[n,r]=(0,e0.useState)(!1),[a,o]=(0,e0.useState)(null),[l,c]=(0,e0.useState)(!1),[u,h]=(0,e0.useState)(!1),[d,p]=(0,e0.useState)({mood:[],intensity:5,notes:"",doseName:"",doseId:""}),m=async()=>{if(d.notes.trim()||d.mood.length>0){let e={doseId:d.doseId||"custom",doseName:d.doseName||"Custom Entry",mood:d.mood,intensity:d.intensity,notes:d.notes,duration:0};t(e),i&&await (0,sN.RS)(i.id,e),p({mood:[],intensity:5,notes:"",doseName:"",doseId:""}),r(!1)}},f=e=>{p(t=>({...t,mood:t.mood.includes(e)?t.mood.filter(t=>t!==e):[...t.mood,e]}))},x=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,eK.jsxs)("div",{className:"min-h-screen pb-32",children:[(0,eK.jsxs)("div",{className:"px-4 pt-12 pb-6",children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[eK.jsx("h1",{className:"text-3xl font-bold text-gradient",children:"Trip Journal"}),e.length>0&&eK.jsx(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(!0),className:"p-3 rounded-full bg-gradient-to-r from-neuro-purple to-neuro-magenta",children:eK.jsx(cw.Z,{className:"w-5 h-5"})})]}),eK.jsx("p",{className:"text-white/50 text-sm",children:i?"Synced to cloud":"Reflect on your consciousness journeys"}),u&&(0,eK.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-neuro-purple text-sm",children:[eK.jsx(sc.Z,{className:"w-4 h-4 animate-spin"}),"Loading journal..."]})]}),eK.jsx("div",{className:"px-4 space-y-4",children:0===e.length?(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[eK.jsx(ta,{className:"w-16 h-16 text-white/20 mx-auto mb-6"}),eK.jsx("p",{className:"text-white/50 text-lg mb-2",children:"No journal entries yet"}),eK.jsx("p",{className:"text-white/30 text-sm mb-8",children:"Start documenting your consciousness journeys"}),(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(!0),className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-medium",children:[eK.jsx(cw.Z,{className:"w-5 h-5"}),"Add Your First Entry"]}),!i&&eK.jsx("p",{className:"text-white/30 text-xs mt-4",children:"Sign in to sync your journal across devices"})]}):e.map((e,t)=>(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"glass rounded-2xl p-5",children:[(0,eK.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,eK.jsxs)("div",{children:[eK.jsx("h3",{className:"font-semibold text-white",children:e.doseName}),(0,eK.jsxs)("div",{className:"flex items-center gap-3 text-xs text-white/50 mt-1",children:[(0,eK.jsxs)("span",{className:"flex items-center gap-1",children:[eK.jsx(cq,{className:"w-3 h-3"}),x(e.timestamp)]}),e.duration>0&&(0,eK.jsxs)("span",{className:"flex items-center gap-1",children:[eK.jsx(t8,{className:"w-3 h-3"}),t4(e.duration)]})]})]}),(0,eK.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-white/10",children:[eK.jsx(t7,{className:"w-3 h-3 text-neuro-magenta"}),(0,eK.jsxs)("span",{className:"text-xs",children:[e.intensity,"/10"]})]})]}),e.mood.length>0&&eK.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:e.mood.map(e=>{let t=cZ.find(t=>t.id===e);return t?(0,eK.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-white/10 text-white/70",children:[t.emoji," ",t.label]},e):null})}),e.notes&&eK.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:e.notes}),eK.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:(0,eK.jsxs)("button",{onClick:()=>o(e),className:"flex items-center gap-2 text-sm text-neuro-purple hover:text-neuro-magenta transition-colors",children:[eK.jsx(cF.Z,{className:"w-4 h-4"}),"Share this journey"]})})]},e.id))}),eK.jsx(e1.M,{children:n&&eK.jsx(ts.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/80 backdrop-blur-sm",onClick:()=>r(!1),children:(0,eK.jsxs)(ts.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},onClick:e=>e.stopPropagation(),className:"w-full max-w-lg glass rounded-t-3xl p-6 pb-24 mb-16",children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[eK.jsx("h2",{className:"text-xl font-bold",children:"New Journal Entry"}),eK.jsx("button",{onClick:()=>r(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:eK.jsx(ss.Z,{className:"w-5 h-5"})})]}),(0,eK.jsxs)("div",{className:"mb-6",children:[eK.jsx("label",{className:"text-sm text-white/60 mb-3 block",children:"How did you feel?"}),eK.jsx("div",{className:"flex flex-wrap gap-2",children:cZ.map(e=>(0,eK.jsxs)("button",{onClick:()=>f(e.id),className:`px-3 py-2 rounded-xl text-sm transition-all ${d.mood.includes(e.id)?"bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.emoji," ",e.label]},e.id))})]}),(0,eK.jsxs)("div",{className:"mb-6",children:[(0,eK.jsxs)("label",{className:"text-sm text-white/60 mb-3 block",children:["Experience Intensity: ",d.intensity,"/10"]}),eK.jsx("input",{type:"range",min:"1",max:"10",value:d.intensity,onChange:e=>p(t=>({...t,intensity:parseInt(e.target.value)})),className:"w-full accent-neuro-purple"})]}),(0,eK.jsxs)("div",{className:"mb-6",children:[eK.jsx("label",{className:"text-sm text-white/60 mb-3 block",children:"Notes & Reflections"}),eK.jsx("textarea",{value:d.notes,onChange:e=>p(t=>({...t,notes:e.target.value})),placeholder:"Describe your experience...",className:"w-full h-32 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50 resize-none"})]}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"w-full py-4 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-medium",children:"Save Entry"})]})})}),eK.jsx(e1.M,{children:a&&eK.jsx(cW,{entry:a,onClose:()=>o(null)})}),eK.jsx(sh,{isOpen:l,onClose:()=>c(!1)})]})}let cG=[{id:"delta",name:"Delta (Deep Sleep)",baseFreq:100,beatFreq:2},{id:"theta",name:"Theta (Meditation)",baseFreq:200,beatFreq:6},{id:"alpha",name:"Alpha (Relaxation)",baseFreq:300,beatFreq:10},{id:"beta",name:"Beta (Focus)",baseFreq:350,beatFreq:18},{id:"gamma",name:"Gamma (Insight)",baseFreq:400,beatFreq:40},{id:"174hz",name:"174Hz (Pain Relief)",baseFreq:174,beatFreq:0},{id:"396hz",name:"396Hz (Liberation)",baseFreq:396,beatFreq:0},{id:"432hz",name:"432Hz (Natural)",baseFreq:432,beatFreq:0},{id:"528hz",name:"528Hz (Love)",baseFreq:528,beatFreq:0},{id:"963hz",name:"963Hz (Crown)",baseFreq:963,beatFreq:0}],cU=[{id:"mandala",name:"Mandala Flow",icon:"\uD83C\uDF00"},{id:"particles",name:"Particle Field",icon:"✨"},{id:"fractals",name:"Fractal Journey",icon:"\uD83D\uDD2E"},{id:"chakra",name:"Chakra Spirals",icon:"\uD83E\uDDD8"},{id:"waves",name:"Color Waves",icon:"\uD83C\uDF0A"},{id:"breath",name:"Minimal Breath",icon:"\uD83D\uDCAB"},{id:"tunnel",name:"Hyperspace",icon:"\uD83D\uDE80"},{id:"cosmic",name:"Cosmic Void",icon:"\uD83C\uDF0C"}];function c$(){let{isPremium:e,startTrip:t,addCustomTrip:s,customTrips:i}=tt(),[n,r]=(0,e0.useState)(!1),[a,o]=(0,e0.useState)(""),[l,c]=(0,e0.useState)(30),[u,h]=(0,e0.useState)(5),[d,p]=(0,e0.useState)(["theta"]),[m,f]=(0,e0.useState)("mandala"),x=i.length<5,g=e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return e?(0,eK.jsxs)("div",{className:"min-h-screen pb-32",children:[(0,eK.jsxs)("div",{className:"px-4 pt-12 pb-6",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[eK.jsx(to,{className:"w-8 h-8 text-neuro-purple"}),eK.jsx("h1",{className:"text-3xl font-bold text-gradient",children:"Trip Builder"})]}),eK.jsx("p",{className:"text-white/50 text-sm",children:"Design your perfect consciousness journey"})]}),(0,eK.jsxs)("div",{className:"px-4 space-y-6",children:[(0,eK.jsxs)("div",{className:"glass rounded-2xl p-5",children:[eK.jsx("label",{className:"text-sm text-white/60 mb-3 block",children:"Trip Name"}),eK.jsx("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"My Custom Journey",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-neuro-purple/50"})]}),(0,eK.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[eK.jsx(t8,{className:"w-5 h-5 text-white/60"}),eK.jsx("span",{className:"text-sm text-white/60",children:"Duration"}),(0,eK.jsxs)("span",{className:"ml-auto text-lg font-semibold",children:[l," min"]})]}),eK.jsx("input",{type:"range",min:"5",max:"180",step:"5",value:l,onChange:e=>c(parseInt(e.target.value)),className:"w-full accent-neuro-purple"}),(0,eK.jsxs)("div",{className:"flex justify-between text-xs text-white/40 mt-2",children:[eK.jsx("span",{children:"5 min"}),eK.jsx("span",{children:"180 min"})]})]}),(0,eK.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[eK.jsx(t7,{className:"w-5 h-5 text-white/60"}),eK.jsx("span",{className:"text-sm text-white/60",children:"Intensity"}),(0,eK.jsxs)("span",{className:"ml-auto text-lg font-semibold",children:[u,"/10"]})]}),eK.jsx("input",{type:"range",min:"1",max:"10",value:u,onChange:e=>h(parseInt(e.target.value)),className:"w-full accent-neuro-magenta"})]}),(0,eK.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[eK.jsx(cv,{className:"w-5 h-5 text-white/60"}),eK.jsx("span",{className:"text-sm text-white/60",children:"Frequencies"})]}),eK.jsx("div",{className:"flex flex-wrap gap-2",children:cG.map(e=>eK.jsx("button",{onClick:()=>g(e.id),className:`px-3 py-2 rounded-xl text-xs font-medium transition-all ${d.includes(e.id)?"bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:e.name},e.id))})]}),(0,eK.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[eK.jsx(sl.Z,{className:"w-5 h-5 text-white/60"}),eK.jsx("span",{className:"text-sm text-white/60",children:"Visual Pattern"})]}),eK.jsx("div",{className:"grid grid-cols-2 gap-2",children:cU.map(e=>(0,eK.jsxs)("button",{onClick:()=>f(e.id),className:`px-4 py-3 rounded-xl text-sm font-medium transition-all flex items-center gap-2 ${m===e.id?"bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[eK.jsx("span",{children:e.icon}),e.name]},e.id))})]}),(0,eK.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,eK.jsxs)("div",{className:"flex items-center justify-between",children:[eK.jsx("span",{className:"text-sm text-white/60",children:"Saved Trips"}),(0,eK.jsxs)("span",{className:`text-sm font-medium ${x?"text-white":"text-amber-400"}`,children:[i.length,"/",5]})]}),!x&&eK.jsx("p",{className:"text-xs text-amber-400/80 mt-2",children:"Maximum trips reached. Delete a trip to create new ones."})]}),(0,eK.jsxs)(ts.E.button,{whileHover:{scale:x?1.02:1},whileTap:{scale:x?.98:1},onClick:()=>{if(!e){r(!0);return}let i=d.map(e=>{let t=cG.find(t=>t.id===e);return{name:t?.name||"",baseFreq:t?.baseFreq||200,beatFreq:t?.beatFreq||6,type:t?.beatFreq===0?"solfeggio":"binaural"}}),n={id:`custom-${Date.now()}`,name:a||"Custom Trip",slug:"custom",tagline:"Your personalized journey",description:"A custom consciousness experience designed by you.",category:"meditative",frequencies:i,defaultDuration:60*l,intensity:u,visualType:m,colors:["#8b5cf6","#ec4899","#06b6d4","#f59e0b"],effects:["Custom Experience"],trialsRemaining:999,isPremium:!1};s({name:a||"Custom Trip",duration:60*l,intensity:u,frequencies:i.map(e=>({baseFreq:e.baseFreq,beatFreq:e.beatFreq})),visualType:m}),t(n)},disabled:!x,className:`w-full py-4 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all ${x?"bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white":"bg-white/10 text-white/40 cursor-not-allowed"}`,children:[eK.jsx(sI.Z,{className:"w-5 h-5"}),x?"Launch Trip":"Trip Limit Reached"]})]}),eK.jsx(cb,{isOpen:n,onClose:()=>r(!1),feature:"Custom Trip Builder"})]}):(0,eK.jsxs)("div",{className:"min-h-screen pb-32 flex flex-col items-center justify-center px-4",children:[(0,eK.jsxs)("div",{className:"text-center",children:[eK.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-neuro-purple/20 to-neuro-magenta/20 flex items-center justify-center mx-auto mb-6",children:eK.jsx(sa,{className:"w-10 h-10 text-neuro-purple"})}),eK.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Premium Feature"}),eK.jsx("p",{className:"text-white/50 mb-6 max-w-sm",children:"Create personalized consciousness experiences with the Custom Trip Builder."}),(0,eK.jsxs)(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(!0),className:"px-8 py-4 rounded-xl bg-gradient-to-r from-neuro-purple to-neuro-magenta text-white font-medium flex items-center gap-2 mx-auto",children:[eK.jsx(t9.Z,{className:"w-5 h-5"}),"Unlock Premium"]})]}),eK.jsx(cb,{isOpen:n,onClose:()=>r(!1),feature:"Custom Trip Builder"})]})}let cQ=[{id:"basic",name:"Basic",price:9.99,period:"month",icon:t9.Z,color:"#8b5cf6",features:["All 20 premium doses","Custom Trip Builder","90-minute sessions","All 8 visual patterns","Trip Journal","No advertisements"],popular:!1},{id:"premium",name:"Premium Plus",price:19.99,period:"month",icon:tl,color:"#f59e0b",features:["Everything in Basic","EEG headband integration","Apple Watch biometrics","Spatial audio (Dolby Atmos)","AR visual mode","AI Trip Curator","Voice-guided sessions","Priority support"],popular:!0},{id:"pro",name:"Professional",price:49.99,period:"month",icon:sv.Z,color:"#06b6d4",features:["Everything in Premium","Therapist dashboard","Client session export","Multi-user support (10)","Custom branding","API access","Analytics dashboard","Dedicated account manager"],popular:!1}],cY=[{icon:sy.Z,title:"Real Binaural Beats",description:"Scientifically-tuned frequencies generated in real-time using Web Audio API"},{icon:t7,title:"GPU-Accelerated Visuals",description:"Stunning WebGL shaders that respond to your session intensity"},{icon:sv.Z,title:"AI-Powered Curation",description:"Get personalized dose recommendations based on your mood and goals"},{icon:l1.Z,title:"Community Trips",description:"Join synchronized group sessions with friends (coming soon)"}];function cX(){let{isPremium:e,setPremium:t}=tt(),s=e=>{t(!0)};return(0,eK.jsxs)("div",{className:"min-h-screen pb-32",children:[(0,eK.jsxs)("div",{className:"px-4 pt-12 pb-8 text-center",children:[eK.jsx(ts.E.div,{initial:{scale:0},animate:{scale:1},className:"w-20 h-20 rounded-full bg-gradient-to-r from-amber-500/20 to-orange-500/20 flex items-center justify-center mx-auto mb-4",children:eK.jsx(tl,{className:"w-10 h-10 text-amber-400"})}),eK.jsx("h1",{className:"text-3xl font-bold text-gradient mb-2",children:e?"You're Premium!":"Unlock Your Mind"}),eK.jsx("p",{className:"text-white/50 max-w-md mx-auto",children:e?"Thank you for supporting NeuroNirvana. Enjoy unlimited access to all features.":"Get unlimited access to all doses, custom trip builder, and advanced features."})]}),e&&eK.jsx("div",{className:"px-4 mb-8",children:(0,eK.jsxs)("div",{className:"glass rounded-2xl p-6 text-center border border-amber-500/30",children:[eK.jsx(t9.Z,{className:"w-8 h-8 text-amber-400 mx-auto mb-2"}),eK.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Premium Active"}),eK.jsx("p",{className:"text-sm text-white/60",children:"All features unlocked"})]})}),!e&&eK.jsx("div",{className:"px-4 mb-8",children:eK.jsx("div",{className:"space-y-4",children:cQ.map((e,t)=>{let i=e.icon;return(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:`relative glass rounded-2xl p-5 border transition-all ${e.popular?"border-amber-500/50 bg-gradient-to-br from-amber-500/10 to-orange-500/5":"border-white/10"}`,children:[e.popular&&eK.jsx("div",{className:"absolute -top-3 left-4 px-3 py-1 rounded-full bg-gradient-to-r from-amber-500 to-orange-500 text-xs font-bold text-black",children:"MOST POPULAR"}),(0,eK.jsxs)("div",{className:"flex items-start gap-4",children:[eK.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${e.color}20`},children:eK.jsx(i,{className:"w-6 h-6",style:{color:e.color}})}),(0,eK.jsxs)("div",{className:"flex-1",children:[eK.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),(0,eK.jsxs)("div",{className:"flex items-baseline gap-1 mb-3",children:[(0,eK.jsxs)("span",{className:"text-2xl font-bold text-white",children:["$",e.price]}),(0,eK.jsxs)("span",{className:"text-white/50",children:["/",e.period]})]}),(0,eK.jsxs)("ul",{className:"space-y-1.5 mb-4",children:[e.features.slice(0,4).map((e,t)=>(0,eK.jsxs)("li",{className:"flex items-center gap-2 text-sm text-white/70",children:[eK.jsx(sj.Z,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),e]},t)),e.features.length>4&&(0,eK.jsxs)("li",{className:"text-sm text-white/50",children:["+",e.features.length-4," more features"]})]}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s(e.id),className:`w-full py-3 rounded-xl font-medium transition-all ${e.popular?"bg-gradient-to-r from-amber-500 to-orange-500 text-black":"bg-white/10 text-white hover:bg-white/20"}`,children:"Start 7-Day Free Trial"})]})]})]},e.id)})})}),(0,eK.jsxs)("div",{className:"px-4",children:[eK.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"What You Get"}),eK.jsx("div",{className:"grid gap-4",children:cY.map((e,t)=>{let s=e.icon;return(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+.1*t},className:"glass rounded-xl p-4 flex items-start gap-4",children:[eK.jsx("div",{className:"w-10 h-10 rounded-lg bg-neuro-purple/20 flex items-center justify-center flex-shrink-0",children:eK.jsx(s,{className:"w-5 h-5 text-neuro-purple"})}),(0,eK.jsxs)("div",{children:[eK.jsx("h3",{className:"font-medium text-white mb-1",children:e.title}),eK.jsx("p",{className:"text-sm text-white/60",children:e.description})]})]},t)})})]}),eK.jsx("div",{className:"px-4 mt-8 text-center",children:eK.jsx("p",{className:"text-xs text-white/40",children:"7-day free trial • Cancel anytime • Secure payment via Stripe"})})]})}/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let cJ=(0,ti.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),cK=(0,ti.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),c0=[{id:"ai-curator",icon:sv.Z,title:"AI Trip Curator",description:"GPT-powered chatbot asks your mood & goals, then recommends the perfect dose combo tailored to you.",status:"Coming Q2 2024",tier:"Premium",color:"#8b5cf6",preview:['"I want to focus for 4 hours straight"','"Help me sleep deeply tonight"','"I need creative inspiration"']},{id:"biometric",icon:cM,title:"Biometric Adaptation",description:"Connect Apple Watch or Fitbit. AI adjusts frequencies in real-time based on your HRV, heart rate, and stress levels.",status:"Coming Q3 2024",tier:"Premium+",color:"#ec4899",preview:["Real-time heart rate sync","HRV-based intensity adjustment","Sleep stage detection"]},{id:"visual-gen",icon:c_,title:"AI Visual Generator",description:"Describe your ideal trip visuals in words. Our AI generates custom WebGL shaders and patterns just for you.",status:"Coming Q2 2024",tier:"Premium",color:"#f59e0b",preview:['"Flowing liquid gold fractals"','"Deep ocean bioluminescence"','"Aurora borealis in space"']},{id:"voice-guide",icon:cJ,title:"Voice-Guided Sessions",description:"AI-generated voice narration personalized with your name, goals, and preferences. Powered by ElevenLabs.",status:"Coming Q3 2024",tier:"Premium",color:"#06b6d4",preview:["Personalized guided meditations","Breathing exercise prompts","Journey narration"]},{id:"dream-analyzer",icon:ta,title:"Dream Journal Analyzer",description:"AI analyzes your trip journals, detects patterns in your experiences, and suggests optimized doses for your goals.",status:"Coming Q4 2024",tier:"Premium",color:"#10b981",preview:["Pattern recognition","Mood trend analysis","Personalized recommendations"]}],c1=[{icon:sy.Z,title:"Spatial Audio",description:"Dolby Atmos 3D binaural soundscapes"},{icon:to,title:"AR Visual Mode",description:"Project visuals into your room"},{icon:cE,title:"Group Trips",description:"Synchronized sessions with friends"},{icon:t7,title:"EEG Integration",description:"Brain-computer interface support"}];function c2(){return(0,eK.jsxs)("div",{className:"min-h-screen pb-32",children:[(0,eK.jsxs)("div",{className:"px-4 pt-12 pb-6",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[eK.jsx(t9.Z,{className:"w-8 h-8 text-amber-400"}),eK.jsx("h1",{className:"text-3xl font-bold text-gradient",children:"Coming Soon"})]}),eK.jsx("p",{className:"text-white/50 text-sm",children:"AI-powered features on the horizon"})]}),eK.jsx("div",{className:"mx-4 mb-6 p-4 rounded-2xl bg-gradient-to-r from-neuro-purple/20 to-neuro-magenta/20 border border-neuro-purple/30",children:(0,eK.jsxs)("div",{className:"flex items-center gap-3",children:[eK.jsx("div",{className:"p-2 rounded-xl bg-neuro-purple/20",children:eK.jsx(cK,{className:"w-5 h-5 text-neuro-purple"})}),(0,eK.jsxs)("div",{className:"flex-1",children:[eK.jsx("h3",{className:"font-semibold text-white text-sm",children:"Get Early Access"}),eK.jsx("p",{className:"text-xs text-white/60",children:"Premium members get beta access to new features first"})]}),eK.jsx(sT.Z,{className:"w-5 h-5 text-white/40"})]})}),(0,eK.jsxs)("div",{className:"px-4 space-y-4",children:[eK.jsx("h2",{className:"text-sm font-semibold text-white/60 uppercase tracking-wider mb-3",children:"5 AI-Powered Features"}),c0.map((e,t)=>{let s=e.icon;return(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"glass rounded-2xl p-5 border border-white/10",style:{borderColor:`${e.color}20`},children:[(0,eK.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[eK.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${e.color}20`},children:eK.jsx(s,{className:"w-6 h-6",style:{color:e.color}})}),(0,eK.jsxs)("div",{className:"flex-1",children:[(0,eK.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[eK.jsx("h3",{className:"font-semibold text-white",children:e.title}),eK.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:`${e.color}20`,color:e.color},children:e.tier})]}),eK.jsx("p",{className:"text-sm text-white/60",children:e.description})]})]}),eK.jsx("div",{className:"space-y-2 mb-4",children:e.preview.map((t,s)=>(0,eK.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[eK.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:e.color}}),t]},s))}),(0,eK.jsxs)("div",{className:"flex items-center justify-between",children:[eK.jsx("span",{className:"text-xs text-white/40",children:e.status}),(0,eK.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white/5",children:[eK.jsx(sa,{className:"w-3 h-3 text-white/40"}),eK.jsx("span",{className:"text-xs text-white/40",children:"Premium Required"})]})]})]},e.id)})]}),(0,eK.jsxs)("div",{className:"px-4 mt-8",children:[eK.jsx("h2",{className:"text-sm font-semibold text-white/60 uppercase tracking-wider mb-3",children:"Also Coming"}),eK.jsx("div",{className:"grid grid-cols-2 gap-3",children:c1.map((e,t)=>{let s=e.icon;return(0,eK.jsxs)(ts.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5+.05*t},className:"glass rounded-xl p-4 text-center",children:[eK.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center mx-auto mb-2",children:eK.jsx(s,{className:"w-5 h-5 text-white/60"})}),eK.jsx("h4",{className:"font-medium text-white text-sm mb-1",children:e.title}),eK.jsx("p",{className:"text-xs text-white/40",children:e.description})]},t)})})]}),eK.jsx("div",{className:"px-4 mt-8",children:(0,eK.jsxs)("div",{className:"p-6 rounded-2xl bg-gradient-to-br from-amber-500/10 to-orange-500/10 border border-amber-500/20 text-center",children:[eK.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Be the First to Know"}),eK.jsx("p",{className:"text-sm text-white/60 mb-4",children:"Upgrade to Premium and get exclusive early access to all new AI features"}),eK.jsx(ts.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-6 py-3 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 text-black font-semibold",children:"Unlock Premium"})]})})]})}function c4(){let{activeTab:e,currentDose:t}=tt(),[s,i]=(0,e0.useState)(!1);return(0,eK.jsxs)("main",{className:"min-h-screen bg-neuro-deep",children:[eK.jsx(st,{}),!t&&eK.jsx(sD,{}),(()=>{switch(e){case"dispensary":default:return eK.jsx(cN,{});case"discover":return eK.jsx(cP,{});case"journal":return eK.jsx(cH,{});case"builder":return eK.jsx(c$,{});case"premium":return eK.jsx(cX,{});case"coming-soon":return eK.jsx(c2,{})}})(),eK.jsx(t3,{}),eK.jsx(e1.M,{children:t&&eK.jsx(lQ,{})}),eK.jsx(sh,{isOpen:s,onClose:()=>i(!1)}),!t&&eK.jsx(sx,{}),!t&&eK.jsx(sk,{}),eK.jsx(sS,{showOnMount:!0}),!t&&(0,eK.jsxs)("div",{className:"fixed top-16 right-4 z-40 flex items-center gap-3",children:[eK.jsx(sO,{onOpenAuth:()=>i(!0)}),eK.jsx(sg.Z,{})]})]})}},5480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>r,default:()=>o});var i=s(8570);let n=(0,i.createProxy)(String.raw`C:\Users\nitis\CascadeProjects\neuronirvana\src\app\page.tsx`),{__esModule:r,$$typeof:a}=n;n.default;let o=(0,i.createProxy)(String.raw`C:\Users\nitis\CascadeProjects\neuronirvana\src\app\page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[948,681,903,275],()=>s(1402));module.exports=i})();