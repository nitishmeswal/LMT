"use strict";(()=>{var e={};e.id=12,e.ids=[12],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9301:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>j,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>I,staticGenerationAsyncStorage:()=>x});var n={};t.r(n),t.d(n,{GET:()=>d});var o=t(9303),a=t(8716),s=t(670),i=t(7857),u=t(7070);let c=(0,i.eI)("https://rnqpujwxrqufzjyplzcm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJucXB1and4cnF1ZnpqeXBsemNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczNDk3ODMsImV4cCI6MjA4MjkyNTc4M30.9T2yvEPMAy4k7WulyniY61YU4Ku-AYYoS3aEtPyZBt4"),p=null,l=0;async function d(){let e=Date.now();if(null!==p&&e-l<3e4)return u.NextResponse.json({count:p,cached:!0});try{let{count:r,error:t}=await c.from("trip_ratings").select("*",{count:"exact",head:!0});if(t)return console.error("Error fetching trial count:",t),u.NextResponse.json({count:p||420,error:!0});let n=Math.max(0,420-(r||0));return p=n,l=e,u.NextResponse.json({count:n,cached:!1})}catch(e){return console.error("Trial count error:",e),u.NextResponse.json({count:p||420,error:!0})}}let m=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/trials/route",pathname:"/api/trials",filename:"route",bundlePath:"app/api/trials/route"},resolvedPagePath:"C:\\Users\\nitis\\CascadeProjects\\neuronirvana\\src\\app\\api\\trials\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:I}=m,j="/api/trials/route";function y(){return(0,s.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:x})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[948,564],()=>t(9301));module.exports=n})();